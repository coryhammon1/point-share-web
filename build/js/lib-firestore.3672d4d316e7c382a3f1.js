/*! For license information please see lib-firestore.3672d4d316e7c382a3f1.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{92:function(t,e,n){"use strict";(function(t){n(47),n(17),n(48),n(5),n(66);var e=n(0),r=n(3),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var s,u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a=a||{},c=u||self;function h(){}function f(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function b(){return Date.now()}function w(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++d)})(this)},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function O(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var A,S=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function j(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var D=c.navigator;if(D){var k=D.userAgent;if(k){A=k;break t}}A=""}function C(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function P(t){var e={};for(var n in t)e[n]=t[n];return e}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=h;var V,U,q=j(A,"Opera"),F=j(A,"Trident")||j(A,"MSIE"),z=j(A,"Edge"),H=z||F,B=j(A,"Gecko")&&!(j(A.toLowerCase(),"webkit")&&!j(A,"Edge"))&&!(j(A,"Trident")||j(A,"MSIE"))&&!j(A,"Edge"),G=j(A.toLowerCase(),"webkit")&&!j(A,"Edge");function K(){var t=c.document;return t?t.documentMode:void 0}t:{var J="",X=(U=A,B?/rv:([^\);]+)(\)|;)/.exec(U):z?/Edge\/([\d\.]+)/.exec(U):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):G?/WebKit\/(\S+)/.exec(U):q?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(X&&(J=X?X[1]:""),F){var W=K();if(null!=W&&W>parseFloat(J)){V=String(W);break t}}V=J}var Y,Q={};function $(t){return function(t,e){var n=Q;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=S(String(V)).split("."),r=S(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",u=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;e=x(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||x(0==s[2].length,0==u[2].length)||x(s[2],u[2]),s=s[3],u=u[3]}while(0==e)}return 0<=e}))}if(c.document&&F){var Z=K();Y=Z||(parseInt(V,10)||void 0)}else Y=void 0;var tt=Y,et=!F||9<=Number(tt),nt=F&&!$("9"),rt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",h,e),c.removeEventListener("test",h,e)}catch(t){}return t}();function it(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ot(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{M(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}it.prototype.b=function(){this.defaultPrevented=!0},w(ot,it);var st={2:"touch",3:"pen",4:"mouse"};ot.prototype.b=function(){ot.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,nt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ut="closure_listenable_"+(1e6*Math.random()|0),at=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ht(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ft(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function pt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=pt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ct(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var dt="closure_lm_"+(1e6*Math.random()|0),vt={};function yt(t,e,n,r,i){if(r&&r.once)return mt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[ut]?t.va(e,n,l(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=l(i)?!!i.capture:!!i;if(s&&!et)return null;var u=Tt(t);if(u||(t[dt]=u=new ft(t)),(n=u.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=_t,e=et?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)rt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function mt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[ut]?t.wa(e,n,l(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function bt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);else r=l(r)?!!r.capture:!!r,n=Nt(n),t&&t[ut]?(t=t.c,(e=String(e).toString())in t.a&&(-1<(n=pt(o=t.a[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=Tt(t))&&(e=t.a[e.toString()],t=-1,e&&(t=pt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ut])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tt(e))?(lt(n,t),0==n.b&&(n.src=null,e[dt]=null)):ht(t)}}}function It(t){return t in vt?vt[t]:vt[t]="on"+t}function Et(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&wt(t),n.call(r,e)}function _t(t,e){if(t.Y)return!0;if(!et){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Et(t,e=new ot(e,this))}return Et(t,new ot(e,this))}function Tt(t){return(t=t[dt])instanceof ft?t:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(t){return"function"==typeof t?t:(t[Ot]||(t[Ot]=function(e){return t.handleEvent(e)}),t[Ot])}function At(){I.call(this),this.c=new ft(this),this.J=this,this.C=null}function St(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var i=e;R(e=new it(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=jt(s,r,!0,e)&&i}if(i=jt(s=e.a=t,r,!0,e)&&i,i=jt(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=jt(s=e.a=n[o],r,!1,e)&&i}function jt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var u=s.listener,a=s.ca||s.src;s.Z&&lt(t.c,s),i=!1!==u.call(a,r)&&i}}return i&&!r.defaultPrevented}w(At,I),At.prototype[ut]=!0,(s=At.prototype).addEventListener=function(t,e,n,r){yt(this,t,e,n,r)},s.removeEventListener=function(t,e,n,r){bt(this,t,e,n,r)},s.G=function(){if(At.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.C=null},s.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},s.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var xt=c.JSON.stringify;function Dt(){this.b=this.a=null}var kt,Ct=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Lt}),(function(t){t.reset()}));function Pt(){var t=Ut,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Rt(t){c.setTimeout((function(){throw t}),0)}function Mt(t,e){kt||function(){var t=c.Promise.resolve(void 0);kt=function(){t.then(qt)}}(),Vt||(kt(),Vt=!0),Ut.add(t,e)}Dt.prototype.add=function(t,e){var n=Ct.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Vt=!1,Ut=new Dt;function qt(){for(var t;t=Pt();){try{t.a.call(t.b)}catch(t){Rt(t)}var e=Ct;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Vt=!1}function Ft(t,e){At.call(this),this.b=t||1,this.a=e||c,this.f=g(this.Za,this),this.g=b()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ht(t,e,n){if("function"==typeof t)n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Bt(t){t.a=Ht((function(){t.a=null,t.c&&(t.c=!1,Bt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}w(Ft,At),(s=Ft.prototype).aa=!1,s.M=null,s.Za=function(){if(this.aa){var t=b()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),St(this,"tick"),this.aa&&(zt(this),this.start()))}},s.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},s.G=function(){Ft.X.G.call(this),zt(this),delete this.a};var Gt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Bt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(c.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(I);function Kt(t){I.call(this),this.b=t,this.a={}}w(Kt,I);var Jt=[];function Xt(t,e,n,r){Array.isArray(n)||(n&&(Jt[0]=n.toString()),n=Jt);for(var i=0;i<n.length;i++){var o=yt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wt(t){C(t.a,(function(t,e){this.a.hasOwnProperty(e)&&wt(t)}),t),t.a={}}function Yt(){this.a=!0}function Qt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return xt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Kt.prototype.G=function(){Kt.X.G.call(this),Wt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.info=function(){};var $t={},Zt=null;function te(){return Zt=Zt||new At}function ee(t){it.call(this,$t.Fa,t)}function ne(t){var e=te();St(e,new ee(e,t))}function re(t,e){it.call(this,$t.STAT_EVENT,t),this.stat=e}function ie(t){var e=te();St(e,new re(e,t))}function oe(t){it.call(this,$t.Ga,t)}function se(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){t()}),e)}$t.Fa="serverreachability",w(ee,it),$t.STAT_EVENT="statevent",w(re,it),$t.Ga="timingevent",w(oe,it);var ue={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ae={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ce(){}function he(t){var e;return(e=t.a)||(e=t.a={}),e}function fe(){}ce.prototype.a=null;var le,pe={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function de(){it.call(this,"d")}function ve(){it.call(this,"c")}function ye(){}function ge(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Kt(this),this.P=me,t=H?125:void 0,this.R=new Ft(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}w(de,it),w(ve,it),w(ye,ce),le=new ye;var me=45e3,be={},we={};function Ie(t,e,n){t.H=1,t.i=He(Me(e)),t.j=n,t.I=!0,Ee(t,null)}function Ee(t,e){t.u=b(),Oe(t),t.l=Me(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),nn(n.b,"t",r),t.D=0,t.a=Qn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Gt(g(t.Ca,t,t.a),t.O)),Xt(t.J,t.a,"readystatechange",t.Xa),e=t.B?P(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ne(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",u=o.split("&"),a=0;a<u.length;a++){var c=u[a].split("=");if(1<c.length){var h=c[0];c=c[1];var f=h.split("_");s=2<=f.length&&"type"==f[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function _e(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Te(t,n);if(i==we){4==e&&(t.h=4,ie(14),r=!1),Qt(t.c,t.f,null,"[Incomplete Response]");break}if(i==be){t.h=4,ie(15),Qt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Qt(t.c,t.f,i,null),xe(t,i)}4==e&&0==n.length&&(t.h=1,ie(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hn(e),e.F=!0,ie(11))):(Qt(t.c,t.f,n,"[Invalid Chunked Response]"),je(t),Se(t))}function Te(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?we:(n=Number(e.substring(n,r)),isNaN(n)?be:(r+=1)+n>e.length?we:(e=e.substr(r,n),t.D=r+n,e))}function Oe(t){t.T=b()+t.P,Ne(t,t.P)}function Ne(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=se(g(t.Va,t),e)}function Ae(t){t.o&&(c.clearTimeout(t.o),t.o=null)}function Se(t){0==t.g.v||t.A||Kn(t.g,t)}function je(t){Ae(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),Wt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function xe(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||hn(n.b,t)))if(n.I=t.N,!t.C&&hn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Gn(n),Pn(n)}zn(n),ie(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=se(g(n.Sa,n),6e3));if(1>=cn(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Xn(n,11)}else if((t.C||n.a==t)&&Gn(n),!N(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var u=i[5];if(null!=u&&"number"==typeof u&&0<u){var a=1.5*u;n.D=a,n.c.info("backChannelRequestTimeoutMs_="+a)}a=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var f=a.b;!f.a&&(j(h,"spdy")||j(h,"quic")||j(h,"h2"))&&(f.f=f.g,f.a=new Set,f.b&&(fn(f,f.b),f.b=null))}if(a.A){var l=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;l&&(a.na=l,ze(a.B,a.A,l))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=b()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((a=n).la=Yn(a,a.C?a.ga:null,a.fa),p.C){ln(a.b,p);var d=p,v=a.D;v&&d.setTimeout(v),d.o&&(Ae(d),Oe(d)),a.a=p}else Fn(a);0<n.g.length&&Mn(n)}else"stop"!=i[0]&&"close"!=i[0]||Xn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Xn(n,7):Cn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ne(4)}catch(t){}}function De(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)_(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(f(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ce(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(s=ge.prototype).setTimeout=function(t){this.P=t},s.Xa=function(t){t=t.target;var e=this.F;e&&3==jn(t)?e.f():this.Ca(t)},s.Ca=function(t){try{if(t==this.a)t:{var e=jn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!H&&!this.a.$())){this.A||4!=e||7==n||ne(8==n||0>=r?3:2),Ae(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,u=this.a;if((s=u.a?u.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,ie(12),je(this),Se(this);break t}Qt(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,xe(this,a)}this.I?(_e(this,e,o),H&&this.b&&3==e&&(Xt(this.J,this.R,"tick",this.Wa),this.R.start())):(Qt(this.c,this.f,o,null),xe(this,o)),4==e&&je(this),this.b&&!this.A&&(4==e?Kn(this.g,this):(this.b=!1,Oe(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ie(12)):(this.h=0,ie(13)),je(this),Se(this)}}}catch(t){}},s.Wa=function(){if(this.a){var t=jn(this.a),e=this.a.$();this.D<e.length&&(Ae(this),_e(this,t,e),this.b&&4!=t&&Oe(this))}},s.cancel=function(){this.A=!0,je(this)},s.Va=function(){this.o=null;var t=b();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(ne(3),ie(17)),je(this),this.h=2,Se(this)):Ne(this,this.T-t)},(s=ke.prototype).K=function(){Ce(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},s.L=function(){return Ce(this),this.a.concat()},s.get=function(t,e){return Pe(this.b,t)?this.b[t]:e},s.set=function(t,e){Pe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},s.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Le=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,Ve(this,t.f),this.j=t.j,Ue(this,t.c),qe(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new ke(e.a),n.b=e.b),Fe(this,n),this.i=t.i}else t&&(n=String(t).match(Le))?(this.a=!!e,Ve(this,n[1]||"",!0),this.j=Be(n[2]||""),Ue(this,n[3]||"",!0),qe(this,n[4]),this.g=Be(n[5]||"",!0),Fe(this,n[6]||"",!0),this.i=Be(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function Me(t){return new Re(t)}function Ve(t,e,n){t.f=n?Be(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ue(t,e,n){t.c=n?Be(e,!0):e}function qe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Fe(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tn(this,e),nn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ge(e,Ye)),t.b=new $e(e,t.a))}function ze(t,e,n){t.b.set(e,n)}function He(t){return ze(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ge(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ge(e,Je,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ge(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ge(n,"/"==n.charAt(0)?We:Xe,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ge(n,Qe)),t.join("")};var Je=/[#\/\?@]/g,Xe=/[#\?:]/g,We=/[#\?]/g,Ye=/[#\?@]/g,Qe=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new ke,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function tn(t,e){Ze(t),e=rn(t,e),Pe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ce(t)))}function en(t,e){return Ze(t),e=rn(t,e),Pe(t.a.b,e)}function nn(t,e,n){tn(t,e),0<n.length&&(t.c=null,t.a.set(rn(t,e),O(n)),t.b+=n.length)}function rn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(s=$e.prototype).add=function(t,e){Ze(this),this.c=null,t=rn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},s.forEach=function(t,e){Ze(this),this.a.forEach((function(n,r){_(n,(function(n){t.call(e,n,r,this)}),this)}),this)},s.L=function(){Ze(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},s.K=function(t){Ze(this);var e=[];if("string"==typeof t)en(this,t)&&(e=T(e,this.a.get(rn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},s.set=function(t,e){return Ze(this),this.c=null,en(this,t=rn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},s.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},s.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var on=function(t,e){this.b=t,this.a=e};function sn(t){this.g=t||un,c.PerformanceNavigationTiming?t=0<(t=c.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(c.ia&&c.ia.ya&&c.ia.ya()&&c.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var un=10;function an(t){return!!t.b||!!t.a&&t.a.size>=t.f}function cn(t){return t.b?1:t.a?t.a.size:0}function hn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function fn(t,e){t.a?t.a.add(e):t.b=e}function ln(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function pn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=o(t.a.values()),s=i.next();!s.done;s=i.next()){var u=s.value;r=r.concat(u.s)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return O(t.c)}function dn(){}function vn(){this.a=new dn}function yn(t,e,n){var r=n||"";try{De(t,(function(t,n){var i=t;l(t)&&(i=xt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function gn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}sn.prototype.cancel=function(){var t,e;if(this.c=pn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},dn.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},dn.prototype.parse=function(t){return c.JSON.parse(t,void 0)};var mn=c.JSON.parse;function bn(t){At.call(this),this.headers=new ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=wn,this.D=this.F=!1}w(bn,At);var wn="",In=/^https?$/i,En=["POST","PUT"];function _n(t){return"content-type"==t.toLowerCase()}function Tn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,On(t),An(t)}function On(t){t.u||(t.u=!0,St(t,"complete"),St(t,"error"))}function Nn(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=jn(t)||2!=t.W()))if(t.l&&4==jn(t))Ht(t.za,0,t);else if(St(t,"readystatechange"),4==jn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Le)[1]||null;if(!o&&c.self&&c.self.location){var s=c.self.location.protocol;o=s.substr(0,s.length-1)}i=!In.test(o?o.toLowerCase():"")}e=i}if(e)St(t,"complete"),St(t,"success");else{t.h=6;try{var u=2<jn(t)?t.a.statusText:""}catch(n){u=""}t.f=u+" ["+t.W()+"]",On(t)}}finally{An(t)}}}function An(t,e){if(t.a){Sn(t);var n=t.a,r=t.s[0]?h:null;t.a=null,t.s=null,e||St(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Sn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(c.clearTimeout(t.m),t.m=null)}function jn(t){return t.a?t.a.readyState:0}function xn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return C(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):ze(t,e,n))}function Dn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function kn(t){this.pa=0,this.g=[],this.c=new Yt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Dn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Dn("baseRetryDelayMs",5e3,t),this.Ra=Dn("retryDelaySeedMs",1e4,t),this.Ma=Dn("forwardChannelMaxRetries",2,t),this.ma=Dn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new sn(t&&t.concurrentRequestLimit),this.ka=new vn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Cn(t){if(Ln(t),3==t.v){var e=t.R++,n=Me(t.B);ze(n,"SID",t.J),ze(n,"RID",e),ze(n,"TYPE","terminate"),Un(t,n),(e=new ge(t,t.c,e,void 0)).H=2,e.i=He(Me(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(e.i.toString(),"")),!n&&c.Image&&((new Image).src=e.i,n=!0),n||(e.a=Qn(e.g,null),e.a.ba(e.i)),e.u=b(),Oe(e)}Wn(t)}function Pn(t){t.a&&(Hn(t),t.a.cancel(),t.a=null)}function Ln(t){Pn(t),t.j&&(c.clearTimeout(t.j),t.j=null),Gn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&c.clearTimeout(t.h),t.h=null)}function Rn(t,e){t.g.push(new on(t.Oa++,e)),3==t.v&&Mn(t)}function Mn(t){an(t.b)||t.h||(t.h=!0,Mt(t.Ba,t),t.u=0)}function Vn(t,e){var n;n=e?e.f:t.R++;var r=Me(t.B);ze(r,"SID",t.J),ze(r,"RID",n),ze(r,"AID",t.P),Un(t,r),t.i&&t.l&&xn(r,t.i,t.l),n=new ge(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),fn(t.b,n),Ie(n,r,e)}function Un(t,e){t.f&&De({},(function(t,n){ze(e,n,t)}))}function qn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if(0>(c-=o))o=Math.max(0,i[a].b-100),u=!1;else try{yn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Fn(t){t.a||t.j||(t.T=1,Mt(t.Aa,t),t.o=0)}function zn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=se(g(t.Aa,t),Jn(t,t.o)),t.o++,!0)}function Hn(t){null!=t.s&&(c.clearTimeout(t.s),t.s=null)}function Bn(t){t.a=new ge(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Me(t.la);ze(e,"RID","rpc"),ze(e,"SID",t.J),ze(e,"CI",t.H?"0":"1"),ze(e,"AID",t.P),Un(t,e),ze(e,"TYPE","xmlhttp"),t.i&&t.l&&xn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=He(Me(e)),n.j=null,n.I=!0,Ee(n,t)}function Gn(t){null!=t.m&&(c.clearTimeout(t.m),t.m=null)}function Kn(t,e){var n=null;if(t.a==e){Gn(t),Hn(t),t.a=null;var r=2}else{if(!hn(t.b,e))return;n=e.s,ln(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=b()-e.u;var i=t.u;St(r=te(),new oe(r,n,e,i)),Mn(t)}else Fn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(cn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=se(g(t.Ba,t,e),Jn(t,t.u)),t.u++,0)))}(t,e)||2==r&&zn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Xn(t,5);break;case 4:Xn(t,10);break;case 3:Xn(t,6);break;default:Xn(t,2)}}function Jn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Xn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Ya,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Ve(n,"https"),He(n)),function(t,e){var n=new Yt;if(c.Image){var r=new Image;r.onload=m(gn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(gn,n,r,"TestLoadImage: error",!1,e),r.onabort=m(gn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(gn,n,r,"TestLoadImage: timeout",!1,e),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ie(2);t.v=0,t.f&&t.f.ra(e),Wn(t),Ln(t)}function Wn(t){t.v=0,t.I=-1,t.f&&(0==pn(t.b).length&&0==t.g.length||(t.b.c.length=0,O(t.g),t.g.length=0),t.f.qa())}function Yn(t,e,n){var r=function(t){return t instanceof Re?Me(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Ue(r,e+"."+r.c),qe(r,r.h);else{var i=c.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&Ve(i,t),e&&Ue(i,e),n&&qe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&C(t.V,(function(t,e){ze(r,e,t)})),e=t.A,n=t.na,e&&n&&ze(r,e,n),ze(r,"VER",t.ha),Un(t,r),r}function Qn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new bn(t.Na)).F=t.C,e}function $n(){}function Zn(){if(F&&!(10<=Number(tt)))throw Error("Environmental error: no available transport.")}function tr(t,e){At.call(this),this.a=new kn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new rr(this)}function er(t){de.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ve.call(this),this.status=1}function rr(t){this.a=t}(s=bn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?he(this.H):he(le),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Tn(this,t)}t=n||"";var i=new ke(this.headers);r&&De(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=_n,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=c.FormData&&t instanceof c.FormData,!(0<=E(En,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sn(this),0<this.o&&((this.D=function(t){return F&&$(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=Ht(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Tn(this,t)}},s.xa=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,St(this,"timeout"),this.abort(8))},s.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,St(this,"complete"),St(this,"abort"),An(this))},s.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),An(this,!0)),bn.X.G.call(this)},s.za=function(){this.j||(this.A||this.l||this.g?Nn(this):this.Ua())},s.Ua=function(){Nn(this)},s.W=function(){try{return 2<jn(this)?this.a.status:-1}catch(t){return-1}},s.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},s.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mn(e)}},s.ua=function(){return this.h},s.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(s=kn.prototype).ha=8,s.v=1,s.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ge(this,this.c,t,void 0),r=this.l;if(this.O&&(r?R(r=P(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),ze(i=Me(this.B),"RID",t),ze(i,"CVER",22),this.A&&ze(i,"X-HTTP-Session-Id",this.A),Un(this,i),this.i&&r&&xn(i,this.i,r),fn(this.b,n),this.Ia&&ze(i,"TYPE","init"),this.da?(ze(i,"$req",e),ze(i,"SID","null"),n.U=!0,Ie(n,i,null)):Ie(n,i,e),this.v=2}}else 3==this.v&&(t?Vn(this,t):0==this.g.length||an(this.b)||Vn(this))},s.Aa=function(){if(this.j=null,Bn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=se(g(this.Ta,this),t)}},s.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ie(10),Pn(this),Bn(this))},s.Sa=function(){null!=this.m&&(this.m=null,Pn(this),zn(this),ie(19))},s.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ie(2)):(this.c.info("Failed to ping google.com"),ie(1))},(s=$n.prototype).ta=function(){},s.sa=function(){},s.ra=function(){},s.qa=function(){},s.Ja=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},w(tr,At),tr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ie(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Yn(t,null,t.fa),Mn(t)},tr.prototype.close=function(){Cn(this.a)},tr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Rn(this.a,e)}else this.l?((e={}).__data__=xt(t),Rn(this.a,e)):Rn(this.a,t)},tr.prototype.G=function(){this.a.f=null,delete this.f,Cn(this.a),delete this.a,tr.X.G.call(this)},w(er,de),w(nr,ve),w(rr,$n),rr.prototype.ta=function(){St(this.a,"a")},rr.prototype.sa=function(t){St(this.a,new er(t))},rr.prototype.ra=function(t){St(this.a,new nr(t))},rr.prototype.qa=function(){St(this.a,"b")},Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.h,tr.prototype.open=tr.prototype.g,tr.prototype.close=tr.prototype.close,ue.NO_ERROR=0,ue.TIMEOUT=8,ue.HTTP_ERROR=6,ae.COMPLETE="complete",fe.EventType=pe,pe.OPEN="a",pe.CLOSE="b",pe.ERROR="c",pe.MESSAGE="d",At.prototype.listen=At.prototype.va,bn.prototype.listenOnce=bn.prototype.wa,bn.prototype.getLastError=bn.prototype.Qa,bn.prototype.getLastErrorCode=bn.prototype.ua,bn.prototype.getStatus=bn.prototype.W,bn.prototype.getResponseJson=bn.prototype.Pa,bn.prototype.getResponseText=bn.prototype.$,bn.prototype.send=bn.prototype.ba;var ir=ue,or=ae,sr=$t,ur=10,ar=11,cr=fe,hr=bn;function fr(){throw new Error("setTimeout has not been defined")}function lr(){throw new Error("clearTimeout has not been defined")}var pr,dr=fr,vr=lr;function yr(t){if(dr===setTimeout)return setTimeout(t,0);if((dr===fr||!dr)&&setTimeout)return dr=setTimeout,setTimeout(t,0);try{return dr(t,0)}catch(e){try{return dr.call(null,t,0)}catch(e){return dr.call(this,t,0)}}}"function"==typeof(pr="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).setTimeout&&(dr=setTimeout),"function"==typeof pr.clearTimeout&&(vr=clearTimeout);var gr,mr=[],br=!1,wr=-1;function Ir(){br&&gr&&(br=!1,gr.length?mr=gr.concat(mr):wr=-1,mr.length&&Er())}function Er(){if(!br){var t=yr(Ir);br=!0;for(var e=mr.length;e;){for(gr=mr,mr=[];++wr<e;)gr&&gr[wr].run();wr=-1,e=mr.length}gr=null,br=!1,function(t){if(vr===clearTimeout)return clearTimeout(t);if((vr===lr||!vr)&&clearTimeout)return vr=clearTimeout,clearTimeout(t);try{vr(t)}catch(e){try{return vr.call(null,t)}catch(e){return vr.call(this,t)}}}(t)}}function _r(t,e){this.fun=t,this.array=e}_r.prototype.run=function(){this.fun.apply(null,this.array)};function Tr(){}var Or=Tr,Nr=Tr,Ar=Tr,Sr=Tr,jr=Tr,xr=Tr,Dr=Tr;var kr=pr.performance||{},Cr=kr.now||kr.mozNow||kr.msNow||kr.oNow||kr.webkitNow||function(){return(new Date).getTime()};var Pr=new Date;var Lr={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];mr.push(new _r(t,e)),1!==mr.length||br||yr(Er)},title:"browser",browser:!0,env:{NODE_ENV:"production"},argv:[],version:"",versions:{},on:Or,addListener:Nr,once:Ar,off:Sr,removeListener:jr,removeAllListeners:xr,emit:Dr,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Cr.call(kr),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Pr)/1e3}},Rr=new r.d("@firebase/firestore");function Mr(){return Rr.logLevel}function Vr(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(Rr.logLevel<=r.p.DEBUG){var o=n.map(Fr);Rr.debug.apply(Rr,Object(e.h)(["Firestore (8.2.1): "+t],o))}}function Ur(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(Rr.logLevel<=r.p.ERROR){var o=n.map(Fr);Rr.error.apply(Rr,Object(e.h)(["Firestore (8.2.1): "+t],o))}}function qr(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(Rr.logLevel<=r.p.WARN){var o=n.map(Fr);Rr.warn.apply(Rr,Object(e.h)(["Firestore (8.2.1): "+t],o))}}function Fr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function zr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.1) INTERNAL ASSERTION FAILED: "+t;throw Ur(e),new Error(e)}function Hr(t,e){t||zr()}function Br(t,e){return t}function Gr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Kr=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Gr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Jr(t,e){return t<e?-1:t>e?1:0}function Xr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Wr(t){return t+"\0"}var Yr=function(){function t(t){this.i=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.i,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},t.prototype.o=function(){return 2*this.i.length},t.prototype.u=function(t){return Jr(this.i,t.i)},t.prototype.isEqual=function(t){return this.i===t.i},t}();Yr.h=new Yr("");var Qr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$r=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(e.f)(n,t),n}(Error),Zr=function(){function t(t){this.l=t}return t.fromBase64String=function(e){try{return new t(Yr.fromBase64String(e))}catch(e){throw new $r(Qr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Yr.fromUint8Array(e))},t.prototype.toBase64=function(){return this.l.toBase64()},t.prototype.toUint8Array=function(){return this.l.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.l.isEqual(t.l)},t}(),ti=function(t){this._=t};function ei(){if("undefined"==typeof Uint8Array)throw new $r(Qr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ni(){if("undefined"==typeof atob)throw new $r(Qr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ri=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.fromBase64String=function(t){return ni(),new n(Zr.fromBase64String(t))},n.fromUint8Array=function(t){return ei(),new n(Zr.fromUint8Array(t))},n.prototype.toBase64=function(){return ni(),this._.toBase64()},n.prototype.toUint8Array=function(){return ei(),this._.toUint8Array()},n.prototype.isEqual=function(t){return this._.isEqual(t._)},n.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},n}(ti),ii=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},oi=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),si=function(){function t(t){this.uid=t}return t.prototype.A=function(){return null!=this.uid},t.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();si.UNAUTHENTICATED=new si(null),si.P=new si("google-credentials-uid"),si.g=new si("first-party-uid");var ui=function(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t},ai=function(){function t(){this.p=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.v=function(){},t.prototype.S=function(t){this.p=t,t(si.UNAUTHENTICATED)},t.prototype.D=function(){this.p=null},t}(),ci=function(){function t(t){var e=this;this.C=null,this.currentUser=si.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then((function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.F,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.F!==e?(Vr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Hr("string"==typeof n.accessToken),new ui(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.v=function(){this.forceRefresh=!0},t.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},t.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},t.prototype.O=function(){var t=this.auth&&this.auth.getUid();return Hr(null===t||"string"==typeof t),new si(t)},t}(),hi=function(){function t(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=si.g}return Object.defineProperty(t.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),fi=function(){function t(t,e){this.k=t,this.M=e}return t.prototype.getToken=function(){return Promise.resolve(new hi(this.k,this.M))},t.prototype.S=function(t){t(si.g)},t.prototype.D=function(){},t.prototype.v=function(){},t}(),li=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.L=function(t){return n.$(t)},this.B=function(t){return e.q(t)})}return t.prototype.$=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},t}();li.U=-1;var pi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new $r(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new $r(Qr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new $r(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new $r(Qr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.K=function(t){return this.seconds===t.seconds?Jr(this.nanoseconds,t.nanoseconds):Jr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),di=function(){function t(t){this.timestamp=t}return t.W=function(e){return new t(e)},t.min=function(){return new t(new pi(0,0))},t.prototype.u=function(t){return this.timestamp.K(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.G=function(){return this.timestamp},t}(),vi=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&zr(),void 0===n?n=t.length-e:n>t.length-e&&zr(),this.segments=t,this.offset=e,this.H=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.J(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.Y(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},t.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},t.prototype.tt=function(){return this.segments[this.offset]},t.prototype.et=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.nt=function(){return 0===this.length},t.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},t.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),yi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.Y=function(t,e,r){return new n(t,e,r)},n.prototype.ot=function(){return this.rt().join("/")},n.prototype.toString=function(){return this.ot()},n.ct=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new $r(Qr.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new n(r)},n.at=function(){return new n([])},n}(vi),gi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.Y=function(t,e,r){return new n(t,e,r)},n.ut=function(t){return gi.test(t)},n.prototype.ot=function(){return this.rt().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.ut(t)||(t="`"+t+"`"),t})).join(".")},n.prototype.toString=function(){return this.ot()},n.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},n.lt=function(){return new n(["__name__"])},n._t=function(t){for(var e=[],r="",i=0,o=function(){if(0===r.length)throw new $r(Qr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(r),r=""},s=!1;i<t.length;){var u=t[i];if("\\"===u){if(i+1===t.length)throw new $r(Qr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[i+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new $r(Qr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=a,i+=2}else"`"===u?(s=!s,i++):"."!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new $r(Qr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)},n.at=function(){return new n([])},n}(vi),bi=function(){function t(t){this.path=t}return t.ft=function(e){return new t(yi.ct(e))},t.dt=function(e){return new t(yi.ct(e).X(5))},t.prototype.wt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===yi.J(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.J=function(t,e){return yi.J(t.path,e.path)},t.Et=function(t){return t.length%2==0},t.Tt=function(e){return new t(new yi(e.slice()))},t}();function wi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ei(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var _i=function(){function t(t){this.fields=t,t.sort(mi.J)}return t.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},t.prototype.isEqual=function(t){return Xr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ti=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(t){if(Hr(!!t),"string"==typeof t){var e=0,n=Ti.exec(t);if(Hr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ni(t.seconds),nanos:Ni(t.nanos)}}function Ni(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ai(t){return"string"==typeof t?Yr.fromBase64String(t):Yr.fromUint8Array(t)}function Si(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ji(t){var e=t.mapValue.fields.__previous_value__;return Si(e)?ji(e):e}function xi(t){var e=Oi(t.mapValue.fields.__local_write_time__.timestampValue);return new pi(e.seconds,e.nanos)}function Di(t){return null==t}function ki(t){return 0===t&&1/t==-1/0}function Ci(t){return"number"==typeof t&&Number.isInteger(t)&&!ki(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Si(t)?4:10:zr()}function Li(t,e){var n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xi(t).isEqual(xi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Oi(t.timestampValue),r=Oi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ai(t.bytesValue).isEqual(Ai(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ni(t.geoPointValue.latitude)===Ni(e.geoPointValue.latitude)&&Ni(t.geoPointValue.longitude)===Ni(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ni(t.integerValue)===Ni(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ni(t.doubleValue),r=Ni(e.doubleValue);return n===r?ki(n)===ki(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Xr(t.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(wi(n)!==wi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Li(n[i],r[i])))return!1;return!0}(t,e);default:return zr()}}function Ri(t,e){return void 0!==(t.values||[]).find((function(t){return Li(t,e)}))}function Mi(t,e){var n=Pi(t),r=Pi(e);if(n!==r)return Jr(n,r);switch(n){case 0:return 0;case 1:return Jr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ni(t.integerValue||t.doubleValue),r=Ni(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Vi(t.timestampValue,e.timestampValue);case 4:return Vi(xi(t),xi(e));case 5:return Jr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ai(t),r=Ai(e);return n.u(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jr(n[i],r[i]);if(0!==o)return o}return Jr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Jr(Ni(t.latitude),Ni(e.latitude));return 0!==n?n:Jr(Ni(t.longitude),Ni(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Mi(n[i],r[i]);if(o)return o}return Jr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=Jr(r[s],o[s]);if(0!==u)return u;var a=Mi(n[r[s]],i[o[s]]);if(0!==a)return a}return Jr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zr()}}function Vi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jr(t,e);var n=Oi(t),r=Oi(e),i=Jr(n.seconds,r.seconds);return 0!==i?i:Jr(n.nanos,r.nanos)}function Ui(t){return qi(t)}function qi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Oi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ai(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,bi.dt(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qi(t.fields[o])}return e+"}"}(t.mapValue):zr();var e,n}function Fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function zi(t){return!!t&&"integerValue"in t}function Hi(t){return!!t&&"arrayValue"in t}function Bi(t){return!!t&&"nullValue"in t}function Gi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ki(t){return!!t&&"mapValue"in t}var Ji=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ki(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},t.prototype.isEqual=function(t){return Li(this.proto,t.proto)},t}(),Xi=function(){function t(t){void 0===t&&(t=Ji.empty()),this.At=t,this.Rt=new Map}return t.prototype.set=function(t,e){return this.Pt(t,e),this},t.prototype.delete=function(t){return this.Pt(t,null),this},t.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Pi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.et(),e)},t.prototype.yt=function(){var t=this.gt(mi.at(),this.Rt);return null!=t?new Ji(t):this.At},t.prototype.gt=function(t,e){var n=this,r=!1,i=this.At.field(t),o=Ki(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.gt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function Wi(t){var e=[];return Ii(t.fields||{},(function(t,n){var r=new mi([t]);if(Ki(n)){var i=Wi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var u=s[o];e.push(r.child(u))}}else e.push(r)})),new _i(e)}var Yi=function(t,e){this.key=t,this.version=e},Qi=function(t){function n(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Vt=r,o.bt=!!i.bt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(e.f)(n,t),n.prototype.field=function(t){return this.Vt.field(t)},n.prototype.data=function(){return this.Vt},n.prototype.vt=function(){return this.Vt.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},n.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(Yi),$i=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(e.f)(n,t),n.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Yi),Zi=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(n.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Yi),to=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function eo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new to(t,e,n,r,i,o,s)}function no(t){var e=Br(t);if(null===e.St){var n=e.path.ot();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.ot()+t.op.toString()+Ui(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.ot()+t.dir}(t)})).join(","),Di(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=yo(e.startAt)),e.endAt&&(n+="|ub:",n+=yo(e.endAt)),e.St=n}return e.St}function ro(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!mo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Li(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wo(t.startAt,e.startAt)&&wo(t.endAt,e.endAt)}function io(t){return bi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var oo=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(e.f)(n,t),n.create=function(t,e,r){return t.ht()?"in"===e||"not-in"===e?this.Dt(t,e,r):new so(t,e,r):"array-contains"===e?new ho(t,r):"in"===e?new fo(t,r):"not-in"===e?new lo(t,r):"array-contains-any"===e?new po(t,r):new n(t,e,r)},n.Dt=function(t,e,n){return"in"===e?new uo(t,n):new ao(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Ct(Mi(e,this.value)):null!==e&&Pi(this.value)===Pi(e)&&this.Ct(Mi(e,this.value))},n.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return zr()}},n.prototype.xt=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},n}((function(){})),so=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=bi.dt(r.referenceValue),i}return Object(e.f)(n,t),n.prototype.matches=function(t){var e=bi.J(t.key,this.key);return this.Ct(e)},n}(oo),uo=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=co("in",n),r}return Object(e.f)(n,t),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(oo),ao=function(t){function n(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=co("not-in",n),r}return Object(e.f)(n,t),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(oo);function co(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return bi.dt(t.referenceValue)}))}var ho=function(t){function n(e,n){return t.call(this,e,"array-contains",n)||this}return Object(e.f)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return Hi(e)&&Ri(e.arrayValue,this.value)},n}(oo),fo=function(t){function n(e,n){return t.call(this,e,"in",n)||this}return Object(e.f)(n,t),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ri(this.value.arrayValue,e)},n}(oo),lo=function(t){function n(e,n){return t.call(this,e,"not-in",n)||this}return Object(e.f)(n,t),n.prototype.matches=function(t){if(Ri(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Ri(this.value.arrayValue,e)},n}(oo),po=function(t){function n(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(e.f)(n,t),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Hi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ri(e.value.arrayValue,t)}))},n}(oo),vo=function(t,e){this.position=t,this.before=e};function yo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ui(t)})).join(",")}var go=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function mo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function bo(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ht()?bi.J(bi.dt(s.referenceValue),n.key):Mi(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function wo(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Li(t.position[n],e.position[n]))return!1;return!0}var Io=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function Eo(t,e,n,r,i,o,s,u){return new Io(t,e,n,r,i,o,s,u)}function _o(t){return new Io(t)}function To(t){return!Di(t.limit)&&"F"===t.limitType}function Oo(t){return!Di(t.limit)&&"L"===t.limitType}function No(t){return t.Nt.length>0?t.Nt[0].field:null}function Ao(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function So(t){return null!==t.collectionGroup}function jo(t){var e=Br(t);if(null===e.Ft){e.Ft=[];var n=Ao(e),r=No(e);if(null!==n&&null===r)n.ht()||e.Ft.push(new go(n)),e.Ft.push(new go(mi.lt(),"asc"));else{for(var i=!1,o=0,s=e.Nt;o<s.length;o++){var u=s[o];e.Ft.push(u),u.field.ht()&&(i=!0)}if(!i){var a=e.Nt.length>0?e.Nt[e.Nt.length-1].dir:"asc";e.Ft.push(new go(mi.lt(),a))}}}return e.Ft}function xo(t){var e=Br(t);if(!e.Ot)if("F"===e.limitType)e.Ot=eo(e.path,e.collectionGroup,jo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=jo(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new go(o.field,s))}var u=e.endAt?new vo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new vo(e.startAt.position,!e.startAt.before):null;e.Ot=eo(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.Ot}function Do(t,e,n){return new Io(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ko(t,e){return ro(xo(t),xo(e))&&t.limitType===e.limitType}function Co(t){return no(xo(t))+"|lt:"+t.limitType}function Po(t){return"Query(target="+function(t){var e=t.path.ot();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.ot()+" "+e.op+" "+Ui(e.value);var e})).join(", ")+"]"),Di(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.ot()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+yo(t.startAt)),t.endAt&&(e+=", endAt: "+yo(t.endAt)),"Target("+e+")"}(xo(t))+"; limitType="+t.limitType+")"}function Lo(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.wt(t.collectionGroup)&&t.path.st(n):bi.Et(t.path)?t.path.isEqual(n):t.path.it(n)}(t,e)&&function(t,e){for(var n=0,r=t.Nt;n<r.length;n++){var i=r[n];if(!i.field.ht()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!bo(t.startAt,jo(t),e)||t.endAt&&bo(t.endAt,jo(t),e))}(t,e)}function Ro(t){return function(e,n){for(var r=!1,i=0,o=jo(t);i<o.length;i++){var s=o[i],u=Mo(s,e,n);if(0!==u)return u;r=r||s.field.ht()}return 0}}function Mo(t,e,n){var r=t.field.ht()?bi.J(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Mi(r,i):zr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return zr()}}var Vo=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=di.min()),void 0===o&&(o=di.min()),void 0===s&&(s=Yr.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.kt,e,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.$t=function(e,n){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Bt=function(e){return new t(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,e,this.resumeToken)},t}();function Uo(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ki(e)?"-0":e}}function qo(t){return{integerValue:""+t}}function Fo(t,e){return Ci(e)?qo(e):Uo(t,e)}var zo=function(){this.Ut=void 0};function Ho(t,e,n){return t instanceof Ko?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Jo?Xo(t,e):t instanceof Wo?Yo(t,e):function(t,e){var n=Go(t,e),r=$o(n)+$o(t.Qt);return zi(n)&&zi(t.Qt)?qo(r):Uo(t.Kt,r)}(t,e)}function Bo(t,e,n){return t instanceof Jo?Xo(t,e):t instanceof Wo?Yo(t,e):n}function Go(t,e){return t instanceof Qo?zi(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ko=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n}(zo),Jo=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.f)(n,t),n}(zo);function Xo(t,e){for(var n=Zo(e),r=function(t){n.some((function(e){return Li(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wo=function(t){function n(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(e.f)(n,t),n}(zo);function Yo(t,e){for(var n=Zo(e),r=function(t){n=n.filter((function(e){return!Li(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Qo=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Kt=e,r.Qt=n,r}return Object(e.f)(n,t),n}(zo);function $o(t){return Ni(t.integerValue||t.doubleValue)}function Zo(t){return Hi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ts=function(t,e){this.field=t,this.transform=e},es=function(t,e){this.version=t,this.transformResults=e},ns=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Wt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function rs(t,e){return void 0!==t.updateTime?e instanceof Qi&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Qi}var is=function(){};function os(t,e,n){return t instanceof hs?function(t,e,n){var r=t.value;if(n.transformResults){var i=ps(t.fieldTransforms,e,n.transformResults);r=vs(t.fieldTransforms,r,i)}return new Qi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof fs?function(t,e,n){if(!rs(t.Gt,e))return new Zi(t.key,n.version);var r=ls(t,e,n.transformResults?ps(t.fieldTransforms,e,n.transformResults):[]);return new Qi(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new $i(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function ss(t,e,n,r){return t instanceof hs?function(t,e,n,r){if(!rs(t.Gt,e))return e;var i=t.value;if(t.fieldTransforms){var o=ds(t.fieldTransforms,n,e,r);i=vs(t.fieldTransforms,i,o)}var s=cs(e);return new Qi(t.key,s,i,{bt:!0})}(t,e,r,n):t instanceof fs?function(t,e,n,r){if(!rs(t.Gt,e))return e;var i=cs(e),o=ls(t,e,ds(t.fieldTransforms,n,e,r));return new Qi(t.key,i,o,{bt:!0})}(t,e,r,n):function(t,e){return rs(t.Gt,e)?new $i(t.key,di.min()):e}(t,e)}function us(t,e){return void 0!==t.fieldTransforms?function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Qi?e.field(o.field):void 0,u=Go(o.transform,s||null);null!=u&&(n=null==n?(new Xi).set(o.field,u):n.set(o.field,u))}return n?n.yt():null}(t.fieldTransforms,e):null}function as(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Xr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Jo&&e instanceof Jo||t instanceof Wo&&e instanceof Wo?Xr(t.elements,e.elements,Li):t instanceof Qo&&e instanceof Qo?Li(t.Qt,e.Qt):t instanceof Ko&&e instanceof Ko}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt))}function cs(t){return t instanceof Qi?t.version:di.min()}var hs=function(t){function n(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.Gt=r,o.fieldTransforms=i,o.type=0,o}return Object(e.f)(n,t),n}(is),fs=function(t){function n(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.zt=r,s.Gt=i,s.fieldTransforms=o,s.type=1,s}return Object(e.f)(n,t),n}(is);function ls(t,e,n){var r;return r=function(t,e){var n=new Xi(e);return t.zt.fields.forEach((function(e){if(!e.nt()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.yt()}(t,r=e instanceof Qi?e.data():Ji.empty()),vs(t.fieldTransforms,r,n)}function ps(t,e,n){var r=[];Hr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof Qi&&(u=e.field(o.field)),r.push(Bo(s,u,n[i]))}return r}function ds(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof Qi&&(c=n.field(u.field)),null===c&&r instanceof Qi&&(c=r.field(u.field)),i.push(Ho(a,c,e))}return i}function vs(t,e,n){for(var r=new Xi(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}var ys,gs,ms=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=2,r.fieldTransforms=[],r}return Object(e.f)(n,t),n}(is),bs=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Gt=n,r.type=3,r.fieldTransforms=[],r}return Object(e.f)(n,t),n}(is),ws=function(t){this.count=t};function Is(t){switch(t){case Qr.OK:return zr();case Qr.CANCELLED:case Qr.UNKNOWN:case Qr.DEADLINE_EXCEEDED:case Qr.RESOURCE_EXHAUSTED:case Qr.INTERNAL:case Qr.UNAVAILABLE:case Qr.UNAUTHENTICATED:return!1;case Qr.INVALID_ARGUMENT:case Qr.NOT_FOUND:case Qr.ALREADY_EXISTS:case Qr.PERMISSION_DENIED:case Qr.FAILED_PRECONDITION:case Qr.ABORTED:case Qr.OUT_OF_RANGE:case Qr.UNIMPLEMENTED:case Qr.DATA_LOSS:return!0;default:return zr()}}function Es(t){if(void 0===t)return Ur("GRPC error has no .code"),Qr.UNKNOWN;switch(t){case ys.OK:return Qr.OK;case ys.CANCELLED:return Qr.CANCELLED;case ys.UNKNOWN:return Qr.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Qr.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Qr.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Qr.INTERNAL;case ys.UNAVAILABLE:return Qr.UNAVAILABLE;case ys.UNAUTHENTICATED:return Qr.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Qr.INVALID_ARGUMENT;case ys.NOT_FOUND:return Qr.NOT_FOUND;case ys.ALREADY_EXISTS:return Qr.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Qr.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Qr.FAILED_PRECONDITION;case ys.ABORTED:return Qr.ABORTED;case ys.OUT_OF_RANGE:return Qr.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Qr.UNIMPLEMENTED;case ys.DATA_LOSS:return Qr.DATA_LOSS;default:return zr()}}(gs=ys||(ys={}))[gs.OK=0]="OK",gs[gs.CANCELLED=1]="CANCELLED",gs[gs.UNKNOWN=2]="UNKNOWN",gs[gs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gs[gs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gs[gs.NOT_FOUND=5]="NOT_FOUND",gs[gs.ALREADY_EXISTS=6]="ALREADY_EXISTS",gs[gs.PERMISSION_DENIED=7]="PERMISSION_DENIED",gs[gs.UNAUTHENTICATED=16]="UNAUTHENTICATED",gs[gs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gs[gs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gs[gs.ABORTED=10]="ABORTED",gs[gs.OUT_OF_RANGE=11]="OUT_OF_RANGE",gs[gs.UNIMPLEMENTED=12]="UNIMPLEMENTED",gs[gs.INTERNAL=13]="INTERNAL",gs[gs.UNAVAILABLE=14]="UNAVAILABLE",gs[gs.DATA_LOSS=15]="DATA_LOSS";var _s=function(){function t(t,e){this.J=t,this.root=e||Os.EMPTY}return t.prototype.Ht=function(e,n){return new t(this.J,this.root.Ht(e,n,this.J).copy(null,null,Os.Jt,null,null))},t.prototype.remove=function(e){return new t(this.J,this.root.remove(e,this.J).copy(null,null,Os.Jt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.nt=function(){return this.root.nt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(){return this.root.Xt()},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.forEach=function(t){this.Zt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Zt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.te=function(t){return this.root.te(t)},t.prototype.ee=function(){return new Ts(this.root,null,this.J,!1)},t.prototype.ne=function(t){return new Ts(this.root,t,this.J,!1)},t.prototype.se=function(){return new Ts(this.root,null,this.J,!0)},t.prototype.ie=function(t){return new Ts(this.root,t,this.J,!0)},t}(),Ts=function(){function t(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}return t.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},t.prototype.ae=function(){return this.oe.length>0},t.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},t}(),Os=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.nt=function(){return!1},t.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},t.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},t.prototype.min=function(){return this.left.nt()?this:this.left.min()},t.prototype.Yt=function(){return this.min().key},t.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},t.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},t.prototype.le=function(){if(this.left.nt())return t.EMPTY;var e=this;return e.left._e()||e.left.left._e()||(e=e.fe()),(e=e.copy(null,null,null,e.left.le(),null)).he()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.nt()||i.left._e()||i.left.left._e()||(i=i.fe()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left._e()&&(i=i.de()),i.right.nt()||i.right._e()||i.right.left._e()||(i=i.we()),0===n(e,i.key)){if(i.right.nt())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.le())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.he()},t.prototype._e=function(){return this.color},t.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},t.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},t.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},t.prototype.Ee=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.de=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},t.prototype.me=function(){if(this._e()&&this.left._e())throw zr();if(this.right._e())throw zr();var t=this.left.me();if(t!==this.right.me())throw zr();return t+(this._e()?0:1)},t}();Os.EMPTY=null,Os.RED=!0,Os.Jt=!1,Os.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw zr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw zr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Ht=function(t,e,n){return new Os(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.nt=function(){return!0},t.prototype.Zt=function(t){return!1},t.prototype.te=function(t){return!1},t.prototype.Yt=function(){return null},t.prototype.Xt=function(){return null},t.prototype._e=function(){return!1},t.prototype.Ie=function(){return!0},t.prototype.me=function(){return 0},t}());var Ns=function(){function t(t){this.J=t,this.data=new _s(this.J)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Yt()},t.prototype.last=function(){return this.data.Xt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Zt((function(e,n){return t(e),!1}))},t.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(this.J(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Re=function(t,e){var n;for(n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},t.prototype.Pe=function(t){var e=this.data.ne(t);return e.ae()?e.ce().key:null},t.prototype.ee=function(){return new As(this.data.ee())},t.prototype.ne=function(t){return new As(this.data.ne(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.nt=function(){return this.data.nt()},t.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.ee(),r=e.data.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(0!==this.J(i,o))return!1}return!0},t.prototype.rt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.J);return n.data=e,n},t}(),As=function(){function t(t){this.ge=t}return t.prototype.ce=function(){return this.ge.ce().key},t.prototype.ae=function(){return this.ge.ae()},t}(),Ss=new _s(bi.J);function js(){return Ss}function xs(){return js()}var Ds=new _s(bi.J);function ks(){return Ds}var Cs=new _s(bi.J);var Ps=new Ns(bi.J);function Ls(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ps,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Rs=new Ns(Jr);function Ms(){return Rs}var Vs=function(){function t(t){this.J=t?function(e,n){return t(e,n)||bi.J(e.key,n.key)}:function(t,e){return bi.J(t.key,e.key)},this.Ve=ks(),this.pe=new _s(this.J)}return t.be=function(e){return new t(e.J)},t.prototype.has=function(t){return null!=this.Ve.get(t)},t.prototype.get=function(t){return this.Ve.get(t)},t.prototype.first=function(){return this.pe.Yt()},t.prototype.last=function(){return this.pe.Xt()},t.prototype.nt=function(){return this.pe.nt()},t.prototype.indexOf=function(t){var e=this.Ve.get(t);return e?this.pe.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.pe.Zt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pe.ee(),r=e.pe.ee();n.ae();){var i=n.ce().key,o=r.ce().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.J=this.J,r.Ve=e,r.pe=n,r},t}(),Us=function(){function t(){this.ve=new _s(bi.J)}return t.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);n?0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):zr():this.ve=this.ve.Ht(e,t)},t.prototype.Se=function(){var t=[];return this.ve.Zt((function(e,n){t.push(n)})),t},t}(),qs=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=u}return t.Fe=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Vs.be(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&ko(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Fs=function(){function t(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.Le=i}return t.$e=function(e,n){var r=new Map;return r.set(e,zs.Be(e,n)),new t(di.min(),r,Ms(),js(),Ls())},t}(),zs=function(){function t(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}return t.Be=function(e,n){return new t(Yr.h,n,Ls(),Ls(),Ls())},t}(),Hs=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Bs=function(t,e){this.targetId=t,this.Ge=e},Gs=function(t,e,n,r){void 0===n&&(n=Yr.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ks=function(){function t(){this.ze=0,this.He=Ws(),this.Je=Yr.h,this.Ye=!1,this.Xe=!0}return Object.defineProperty(t.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),t.prototype.en=function(t){t.o()>0&&(this.Xe=!0,this.Je=t)},t.prototype.nn=function(){var t=Ls(),e=Ls(),n=Ls();return this.He.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:zr()}})),new zs(this.Je,this.Ye,t,e,n)},t.prototype.sn=function(){this.Xe=!1,this.He=Ws()},t.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},t.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},t.prototype.cn=function(){this.ze+=1},t.prototype.an=function(){this.ze-=1},t.prototype.un=function(){this.Xe=!0,this.Ye=!0},t}(),Js=function(){function t(t){this.hn=t,this.ln=new Map,this._n=js(),this.fn=Xs(),this.dn=new Ns(Jr)}return t.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof Qi?this.En(r,t.je):t.je instanceof $i&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},t.prototype.In=function(t){var e=this;this.mn(t,(function(n){var r=e.An(n);switch(t.state){case 0:e.Rn(n)&&r.en(t.resumeToken);break;case 1:r.an(),r.Ze||r.sn(),r.en(t.resumeToken);break;case 2:r.an(),r.Ze||e.removeTarget(n);break;case 3:e.Rn(n)&&(r.un(),r.en(t.resumeToken));break;case 4:e.Rn(n)&&(e.Pn(n),r.en(t.resumeToken));break;default:zr()}}))},t.prototype.mn=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.ln.forEach((function(t,r){n.Rn(r)&&e(r)}))},t.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,r=this.gn(e);if(r){var i=r.target;if(io(i))if(0===n){var o=new bi(i.path);this.Tn(e,o,new $i(o,di.min()))}else Hr(1===n);else this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e))}},t.prototype.pn=function(t){var e=this,n=new Map;this.ln.forEach((function(r,i){var o=e.gn(i);if(o){if(r.qe&&io(o.target)){var s=new bi(o.target.path);null!==e._n.get(s)||e.bn(i,s)||e.Tn(i,s,new $i(s,t))}r.tn&&(n.set(i,r.nn()),r.sn())}}));var r=Ls();this.fn.forEach((function(t,n){var i=!0;n.Re((function(t){var n=e.gn(t);return!n||2===n.kt||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Fs(t,n,this.dn,this._n,r);return this._n=js(),this.fn=Xs(),this.dn=new Ns(Jr),i},t.prototype.En=function(t,e){if(this.Rn(t)){var n=this.bn(t,e.key)?2:0;this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t))}},t.prototype.Tn=function(t,e,n){if(this.Rn(t)){var r=this.An(t);this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n))}},t.prototype.removeTarget=function(t){this.ln.delete(t)},t.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},t.prototype.cn=function(t){this.An(t).cn()},t.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Ks,this.ln.set(t,e)),e},t.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Ns(Jr),this.fn=this.fn.Ht(t,e)),e},t.prototype.Rn=function(t){var e=null!==this.gn(t);return e||Vr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},t.prototype.Pn=function(t){var e=this;this.ln.set(t,new Ks),this.hn.Sn(t).forEach((function(n){e.Tn(t,n,null)}))},t.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},t}();function Xs(){return new _s(bi.J)}function Ws(){return new _s(bi.J)}var Ys={asc:"ASCENDING",desc:"DESCENDING"},Qs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$s=function(t,e){this.T=t,this.qt=e};function Zs(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function tu(t,e){return t.qt?e.toBase64():e.toUint8Array()}function eu(t,e){return Zs(t,e.G())}function nu(t){return Hr(!!t),di.W(function(t){var e=Oi(t);return new pi(e.seconds,e.nanos)}(t))}function ru(t,e){return function(t){return new yi(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).ot()}function iu(t){var e=yi.ct(t);return Hr(Au(e)),e}function ou(t,e){return ru(t.T,e.path)}function su(t,e){var n=iu(e);if(n.get(1)!==t.T.projectId)throw new $r(Qr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.T.projectId);if(n.get(3)!==t.T.database)throw new $r(Qr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.T.database);return new bi(hu(n))}function uu(t,e){return ru(t.T,e)}function au(t){var e=iu(t);return 4===e.length?yi.at():hu(e)}function cu(t){return new yi(["projects",t.T.projectId,"databases",t.T.database]).ot()}function hu(t){return Hr(t.length>4&&"documents"===t.get(4)),t.X(5)}function fu(t,e,n){return{name:ou(t,e),fields:n.proto.mapValue.fields}}function lu(t,e){var n;if(e instanceof hs)n={update:fu(t,e.key,e.value)};else if(e instanceof ms)n={delete:ou(t,e.key)};else if(e instanceof fs)n={update:fu(t,e.key,e.data),updateMask:Nu(e.zt)};else{if(!(e instanceof bs))return zr();n={verify:ou(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ko)return{fieldPath:e.field.ot(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jo)return{fieldPath:e.field.ot(),appendMissingElements:{values:n.elements}};if(n instanceof Wo)return{fieldPath:e.field.ot(),removeAllFromArray:{values:n.elements}};if(n instanceof Qo)return{fieldPath:e.field.ot(),increment:n.Qt};throw zr()}(0,t)}))),e.Gt.jt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:eu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:zr()}(t,e.Gt)),n}function pu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ns.updateTime(nu(t.updateTime)):void 0!==t.exists?ns.exists(t.exists):ns.Wt()}(e.currentDocument):ns.Wt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Hr("REQUEST_TIME"===e.setToServerValue),n=new Ko;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Jo(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Wo(i)}else"increment"in e?n=new Qo(t,e.increment):zr();var o=mi._t(e.fieldPath);return new ts(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=su(t,e.update.name),o=new Ji({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new _i(e.map((function(t){return mi._t(t)})))}(e.updateMask);return new fs(i,o,s,n,r)}return new hs(i,o,n,r)}if(e.delete){var u=su(t,e.delete);return new ms(u,n)}if(e.verify){var a=su(t,e.verify);return new bs(a,n)}return zr()}function du(t,e){return{documents:[uu(t,e.path)]}}function vu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=uu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=uu(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Gi(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NAN"}};if(Bi(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Gi(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NAN"}};if(Bi(t.value))return{unaryFilter:{field:Eu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eu(t.field),op:Iu(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Eu(t.field),direction:wu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.qt||Di(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=mu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mu(e.endAt)),n}function yu(t){var e=au(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Hr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=gu(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new go(_u(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return Di(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=bu(n.startAt));var h=null;return n.endAt&&(h=bu(n.endAt)),Eo(e,i,u,s,a,"F",c,h)}function gu(t){return t?void 0!==t.unaryFilter?[Ou(t)]:void 0!==t.fieldFilter?[Tu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return gu(t)})).reduce((function(t,e){return t.concat(e)})):zr():[]}function mu(t){return{before:t.before,values:t.position}}function bu(t){var e=!!t.before,n=t.values||[];return new vo(n,e)}function wu(t){return Ys[t]}function Iu(t){return Qs[t]}function Eu(t){return{fieldPath:t.ot()}}function _u(t){return mi._t(t.fieldPath)}function Tu(t){return oo.create(_u(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ou(t){switch(t.unaryFilter.op){case"IS_NAN":var e=_u(t.unaryFilter.field);return oo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=_u(t.unaryFilter.field);return oo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_u(t.unaryFilter.field);return oo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_u(t.unaryFilter.field);return oo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zr()}}function Nu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.ot())})),{fieldPaths:e}}function Au(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Su=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},ju=function(){function t(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t((function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)}),(function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Fn&&zr(),this.Fn=!0,this.Nn?this.error?this.On(n,this.error):this.kn(e,this.result):new t((function(t,i){r.Cn=function(n){r.kn(e,n).next(t,i)},r.xn=function(e){r.On(n,e).next(t,i)}}))},t.prototype.Mn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Ln=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.kn=function(e,n){return e?this.Ln((function(){return e(n)})):t.resolve(n)},t.prototype.On=function(e,n){return e?this.Ln((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Bn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),xu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.qn=new Su,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){e.error?n.qn.reject(new Cu(t,e.error)):n.qn.resolve()},this.transaction.onerror=function(e){var r=Vu(e.target.error);n.qn.reject(new Cu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Cu(n,e)}},Object.defineProperty(t.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(Vr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Lu(e)},t}(),Du=function(){function t(e,n,i){this.name=e,this.version=n,this.Qn=i,12.2===t.Kn(Object(r.k)())&&Ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Vr("SimpleDb","Removing database:",t),Ru(window.indexedDB.deleteDatabase(t)).Mn()},t.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(t.jn())return!0;var e=Object(r.k)(),n=t.Kn(e),i=0<n&&n<10,o=t.Gn(e),s=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)},t.jn=function(){var t;return void 0!==Lr&&"YES"===(null===(t=Lr.env)||void 0===t?void 0:t.zn)},t.Hn=function(t,e){return t.store(e)},t.Kn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Gn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Jn=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return this.db?[3,2]:(Vr("SimpleDb","Opening database:",this.name),n=this,[4,new Promise((function(e,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){n(new Cu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var r=e.target.error;"VersionError"===r.name?n(new $r(Qr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Cu(t,r))},i.onupgradeneeded=function(t){Vr("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;r.Qn.Yn(e,i.transaction,t.oldVersion,r.version).next((function(){Vr("SimpleDb","Database upgrade to version "+r.version+" complete")}))}}))]);case 1:n.db=e.sent(),e.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return r.Xn(t)}),this.db)]}}))}))},t.prototype.Zn=function(t){this.Xn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u,a,c;return Object(e.c)(this,(function(h){switch(h.label){case 0:o="readonly"===n,s=0,u=function(){var n,u,c,h,f;return Object(e.c)(this,(function(e){switch(e.label){case 0:++s,e.label=1;case 1:return e.trys.push([1,4,,5]),[4,a.Jn(t)];case 2:return a.db=e.sent(),n=xu.open(a.db,t,o?"readonly":"readwrite",r),u=i(n).catch((function(t){return n.abort(t),ju.reject(t)})).Mn(),c={},u.catch((function(){})),[4,n.Un];case 3:return[2,(c.value=(e.sent(),u),c)];case 4:return h=e.sent(),f="FirebaseError"!==h.name&&s<3,Vr("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,u()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ku=function(){function t(t){this.ts=t,this.es=!1,this.ns=null}return Object.defineProperty(t.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.es=!0},t.prototype.rs=function(t){this.ns=t},t.prototype.delete=function(){return Ru(this.ts.delete())},t}(),Cu=function(t){function n(e,n){var r=this;return(r=t.call(this,Qr.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(e.f)(n,t),n}($r);function Pu(t){return"IndexedDbTransactionError"===t.name}var Lu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Vr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Vr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ru(n)},t.prototype.add=function(t){return Vr("SimpleDb","ADD",this.store.name,t,t),Ru(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ru(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Vr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Vr("SimpleDb","DELETE",this.store.name,t),Ru(this.store.delete(t))},t.prototype.count=function(){return Vr("SimpleDb","COUNT",this.store.name),Ru(this.store.count())},t.prototype.os=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.cs(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.us=function(t,e){Vr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.hs=!1;var r=this.cursor(n);return this.cs(r,(function(t,e,n){return n.delete()}))},t.prototype.ls=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.cs(r,e)},t.prototype._s=function(t){var e=this.cursor({});return new ju((function(n,r){e.onerror=function(t){var e=Vu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.cs=function(t,e){var n=[];return new ju((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ku(i),s=e(i.primaryKey,i.value,o);if(s instanceof ju){var u=s.catch((function(t){return o.done(),ju.reject(t)}));n.push(u)}o.Nn?r():null===o.ss?i.continue():i.continue(o.ss)}else r()}})).next((function(){return ju.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ru(t){return new ju((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Vu(t.target.error);n(e)}}))}var Mu=!1;function Vu(t){var e=Du.Kn(Object(r.k)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new $r("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Mu||(Mu=!0,setTimeout((function(){throw i}),0)),i}}return t}var Uu=function(){function t(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new Su,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch((function(t){}))}return t.Is=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.As=setTimeout((function(){return e.Rs()}),t)},t.prototype.Ps=function(){return this.Rs()},t.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new $r(Qr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Rs=function(){var t=this;this.fs.ys((function(){return null!==t.As?(t.clearTimeout(),t.op().then((function(e){return t.Ts.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},t}();function qu(t,e){if(Ur("AsyncQueue",e+": "+t),Pu(t))return new $r(Qr.UNAVAILABLE,e+": "+t);throw t}var Fu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zu=function(){function t(){this.Vs=[]}return t.prototype.ps=function(t){this.Vs.push(t)},t.prototype.bs=function(){this.Vs.forEach((function(t){return t()}))},t}();function Hu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Gu(e)),e=Bu(t.get(n),e);return Gu(e)}function Bu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Gu(t){return t+""}function Ku(t){var e=t.length;if(Hr(e>=2),2===e)return Hr(""===t.charAt(0)&&""===t.charAt(1)),yi.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&zr(),t.charAt(s+1)){case"":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:zr()}o=s+2}return new yi(r)}var Ju=function(t,e){this.seconds=t,this.nanoseconds=e},Xu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Xu.store="owner",Xu.key="owner";var Wu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Wu.store="mutationQueues",Wu.keyPath="userId";var Yu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Yu.store="mutations",Yu.keyPath="batchId",Yu.userMutationsIndex="userMutationsIndex",Yu.userMutationsKeyPath=["userId","batchId"];var Qu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Hu(e)]},t.key=function(t,e,n){return[t,Hu(e),n]},t}();Qu.store="documentMutations",Qu.PLACEHOLDER=new Qu;var $u=function(t,e){this.path=t,this.readTime=e},Zu=function(t,e){this.path=t,this.version=e},ta=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ta.store="remoteDocuments",ta.readTimeIndex="readTimeIndex",ta.readTimeIndexPath="readTime",ta.collectionReadTimeIndex="collectionReadTimeIndex",ta.collectionReadTimeIndexPath=["parentPath","readTime"];var ea=function(t){this.byteSize=t};ea.store="remoteDocumentGlobal",ea.key="remoteDocumentGlobalKey";var na=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};na.store="targets",na.keyPath="targetId",na.queryTargetsIndexName="queryTargetsIndex",na.queryTargetsKeyPath=["canonicalId","targetId"];var ra=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ra.store="targetDocuments",ra.keyPath=["targetId","path"],ra.documentTargetsIndex="documentTargetsIndex",ra.documentTargetsKeyPath=["path","targetId"];var ia=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ia.key="targetGlobalKey",ia.store="targetGlobal";var oa=function(t,e){this.collectionId=t,this.parent=e};oa.store="collectionParents",oa.keyPath=["collectionId","parent"];var sa=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};sa.store="clientMetadata",sa.keyPath="clientId";var ua=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ua.store="bundles",ua.keyPath="bundleId";var aa=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};aa.store="namedQueries",aa.keyPath="name";var ca=Object(e.h)(Object(e.h)(Object(e.h)(Object(e.h)([Wu.store,Yu.store,Qu.store,ta.store,na.store,Xu.store,ia.store,ra.store],[sa.store]),[ea.store]),[oa.store]),[ua.store,aa.store]),ha=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).vs=e,r.Ss=n,r}return Object(e.f)(n,t),n}(zu);function fa(t,e){var n=Br(t);return Du.Hn(n.vs,e)}var la=function(){function t(t,e,n,r){this.batchId=t,this.Ds=e,this.baseMutations=n,this.mutations=r}return t.prototype.Cs=function(t,e,n){for(var r=n.xs,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=os(o,e,r[i]))}return e},t.prototype.Ns=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=ss(i,e,e,this.Ds))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=ss(a,e,o,this.Ds))}return e},t.prototype.Fs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Ns(r.key,t.get(r.key));i&&(n=n.Ht(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ls())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Xr(this.mutations,t.mutations,(function(t,e){return as(t,e)}))&&Xr(this.baseMutations,t.baseMutations,(function(t,e){return as(t,e)}))},t}(),pa=function(){function t(t,e,n,r){this.batch=t,this.Os=e,this.xs=n,this.ks=r}return t.from=function(e,n,r){Hr(e.mutations.length===r.length);for(var i=Cs,o=e.mutations,s=0;s<o.length;s++)i=i.Ht(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),da=function(t){this.Ms=t};function va(t,e){if(e.document)return function(t,e,n){var r=su(t,e.name),i=nu(e.updateTime),o=new Ji({mapValue:{fields:e.fields}});return new Qi(r,i,o,{hasCommittedMutations:!!n})}(t.Ms,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=bi.Tt(e.noDocument.path),r=wa(e.noDocument.readTime);return new $i(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=bi.Tt(e.unknownDocument.path);return r=wa(e.unknownDocument.version),new Zi(i,r)}return zr()}function ya(t,e,n){var r=ga(n),i=e.key.path.Z().rt();if(e instanceof Qi){var o=function(t,e){return{name:ou(t,e.key),fields:e.vt().mapValue.fields,updateTime:Zs(t,e.version.G())}}(t.Ms,e),s=e.hasCommittedMutations;return new ta(null,null,o,s,r,i)}if(e instanceof $i){var u=e.key.path.rt(),a=ba(e.version);return s=e.hasCommittedMutations,new ta(null,new $u(u,a),null,s,r,i)}if(e instanceof Zi){var c=e.key.path.rt(),h=ba(e.version);return new ta(new Zu(c,h),null,null,!0,r,i)}return zr()}function ga(t){var e=t.G();return[e.seconds,e.nanoseconds]}function ma(t){var e=new pi(t[0],t[1]);return di.W(e)}function ba(t){var e=t.G();return new Ju(e.seconds,e.nanoseconds)}function wa(t){var e=new pi(t.seconds,t.nanoseconds);return di.W(e)}function Ia(t,e){for(var n=(e.baseMutations||[]).map((function(e){return pu(t.Ms,e)})),r=e.mutations.length-1;r>=0;--r){var i=e.mutations[r];void 0!==(null==i?void 0:i.transform)&&(e.mutations[r-1].updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r,1),--r)}var o=e.mutations.map((function(e){return pu(t.Ms,e)})),s=pi.fromMillis(e.localWriteTimeMs);return new la(e.batchId,s,n,o)}function Ea(t){var e,n,r=wa(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?wa(t.lastLimboFreeSnapshotVersion):di.min();return void 0!==t.query.documents?(Hr(1===(n=t.query).documents.length),e=xo(_o(au(n.documents[0])))):e=function(t){return xo(yu(t))}(t.query),new Vo(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Yr.fromBase64String(t.resumeToken))}function _a(t,e){var n,r=ba(e.Mt),i=ba(e.lastLimboFreeSnapshotVersion);n=io(e.target)?du(t.Ms,e.target):vu(t.Ms,e.target);var o=e.resumeToken.toBase64();return new na(e.targetId,no(e.target),r,o,e.sequenceNumber,i,n)}function Ta(t){var e=yu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Do(e,e.limit,"L"):e}var Oa=function(){function t(){}return t.prototype.Ls=function(t,e){return Na(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:wa(e.createTime),version:e.version};var e}))},t.prototype.$s=function(t,e){return Na(t).put({bundleId:(n=e).id,createTime:ba(nu(n.createTime)),version:n.version});var n},t.prototype.Bs=function(t,e){return Aa(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ta(e.bundledQuery),readTime:wa(e.readTime)};var e}))},t.prototype.qs=function(t,e){return Aa(t).put(function(t){return{name:t.name,readTime:ba(nu(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Na(t){return fa(t,ua.store)}function Aa(t){return fa(t,aa.store)}var Sa=function(){function t(){this.Us=new ja}return t.prototype.Qs=function(t,e){return this.Us.add(e),ju.resolve()},t.prototype.Ks=function(t,e){return ju.resolve(this.Us.getEntries(e))},t}(),ja=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Ns(yi.J),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.et(),n=t.Z(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ns(yi.J)).rt()},t}(),xa=function(){function t(){this.Ws=new ja}return t.prototype.Qs=function(t,e){var n=this;if(!this.Ws.has(e)){var r=e.et(),i=e.Z();t.ps((function(){n.Ws.add(e)}));var o={collectionId:r,parent:Hu(i)};return Da(t).put(o)}return ju.resolve()},t.prototype.Ks=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Wr(e),""],!1,!0);return Da(t).os(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Ku(o.parent))}return n}))},t}();function Da(t){return fa(t,oa.store)}var ka={js:!1,Gs:0,zs:0,Hs:0},Ca=function(){function t(t,e,n){this.Js=t,this.Ys=e,this.Xs=n}return t.Zs=function(e){return new t(e,t.ti,t.ei)},t}();function Pa(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){if(t.code!==Qr.FAILED_PRECONDITION||t.message!==Fu)throw t;return Vr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Ca.ti=10,Ca.ei=1e3,Ca.ni=new Ca(41943040,Ca.ti,Ca.ei),Ca.si=new Ca(-1,0,0);var La=function(){function t(t,e){this.ii=t,this.ri=e,this.oi={}}return t.prototype.get=function(t){var e=this.ii(t),n=this.oi[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];if(this.ri(s,t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ii(t),r=this.oi[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ri(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.oi[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ii(t),n=this.oi[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ri(n[r][0],t))return 1===n.length?delete this.oi[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Ii(this.oi,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],u=o[1];t(s,u)}}))},t.prototype.nt=function(){return Ei(this.oi)},t}(),Ra=function(){function t(){this.ci=new La((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.ai=!1}return t.prototype.ui=function(t){var e=this.ci.get(t);return e?e.readTime:di.min()},t.prototype.hi=function(t,e){this.li(),this.ci.set(t.key,{_i:t,readTime:e})},t.prototype.fi=function(t,e){void 0===e&&(e=null),this.li(),this.ci.set(t,{_i:null,readTime:e})},t.prototype.di=function(t,e){this.li();var n=this.ci.get(e);return void 0!==n?ju.resolve(n._i):this.wi(t,e)},t.prototype.getEntries=function(t,e){return this.Ei(t,e)},t.prototype.apply=function(t){return this.li(),this.ai=!0,this.Ti(t)},t.prototype.li=function(){},t}();function Ma(t,e,n){var r=t.store(Yu.store),i=t.store(Qu.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.ls({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){Hr(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=Qu.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return ju.$n(o).next((function(){return c}))}function Va(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zr();e=t.noDocument}return JSON.stringify(e).length}var Ua=function(){function t(t,e,n,r){this.userId=t,this.Kt=e,this.Ii=n,this.mi=r,this.Ai={}}return t.Ri=function(e,n,r,i){return Hr(""!==e.uid),new t(e.A()?e.uid:"",n,r,i)},t.prototype.Pi=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fa(t).ls({index:Yu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.yi=function(t,e,n,r){var i=this,o=za(t),s=Fa(t);return s.add({}).next((function(u){Hr("number"==typeof u);for(var a=new la(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return lu(t.Ms,e)})),i=n.mutations.map((function(e){return lu(t.Ms,e)}));return new Yu(e,n.batchId,n.Ds.toMillis(),r,i)}(i.Kt,i.userId,a),h=[],f=new Ns((function(t,e){return Jr(t.ot(),e.ot())})),l=0,p=r;l<p.length;l++){var d=p[l],v=Qu.key(i.userId,d.key.path,u);f=f.add(d.key.path.Z()),h.push(s.put(c)),h.push(o.put(v,Qu.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Ii.Qs(t,e))})),t.ps((function(){i.Ai[u]=a.keys()})),ju.$n(h).next((function(){return a}))}))},t.prototype.gi=function(t,e){var n=this;return Fa(t).get(e).next((function(t){return t?(Hr(t.userId===n.userId),Ia(n.Kt,t)):null}))},t.prototype.Vi=function(t,e){var n=this;return this.Ai[e]?ju.resolve(this.Ai[e]):this.gi(t,e).next((function(t){if(t){var r=t.keys();return n.Ai[e]=r,r}return null}))},t.prototype.pi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fa(t).ls({index:Yu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Hr(e.batchId>=r),o=Ia(n.Kt,e)),i.done()})).next((function(){return o}))},t.prototype.bi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Fa(t).ls({index:Yu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.vi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fa(t).os(Yu.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ia(e.Kt,t)}))}))},t.prototype.Si=function(t,e){var n=this,r=Qu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return za(t).ls({range:i},(function(r,i,s){var u=r[0],a=r[1],c=r[2],h=Ku(a);if(u===n.userId&&e.path.isEqual(h))return Fa(t).get(c).next((function(t){if(!t)throw zr();Hr(t.userId===n.userId),o.push(Ia(n.Kt,t))}));s.done()})).next((function(){return o}))},t.prototype.Di=function(t,e){var n=this,r=new Ns(Jr),i=[];return e.forEach((function(e){var o=Qu.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=za(t).ls({range:s},(function(t,i,o){var s=t[0],u=t[1],a=t[2],c=Ku(u);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),ju.$n(i).next((function(){return n.Ci(t,r)}))},t.prototype.xi=function(t,e){var n=this,r=e.path,i=r.length+1,o=Qu.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Ns(Jr);return za(t).ls({range:s},(function(t,e,o){var s=t[0],a=t[1],c=t[2],h=Ku(a);s===n.userId&&r.st(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Ci(t,u)}))},t.prototype.Ci=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Fa(t).get(e).next((function(t){if(null===t)throw zr();Hr(t.userId===n.userId),r.push(Ia(n.Kt,t))})))})),ju.$n(i).next((function(){return r}))},t.prototype.Ni=function(t,e){var n=this;return Ma(t.vs,this.userId,e).next((function(r){return t.ps((function(){n.Fi(e.batchId)})),ju.forEach(r,(function(e){return n.mi.Oi(t,e)}))}))},t.prototype.Fi=function(t){delete this.Ai[t]},t.prototype.ki=function(t){var e=this;return this.Pi(t).next((function(n){if(!n)return ju.resolve();var r=IDBKeyRange.lowerBound(Qu.prefixForUser(e.userId)),i=[];return za(t).ls({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Ku(t[1]);i.push(o)}else r.done()})).next((function(){Hr(0===i.length)}))}))},t.prototype.Mi=function(t,e){return qa(t,this.userId,e)},t.prototype.Li=function(t){var e=this;return Ha(t).get(this.userId).next((function(t){return t||new Wu(e.userId,-1,"")}))},t}();function qa(t,e,n){var r=Qu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return za(t).ls({range:o,hs:!0},(function(t,n,r){var o=t[0],u=t[1];t[2],o===e&&u===i&&(s=!0),r.done()})).next((function(){return s}))}function Fa(t){return fa(t,Yu.store)}function za(t){return fa(t,Qu.store)}function Ha(t){return fa(t,Wu.store)}var Ba=function(){function t(t){this.$i=t}return t.prototype.next=function(){return this.$i+=2,this.$i},t.Bi=function(){return new t(0)},t.qi=function(){return new t(-1)},t}(),Ga=function(){function t(t,e){this.mi=t,this.Kt=e}return t.prototype.Ui=function(t){var e=this;return this.Qi(t).next((function(n){var r=new Ba(n.highestTargetId);return n.highestTargetId=r.next(),e.Ki(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Wi=function(t){return this.Qi(t).next((function(t){return di.W(new pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.ji=function(t){return this.Qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Gi=function(t,e,n){var r=this;return this.Qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.G()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ki(t,i)}))},t.prototype.zi=function(t,e){var n=this;return this.Hi(t,e).next((function(){return n.Qi(t).next((function(r){return r.targetCount+=1,n.Ji(e,r),n.Ki(t,r)}))}))},t.prototype.Yi=function(t,e){return this.Hi(t,e)},t.prototype.Xi=function(t,e){var n=this;return this.Zi(t,e.targetId).next((function(){return Ka(t).delete(e.targetId)})).next((function(){return n.Qi(t)})).next((function(e){return Hr(e.targetCount>0),e.targetCount-=1,n.Ki(t,e)}))},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return Ka(t).ls((function(s,u){var a=Ea(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Xi(t,a)))})).next((function(){return ju.$n(o)})).next((function(){return i}))},t.prototype.mn=function(t,e){return Ka(t).ls((function(t,n){var r=Ea(n);e(r)}))},t.prototype.Qi=function(t){return Ja(t).get(ia.key).next((function(t){return Hr(null!==t),t}))},t.prototype.Ki=function(t,e){return Ja(t).put(ia.key,e)},t.prototype.Hi=function(t,e){return Ka(t).put(_a(this.Kt,e))},t.prototype.Ji=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.er=function(t){return this.Qi(t).next((function(t){return t.targetCount}))},t.prototype.nr=function(t,e){var n=no(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ka(t).ls({range:r,index:na.queryTargetsIndexName},(function(t,n,r){var o=Ea(n);ro(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.sr=function(t,e,n){var r=this,i=[],o=Xa(t);return e.forEach((function(e){var s=Hu(e.path);i.push(o.put(new ra(n,s))),i.push(r.mi.ir(t,n,e))})),ju.$n(i)},t.prototype.rr=function(t,e,n){var r=this,i=Xa(t);return ju.forEach(e,(function(e){var o=Hu(e.path);return ju.$n([i.delete([n,o]),r.mi.cr(t,n,e)])}))},t.prototype.Zi=function(t,e){var n=Xa(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ar=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Xa(t),i=Ls();return r.ls({range:n,hs:!0},(function(t,e,n){var r=Ku(t[1]),o=new bi(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=Hu(e.path),r=IDBKeyRange.bound([n],[Wr(n)],!1,!0),i=0;return Xa(t).ls({index:ra.documentTargetsIndex,hs:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Dn=function(t,e){return Ka(t).get(e).next((function(t){return t?Ea(t):null}))},t}();function Ka(t){return fa(t,na.store)}function Ja(t){return fa(t,ia.store)}function Xa(t){return fa(t,ra.store)}function Wa(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Jr(n,i);return 0===s?Jr(r,o):s}var Ya=function(){function t(t){this.ur=t,this.buffer=new Ns(Wa),this.hr=0}return t.prototype.lr=function(){return++this.hr},t.prototype._r=function(t){var e=[t,this.lr()];if(this.buffer.size<this.ur)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Wa(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Qa=function(){function t(t,e){this.dr=t,this.fs=e,this.wr=!1,this.Er=null}return t.prototype.start=function(t){-1!==this.dr.params.Js&&this.Tr(t)},t.prototype.stop=function(){this.Er&&(this.Er.cancel(),this.Er=null)},Object.defineProperty(t.prototype,"Ir",{get:function(){return null!==this.Er},enumerable:!1,configurable:!0}),t.prototype.Tr=function(t){var n=this,r=this.wr?3e5:6e4;Vr("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.Er=this.fs.mr("lru_garbage_collection",r,(function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:this.Er=null,this.wr=!0,e.label=1;case 1:return e.trys.push([1,3,,7]),[4,t.Ar(this.dr)];case 2:return e.sent(),[3,7];case 3:return Pu(n=e.sent())?(Vr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n),[3,6]):[3,4];case 4:return[4,Pa(n)];case 5:e.sent(),e.label=6;case 6:return[3,7];case 7:return[4,this.Tr(t)];case 8:return e.sent(),[2]}}))}))}))},t}(),$a=function(){function t(t,e){this.Rr=t,this.params=e}return t.prototype.Pr=function(t,e){return this.Rr.yr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.gr=function(t,e){var n=this;if(0===e)return ju.resolve(li.U);var r=new Ya(e);return this.Rr.mn(t,(function(t){return r._r(t.sequenceNumber)})).next((function(){return n.Rr.Vr(t,(function(t){return r._r(t)}))})).next((function(){return r.maxValue}))},t.prototype.tr=function(t,e,n){return this.Rr.tr(t,e,n)},t.prototype.pr=function(t,e){return this.Rr.pr(t,e)},t.prototype.br=function(t,e){var n=this;return-1===this.params.Js?(Vr("LruGarbageCollector","Garbage collection skipped; disabled"),ju.resolve(ka)):this.vr(t).next((function(r){return r<n.params.Js?(Vr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Js),ka):n.Sr(t,e)}))},t.prototype.vr=function(t){return this.Rr.vr(t)},t.prototype.Sr=function(t,e){var n,i,o,s,u,a,c,h=this,f=Date.now();return this.Pr(t,this.params.Ys).next((function(e){return e>h.params.Xs?(Vr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Xs+" from "+e),i=h.params.Xs):i=e,s=Date.now(),h.gr(t,i)})).next((function(r){return n=r,u=Date.now(),h.tr(t,n,e)})).next((function(e){return o=e,a=Date.now(),h.pr(t,n)})).next((function(t){return c=Date.now(),Mr()<=r.p.DEBUG&&Vr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-f)+"ms"),ju.resolve({js:!0,Gs:i,zs:o,Hs:t})}))},t}(),Za=function(){function t(t,e){this.db=t,this.dr=function(t,e){return new $a(t,e)}(this,e)}return t.prototype.yr=function(t){var e=this.Dr(t);return this.db.Cr().er(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Dr=function(t){var e=0;return this.Vr(t,(function(t){e++})).next((function(){return e}))},t.prototype.mn=function(t,e){return this.db.Cr().mn(t,e)},t.prototype.Vr=function(t,e){return this.Nr(t,(function(t,n){return e(n)}))},t.prototype.ir=function(t,e,n){return tc(t,n)},t.prototype.cr=function(t,e,n){return tc(t,n)},t.prototype.tr=function(t,e,n){return this.db.Cr().tr(t,e,n)},t.prototype.Oi=function(t,e){return tc(t,e)},t.prototype.Fr=function(t,e){return function(t,e){var n=!1;return Ha(t)._s((function(r){return qa(t,r,e).next((function(t){return t&&(n=!0),ju.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.pr=function(t,e){var n=this,r=this.db.kr().Or(),i=[],o=0;return this.Nr(t,(function(s,u){if(u<=e){var a=n.Fr(t,s).next((function(e){if(!e)return o++,r.di(t,s).next((function(){return r.fi(s),Xa(t).delete([0,Hu(s.path)])}))}));i.push(a)}})).next((function(){return ju.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Lt(t.Ss);return this.db.Cr().Yi(t,n)},t.prototype.Mr=function(t,e){return tc(t,e)},t.prototype.Nr=function(t,e){var n,r=Xa(t),i=li.U;return r.ls({index:ra.documentTargetsIndex},(function(t,r){var o=t[0],s=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==li.U&&e(new bi(Ku(n)),i),i=u,n=s):i=li.U})).next((function(){i!==li.U&&e(new bi(Ku(n)),i)}))},t.prototype.vr=function(t){return this.db.kr().Lr(t)},t}();function tc(t,e){return Xa(t).put(function(t,e){return new ra(0,Hu(t.path),e)}(e,t.Ss))}var ec=function(){function t(t,e){this.Kt=t,this.Ii=e}return t.prototype.hi=function(t,e,n){return ic(t).put(oc(e),n)},t.prototype.fi=function(t,e){var n=ic(t),r=oc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.$r(t,r)}))},t.prototype.di=function(t,e){var n=this;return ic(t).get(oc(e)).next((function(t){return n.Br(t)}))},t.prototype.qr=function(t,e){var n=this;return ic(t).get(oc(e)).next((function(t){var e=n.Br(t);return e?{_i:e,size:Va(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=xs();return this.Ur(t,e,(function(t,e){var i=n.Br(e);r=r.Ht(t,i)})).next((function(){return r}))},t.prototype.Qr=function(t,e){var n=this,r=xs(),i=new _s(bi.J);return this.Ur(t,e,(function(t,e){var o=n.Br(e);o?(r=r.Ht(t,o),i=i.Ht(t,Va(e))):(r=r.Ht(t,null),i=i.Ht(t,0))})).next((function(){return{Kr:r,Wr:i}}))},t.prototype.Ur=function(t,e,n){if(e.nt())return ju.resolve();var r=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),i=e.ee(),o=i.ce();return ic(t).ls({range:r},(function(t,e,r){for(var s=bi.Tt(t);o&&bi.J(o,s)<0;)n(o,null),o=i.ce();o&&o.isEqual(s)&&(n(o,e),o=i.ae()?i.ce():null),o?r.rs(o.path.rt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ae()?i.ce():null}))},t.prototype.jr=function(t,e,n){var r=this,i=ks(),o=e.path.length+1,s={};if(n.isEqual(di.min())){var u=e.path.rt();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.rt(),c=ga(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=ta.collectionReadTimeIndex}return ic(t).ls(s,(function(t,n,s){if(t.length===o){var u=va(r.Kt,n);e.path.st(u.key.path)?u instanceof Qi&&Lo(e,u)&&(i=i.Ht(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.Or=function(t){return new nc(this,!!t&&t.Gr)},t.prototype.Lr=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return rc(t).get(ea.key).next((function(t){return Hr(!!t),t}))},t.prototype.$r=function(t,e){return rc(t).put(ea.key,e)},t.prototype.Br=function(t){if(t){var e=va(this.Kt,t);return e instanceof $i&&e.version.isEqual(di.min())?null:e}return null},t}(),nc=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).zr=e,r.Gr=n,r.Hr=new La((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(e.f)(n,t),n.prototype.Ti=function(t){var e=this,n=[],r=0,i=new Ns((function(t,e){return Jr(t.ot(),e.ot())}));return this.ci.forEach((function(o,s){var u=e.Hr.get(o);if(s._i){var a=ya(e.zr.Kt,s._i,e.ui(o));i=i.add(o.path.Z());var c=Va(a);r+=c-u,n.push(e.zr.hi(t,o,a))}else if(r-=u,e.Gr){var h=ya(e.zr.Kt,new $i(o,di.min()),e.ui(o));n.push(e.zr.hi(t,o,h))}else n.push(e.zr.fi(t,o))})),i.forEach((function(r){n.push(e.zr.Ii.Qs(t,r))})),n.push(this.zr.updateMetadata(t,r)),ju.$n(n)},n.prototype.wi=function(t,e){var n=this;return this.zr.qr(t,e).next((function(t){return null===t?(n.Hr.set(e,0),null):(n.Hr.set(e,t.size),t._i)}))},n.prototype.Ei=function(t,e){var n=this;return this.zr.Qr(t,e).next((function(t){var e=t.Kr;return t.Wr.forEach((function(t,e){n.Hr.set(t,e)})),e}))},n}(Ra);function rc(t){return fa(t,ea.store)}function ic(t){return fa(t,ta.store)}function oc(t){return t.path.rt()}var sc=function(){function t(t){this.Kt=t}return t.prototype.Yn=function(t,e,n,r){var i=this;Hr(n<r&&n>=0&&r<=11);var o=new xu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Xu.store)}(t),function(t){t.createObjectStore(Wu.store,{keyPath:Wu.keyPath}),t.createObjectStore(Yu.store,{keyPath:Yu.keyPath,autoIncrement:!0}).createIndex(Yu.userMutationsIndex,Yu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Qu.store)}(t),uc(t),function(t){t.createObjectStore(ta.store)}(t));var s=ju.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ra.store),t.deleteObjectStore(na.store),t.deleteObjectStore(ia.store)}(t),uc(t)),s=s.next((function(){return function(t){var e=t.store(ia.store),n=new ia(0,0,di.min().G(),0);return e.put(ia.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Yu.store).os().next((function(n){t.deleteObjectStore(Yu.store),t.createObjectStore(Yu.store,{keyPath:Yu.keyPath,autoIncrement:!0}).createIndex(Yu.userMutationsIndex,Yu.userMutationsKeyPath,{unique:!0});var r=e.store(Yu.store),i=n.map((function(t){return r.put(t)}));return ju.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(sa.store,{keyPath:sa.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Jr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ea.store)}(t),i.Yr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Xr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Zr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ta.store);e.createIndex(ta.readTimeIndex,ta.readTimeIndexPath,{unique:!1}),e.createIndex(ta.collectionReadTimeIndex,ta.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.eo(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(ua.store,{keyPath:ua.keyPath})}(t),function(t){t.createObjectStore(aa.store,{keyPath:aa.keyPath})}(t)}))),s},t.prototype.Yr=function(t){var e=0;return t.store(ta.store).ls((function(t,n){e+=Va(n)})).next((function(){var n=new ea(e);return t.store(ea.store).put(ea.key,n)}))},t.prototype.Jr=function(t){var e=this,n=t.store(Wu.store),r=t.store(Yu.store);return n.os().next((function(n){return ju.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.os(Yu.userMutationsIndex,i).next((function(r){return ju.forEach(r,(function(r){Hr(r.userId===n.userId);var i=Ia(e.Kt,r);return Ma(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Xr=function(t){var e=t.store(ra.store),n=t.store(ta.store);return t.store(ia.store).get(ia.key).next((function(t){var r=[];return n.ls((function(n,i){var o=new yi(n),s=function(t){return[0,Hu(t)]}(o);r.push(e.get(s).next((function(n){return n?ju.resolve():function(n){return e.put(new ra(0,Hu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return ju.$n(r)}))}))},t.prototype.Zr=function(t,e){t.createObjectStore(oa.store,{keyPath:oa.keyPath});var n=e.store(oa.store),r=new ja,i=function(t){if(r.add(t)){var e=t.et(),i=t.Z();return n.put({collectionId:e,parent:Hu(i)})}};return e.store(ta.store).ls({hs:!0},(function(t,e){var n=new yi(t);return i(n.Z())})).next((function(){return e.store(Qu.store).ls({hs:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Ku(n));return i(r.Z())}))}))},t.prototype.eo=function(t){var e=this,n=t.store(na.store);return n.ls((function(t,r){var i=Ea(r),o=_a(e.Kt,i);return n.put(o)}))},t}();function uc(t){t.createObjectStore(ra.store,{keyPath:ra.keyPath}).createIndex(ra.documentTargetsIndex,ra.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(na.store,{keyPath:na.keyPath}).createIndex(na.queryTargetsIndexName,na.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ia.store)}var ac="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cc=function(){function t(e,n,r,i,o,s,u,a,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.no=o,this.window=s,this.document=u,this.so=c,this.io=h,this.ro=null,this.oo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.co=null,this.inForeground=!1,this.ao=null,this.uo=null,this.ho=Number.NEGATIVE_INFINITY,this.lo=function(t){return Promise.resolve()},!t.Wn())throw new $r(Qr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.mi=new Za(this,i),this._o=n+"main",this.Kt=new da(a),this.fo=new Du(this._o,11,new sc(this.Kt)),this.wo=new Ga(this.mi,this.Kt),this.Ii=new xa,this.Eo=function(t,e){return new ec(t,e)}(this.Kt,this.Ii),this.To=new Oa,this.window&&this.window.localStorage?this.Io=this.window.localStorage:(this.Io=null,!1===h&&Ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.mo().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new $r(Qr.FAILED_PRECONDITION,ac);return t.Ao(),t.Ro(),t.Po(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.wo.ji(e)}))})).then((function(e){t.ro=new li(e,t.so)})).then((function(){t.oo=!0})).catch((function(e){return t.fo&&t.fo.close(),Promise.reject(e)}))},t.prototype.yo=function(t){var n=this;return this.lo=function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.c)(this,(function(e){return this.Ir?[2,t(r)]:[2]}))}))},t(this.isPrimary)},t.prototype.Vo=function(t){var n=this;this.fo.Zn((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return null===r.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.po=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.no.ys((function(){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return this.Ir?[4,this.mo()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.mo=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return fc(e).put(new sa(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.bo(e).next((function(e){e||(t.isPrimary=!1,t.no.vo((function(){return t.lo(!1)})))}))})).next((function(){return t.So(e)})).next((function(n){return t.isPrimary&&!n?t.Do(e).next((function(){return!1})):!!n&&t.Co(e).next((function(){return!0}))}))})).catch((function(e){if(Pu(e))return Vr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Vr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.no.vo((function(){return t.lo(e)})),t.isPrimary=e}))},t.prototype.bo=function(t){var e=this;return hc(t).get(Xu.key).next((function(t){return ju.resolve(e.xo(t))}))},t.prototype.No=function(t){return fc(t).delete(this.clientId)},t.prototype.Fo=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n,r,i,o=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return!this.isPrimary||this.Oo(this.ho,18e5)?[3,2]:(this.ho=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=fa(t,sa.store);return e.os().next((function(t){var n=o.ko(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return ju.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=e.sent(),this.Io)for(n=0,r=t;n<r.length;n++)i=r[n],this.Io.removeItem(this.Mo(i.clientId));e.label=2;case 2:return[2]}}))}))},t.prototype.Po=function(){var t=this;this.uo=this.no.mr("client_metadata_refresh",4e3,(function(){return t.mo().then((function(){return t.Fo()})).then((function(){return t.Po()}))}))},t.prototype.xo=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.So=function(t){var e=this;return this.io?ju.resolve(!0):hc(t).get(Xu.key).next((function(n){if(null!==n&&e.Oo(n.leaseTimestampMs,5e3)&&!e.Lo(n.ownerId)){if(e.xo(n)&&e.networkEnabled)return!0;if(!e.xo(n)){if(!n.allowTabSynchronization)throw new $r(Qr.FAILED_PRECONDITION,ac);return!1}}return!(!e.networkEnabled||!e.inForeground)||fc(t).os().next((function(t){return void 0===e.ko(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Vr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.$o=function(){return Object(e.b)(this,void 0,void 0,(function(){var t=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return this.oo=!1,this.Bo(),this.uo&&(this.uo.cancel(),this.uo=null),this.qo(),this.Uo(),[4,this.fo.runTransaction("shutdown","readwrite",[Xu.store,sa.store],(function(e){var n=new ha(e,li.U);return t.Do(n).next((function(){return t.No(n)}))}))];case 1:return e.sent(),this.fo.close(),this.Qo(),[2]}}))}))},t.prototype.ko=function(t,e){var n=this;return t.filter((function(t){return n.Oo(t.updateTimeMs,e)&&!n.Lo(t.clientId)}))},t.prototype.Ko=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return fc(e).os().next((function(e){return t.ko(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Wo=function(t){return Ua.Ri(t,this.Kt,this.Ii,this.mi)},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.jo=function(){return this.Ii},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;Vr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.fo.runTransaction(t,o,ca,(function(o){return i=new ha(o,r.ro?r.ro.next():li.U),"readwrite-primary"===e?r.bo(i).next((function(t){return!!t||r.So(i)})).next((function(e){if(!e)throw Ur("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.no.vo((function(){return r.lo(!1)})),new $r(Qr.FAILED_PRECONDITION,Fu);return n(i)})).next((function(t){return r.Co(i).next((function(){return t}))})):r.zo(i).next((function(){return n(i)}))})).then((function(t){return i.bs(),t}))},t.prototype.zo=function(t){var e=this;return hc(t).get(Xu.key).next((function(t){if(null!==t&&e.Oo(t.leaseTimestampMs,5e3)&&!e.Lo(t.ownerId)&&!e.xo(t)&&!(e.io||e.allowTabSynchronization&&t.allowTabSynchronization))throw new $r(Qr.FAILED_PRECONDITION,ac)}))},t.prototype.Co=function(t){var e=new Xu(this.clientId,this.allowTabSynchronization,Date.now());return hc(t).put(Xu.key,e)},t.Wn=function(){return Du.Wn()},t.prototype.Do=function(t){var e=this,n=hc(t);return n.get(Xu.key).next((function(t){return e.xo(t)?(Vr("IndexedDbPersistence","Releasing primary lease."),n.delete(Xu.key)):ju.resolve()}))},t.prototype.Oo=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ur("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ao=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ao=function(){t.no.ys((function(){return t.inForeground="visible"===t.document.visibilityState,t.mo()}))},this.document.addEventListener("visibilitychange",this.ao),this.inForeground="visible"===this.document.visibilityState)},t.prototype.qo=function(){this.ao&&(this.document.removeEventListener("visibilitychange",this.ao),this.ao=null)},t.prototype.Ro=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.co=function(){e.Bo(),e.no.ys((function(){return e.$o()}))},this.window.addEventListener("unload",this.co))},t.prototype.Uo=function(){this.co&&(this.window.removeEventListener("unload",this.co),this.co=null)},t.prototype.Lo=function(t){var e;try{var n=null!==(null===(e=this.Io)||void 0===e?void 0:e.getItem(this.Mo(t)));return Vr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ur("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Bo=function(){if(this.Io)try{this.Io.setItem(this.Mo(this.clientId),String(Date.now()))}catch(t){Ur("Failed to set zombie client id.",t)}},t.prototype.Qo=function(){if(this.Io)try{this.Io.removeItem(this.Mo(this.clientId))}catch(t){}},t.prototype.Mo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function hc(t){return fa(t,Xu.store)}function fc(t){return fa(t,sa.store)}function lc(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var pc=function(){function t(t,e,n){this.Eo=t,this.Ho=e,this.Ii=n}return t.prototype.Jo=function(t,e){var n=this;return this.Ho.Si(t,e).next((function(r){return n.Yo(t,e,r)}))},t.prototype.Yo=function(t,e,n){return this.Eo.di(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Ns(e,t);return t}))},t.prototype.Xo=function(t,e,n){var r=xs();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Ns(t,e);r=r.Ht(t,e)})),r},t.prototype.Zo=function(t,e){var n=this;return this.Eo.getEntries(t,e).next((function(e){return n.tc(t,e)}))},t.prototype.tc=function(t,e){var n=this;return this.Ho.Di(t,e).next((function(r){var i=n.Xo(t,e,r),o=js();return i.forEach((function(t,e){e||(e=new $i(t,di.min())),o=o.Ht(t,e)})),o}))},t.prototype.jr=function(t,e,n){return function(t){return bi.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.ec(t,e.path):So(e)?this.nc(t,e,n):this.sc(t,e,n)},t.prototype.ec=function(t,e){return this.Jo(t,new bi(e)).next((function(t){var e=ks();return t instanceof Qi&&(e=e.Ht(t.key,t)),e}))},t.prototype.nc=function(t,e,n){var r=this,i=e.collectionGroup,o=ks();return this.Ii.Ks(t,i).next((function(s){return ju.forEach(s,(function(s){var u=function(t,e){return new Io(e,null,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.sc(t,u,n).next((function(t){t.forEach((function(t,e){o=o.Ht(t,e)}))}))})).next((function(){return o}))}))},t.prototype.sc=function(t,e,n){var r,i,o=this;return this.Eo.jr(t,e,n).next((function(n){return r=n,o.Ho.xi(t,e)})).next((function(e){return i=e,o.ic(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=ss(a,h,h,o.Ds);r=f instanceof Qi?r.Ht(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){Lo(e,n)||(r=r.remove(t))})),r}))},t.prototype.ic=function(t,e,n){for(var r=Ls(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof fs&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.Eo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Qi&&(c=c.Ht(t,e))})),c}))},t}(),dc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}return t.cc=function(e,n){for(var r=Ls(),i=Ls(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),vc=function(){function t(){}return t.prototype.ac=function(t){this.uc=t},t.prototype.jr=function(t,e,n,i){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Nt.length||1===t.Nt.length&&t.Nt[0].field.ht())}(e)||n.isEqual(di.min())?this.hc(t,e):this.uc.Zo(t,i).next((function(s){var u=o.lc(e,s);return(To(e)||Oo(e))&&o._c(e.limitType,u,i,n)?o.hc(t,e):(Mr()<=r.p.DEBUG&&Vr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Po(e)),o.uc.jr(t,e,n).next((function(t){return u.forEach((function(e){t=t.Ht(e.key,e)})),t})))}))},t.prototype.lc=function(t,e){var n=new Ns(Ro(t));return e.forEach((function(e,r){r instanceof Qi&&Lo(t,r)&&(n=n.add(r))})),n},t.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.u(r)>0)},t.prototype.hc=function(t,e){return Mr()<=r.p.DEBUG&&Vr("QueryEngine","Using full collection scan to execute query:",Po(e)),this.uc.jr(t,e,di.min())},t}(),yc=function(){function t(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new _s(Jr),this.wc=new La((function(t){return no(t)}),ro),this.Ec=di.min(),this.Ho=t.Wo(n),this.Tc=t.kr(),this.wo=t.Cr(),this.Ic=new pc(this.Tc,this.Ho,this.persistence.jo()),this.To=t.Go(),this.fc.ac(this.Ic)}return t.prototype.Ar=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.br(n,e.dc)}))},t}();function gc(t,e,n,r){return new yc(t,e,n,r)}function mc(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Br(t),i=r.Ho,o=r.Ic,[4,r.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return r.Ho.vi(t).next((function(s){return e=s,i=r.persistence.Wo(n),o=new pc(r.Tc,i,r.persistence.jo()),i.vi(t)})).next((function(n){for(var r=[],i=[],s=Ls(),u=0,a=e;u<a.length;u++){var c=a[u];r.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++){var l=f[h];s=s.add(l.key)}}for(var p=0,d=n;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];s=s.add(m.key)}}return o.Zo(t,s).next((function(t){return{mc:t,Ac:r,Rc:i}}))}))}))];case 1:return s=e.sent(),[2,(r.Ho=i,r.Ic=o,r.fc.ac(r.Ic),s)]}}))}))}function bc(t,e){var n=Br(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Tc.Or({Gr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ju.resolve();return o.forEach((function(t){s=s.next((function(){return r.di(e,t)})).next((function(e){var o=e,s=n.ks.get(t);Hr(null!==s),(!o||o.version.u(s)<0)&&(o=i.Cs(t,o,n))&&r.hi(o,n.Os)}))})),s.next((function(){return t.Ho.Ni(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}function wc(t){var e=Br(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.wo.Wi(t)}))}function Ic(t,e){var n=Br(t),r=e.Mt,i=n.dc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Tc.Or({Gr:!0});i=n.dc;var s=[];e.Oe.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.wo.rr(t,e.Ke,o).next((function(){return n.wo.sr(t,e.Ue,o)})));var a=e.resumeToken;if(a.o()>0){var c=u.$t(a,r).Lt(t.Ss);i=i.Ht(o,c),function(t,e,n){return Hr(e.resumeToken.o()>0),0===t.resumeToken.o()||e.Mt.j()-t.Mt.j()>=3e8||n.Ue.size+n.Qe.size+n.Ke.size>0}(u,c,e)&&s.push(n.wo.Yi(t,c))}}}));var u=js();if(e.Me.forEach((function(r,i){e.Le.has(r)&&s.push(n.persistence.mi.Mr(t,r))})),s.push(function(t,e,n,r,i){var o=Ls();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=js();return n.forEach((function(n,s){var u=t.get(n),a=(null==i?void 0:i.get(n))||r;s instanceof $i&&s.version.isEqual(di.min())?(e.fi(n,a),o=o.Ht(n,s)):null==u||s.version.u(u.version)>0||0===s.version.u(u.version)&&u.hasPendingWrites?(e.hi(s,a),o=o.Ht(n,s)):Vr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",s.version)})),o}))}(t,o,e.Me,r,void 0).next((function(t){u=t}))),!r.isEqual(di.min())){var a=n.wo.Wi(t).next((function(e){return n.wo.Gi(t,t.Ss,r)}));s.push(a)}return ju.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Ic.tc(t,u)}))})).then((function(t){return n.dc=i,t}))}function Ec(t,e){var n=Br(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Ho.pi(t,e)}))}function _c(t,e){var n=Br(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.wo.nr(t,e).next((function(i){return i?(r=i,ju.resolve(r)):n.wo.Ui(t).next((function(i){return r=new Vo(e,i,0,t.Ss),n.wo.zi(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.dc.get(t.targetId);return(null===r||t.Mt.u(r.Mt)>0)&&(n.dc=n.dc.Ht(t.targetId,t),n.wc.set(e,t.targetId)),t}))}function Tc(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.c)(this,(function(e){switch(e.label){case 0:i=Br(t),o=i.dc.get(n),s=r?"readwrite":"readwrite-primary",e.label=1;case 1:return e.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.mi.removeTarget(t,o)}))];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:if(!Pu(u=e.sent()))throw u;return Vr("LocalStore","Failed to update sequence numbers for target "+n+": "+u),[3,5];case 5:return i.dc=i.dc.remove(n),i.wc.delete(o.target),[2]}}))}))}function Oc(t,e,n){var r=Br(t),i=di.min(),o=Ls();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Br(t),i=r.wc.get(n);return void 0!==i?ju.resolve(r.dc.get(i)):r.wo.nr(e,n)}(r,t,xo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.wo.ar(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.fc.jr(t,e,n?i:di.min(),n?o:Ls())})).next((function(t){return{documents:t,Pc:o}}))}))}function Nc(t,e){var n=Br(t),r=Br(n.wo),i=n.dc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Dn(t,e).next((function(t){return t?t.target:null}))}))}function Ac(t){var e=Br(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Br(t),i=js(),o=ga(n),s=ic(e),u=IDBKeyRange.lowerBound(o,!0);return s.ls({index:ta.readTimeIndex,range:u},(function(t,e){var n=va(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime})).next((function(){return{gs:i,readTime:ma(o)}}))}(e.Tc,t,e.Ec)})).then((function(t){var n=t.gs,r=t.readTime;return e.Ec=r,n}))}function Sc(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){return[2,(n=Br(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ic(t),n=di.min();return e.ls({index:ta.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=ma(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){n.Ec=t}))]}))}))}var jc=function(){function t(t){this.Kt=t,this.bc=new Map,this.vc=new Map}return t.prototype.Ls=function(t,e){return ju.resolve(this.bc.get(e))},t.prototype.$s=function(t,e){var n;return this.bc.set(e.id,{id:(n=e).id,version:n.version,createTime:nu(n.createTime)}),ju.resolve()},t.prototype.Bs=function(t,e){return ju.resolve(this.vc.get(e))},t.prototype.qs=function(t,e){return this.vc.set(e.name,function(t){return{name:t.name,query:Ta(t.bundledQuery),readTime:nu(t.readTime)}}(e)),ju.resolve()},t}(),xc=function(){function t(){this.Sc=new Ns(Dc.Dc),this.Cc=new Ns(Dc.xc)}return t.prototype.nt=function(){return this.Sc.nt()},t.prototype.ir=function(t,e){var n=new Dc(t,e);this.Sc=this.Sc.add(n),this.Cc=this.Cc.add(n)},t.prototype.Nc=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.cr=function(t,e){this.Fc(new Dc(t,e))},t.prototype.Oc=function(t,e){var n=this;t.forEach((function(t){return n.cr(t,e)}))},t.prototype.kc=function(t){var e=this,n=new bi(new yi([])),r=new Dc(n,t),i=new Dc(n,t+1),o=[];return this.Cc.Ae([r,i],(function(t){e.Fc(t),o.push(t.key)})),o},t.prototype.Mc=function(){var t=this;this.Sc.forEach((function(e){return t.Fc(e)}))},t.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},t.prototype.Lc=function(t){var e=new bi(new yi([])),n=new Dc(e,t),r=new Dc(e,t+1),i=Ls();return this.Cc.Ae([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new Dc(t,0),n=this.Sc.Pe(e);return null!==n&&t.isEqual(n.key)},t}(),Dc=function(){function t(t,e){this.key=t,this.$c=e}return t.Dc=function(t,e){return bi.J(t.key,e.key)||Jr(t.$c,e.$c)},t.xc=function(t,e){return Jr(t.$c,e.$c)||bi.J(t.key,e.key)},t}(),kc=function(){function t(t,e){this.Ii=t,this.mi=e,this.Ho=[],this.Bc=1,this.qc=new Ns(Dc.Dc)}return t.prototype.Pi=function(t){return ju.resolve(0===this.Ho.length)},t.prototype.yi=function(t,e,n,r){var i=this.Bc;this.Bc++,this.Ho.length>0&&this.Ho[this.Ho.length-1];var o=new la(i,e,n,r);this.Ho.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.qc=this.qc.add(new Dc(a.key,i)),this.Ii.Qs(t,a.key.path.Z())}return ju.resolve(o)},t.prototype.gi=function(t,e){return ju.resolve(this.Uc(e))},t.prototype.pi=function(t,e){var n=e+1,r=this.Qc(n),i=r<0?0:r;return ju.resolve(this.Ho.length>i?this.Ho[i]:null)},t.prototype.bi=function(){return ju.resolve(0===this.Ho.length?-1:this.Bc-1)},t.prototype.vi=function(t){return ju.resolve(this.Ho.slice())},t.prototype.Si=function(t,e){var n=this,r=new Dc(e,0),i=new Dc(e,Number.POSITIVE_INFINITY),o=[];return this.qc.Ae([r,i],(function(t){var e=n.Uc(t.$c);o.push(e)})),ju.resolve(o)},t.prototype.Di=function(t,e){var n=this,r=new Ns(Jr);return e.forEach((function(t){var e=new Dc(t,0),i=new Dc(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,i],(function(t){r=r.add(t.$c)}))})),ju.resolve(this.Kc(r))},t.prototype.xi=function(t,e){var n=e.path,r=n.length+1,i=n;bi.Et(i)||(i=i.child(""));var o=new Dc(new bi(i),0),s=new Ns(Jr);return this.qc.Re((function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(s=s.add(t.$c)),!0)}),o),ju.resolve(this.Kc(s))},t.prototype.Kc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Uc(t);null!==r&&n.push(r)})),n},t.prototype.Ni=function(t,e){var n=this;Hr(0===this.Wc(e.batchId,"removed")),this.Ho.shift();var r=this.qc;return ju.forEach(e.mutations,(function(i){var o=new Dc(i.key,e.batchId);return r=r.delete(o),n.mi.Oi(t,i.key)})).next((function(){n.qc=r}))},t.prototype.Fi=function(t){},t.prototype.Mi=function(t,e){var n=new Dc(e,0),r=this.qc.Pe(n);return ju.resolve(e.isEqual(r&&r.key))},t.prototype.ki=function(t){return this.Ho.length,ju.resolve()},t.prototype.Wc=function(t,e){return this.Qc(t)},t.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},t.prototype.Uc=function(t){var e=this.Qc(t);return e<0||e>=this.Ho.length?null:this.Ho[e]},t}(),Cc=function(){function t(t,e){this.Ii=t,this.jc=e,this.docs=new _s(bi.J),this.size=0}return t.prototype.hi=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.jc(e);return this.docs=this.docs.Ht(r,{_i:e,size:s,readTime:n}),this.size+=s-o,this.Ii.Qs(t,r.path.Z())},t.prototype.fi=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.di=function(t,e){var n=this.docs.get(e);return ju.resolve(n?n._i:null)},t.prototype.getEntries=function(t,e){var n=this,r=xs();return e.forEach((function(t){var e=n.docs.get(t);r=r.Ht(t,e?e._i:null)})),ju.resolve(r)},t.prototype.jr=function(t,e,n){for(var r=ks(),i=new bi(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),u=s.key,a=s.value,c=a._i,h=a.readTime;if(!e.path.st(u.path))break;h.u(n)<=0||c instanceof Qi&&Lo(e,c)&&(r=r.Ht(c.key,c))}return ju.resolve(r)},t.prototype.Gc=function(t,e){return ju.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Or=function(t){return new Pc(this)},t.prototype.Lr=function(t){return ju.resolve(this.size)},t}(),Pc=function(t){function n(e){var n=this;return(n=t.call(this)||this).zr=e,n}return Object(e.f)(n,t),n.prototype.Ti=function(t){var e=this,n=[];return this.ci.forEach((function(r,i){i&&i._i?n.push(e.zr.hi(t,i._i,e.ui(r))):e.zr.fi(r)})),ju.$n(n)},n.prototype.wi=function(t,e){return this.zr.di(t,e)},n.prototype.Ei=function(t,e){return this.zr.getEntries(t,e)},n}(Ra),Lc=function(){function t(t){this.persistence=t,this.zc=new La((function(t){return no(t)}),ro),this.lastRemoteSnapshotVersion=di.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new xc,this.targetCount=0,this.Yc=Ba.Bi()}return t.prototype.mn=function(t,e){return this.zc.forEach((function(t,n){return e(n)})),ju.resolve()},t.prototype.Wi=function(t){return ju.resolve(this.lastRemoteSnapshotVersion)},t.prototype.ji=function(t){return ju.resolve(this.Hc)},t.prototype.Ui=function(t){return this.highestTargetId=this.Yc.next(),ju.resolve(this.highestTargetId)},t.prototype.Gi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),ju.resolve()},t.prototype.Hi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new Ba(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},t.prototype.zi=function(t,e){return this.Hi(e),this.targetCount+=1,ju.resolve()},t.prototype.Yi=function(t,e){return this.Hi(e),ju.resolve()},t.prototype.Xi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),this.targetCount-=1,ju.resolve()},t.prototype.tr=function(t,e,n){var r=this,i=0,o=[];return this.zc.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.zc.delete(s),o.push(r.Zi(t,u.targetId)),i++)})),ju.$n(o).next((function(){return i}))},t.prototype.er=function(t){return ju.resolve(this.targetCount)},t.prototype.nr=function(t,e){var n=this.zc.get(e)||null;return ju.resolve(n)},t.prototype.sr=function(t,e,n){return this.Jc.Nc(e,n),ju.resolve()},t.prototype.rr=function(t,e,n){this.Jc.Oc(e,n);var r=this.persistence.mi,i=[];return r&&e.forEach((function(e){i.push(r.Oi(t,e))})),ju.$n(i)},t.prototype.Zi=function(t,e){return this.Jc.kc(e),ju.resolve()},t.prototype.ar=function(t,e){var n=this.Jc.Lc(e);return ju.resolve(n)},t.prototype.Mi=function(t,e){return ju.resolve(this.Jc.Mi(e))},t}(),Rc=function(){function t(t,e){var n=this;this.Xc={},this.ro=new li(0),this.oo=!1,this.oo=!0,this.mi=t(this),this.wo=new Lc(this),this.Ii=new Sa,this.Eo=function(t,e){return new Cc(t,(function(t){return n.mi.Zc(t)}))}(this.Ii),this.Kt=new da(e),this.To=new jc(this.Kt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.$o=function(){return this.oo=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ir",{get:function(){return this.oo},enumerable:!1,configurable:!0}),t.prototype.Vo=function(){},t.prototype.po=function(){},t.prototype.jo=function(){return this.Ii},t.prototype.Wo=function(t){var e=this.Xc[t.R()];return e||(e=new kc(this.Ii,this.mi),this.Xc[t.R()]=e),e},t.prototype.Cr=function(){return this.wo},t.prototype.kr=function(){return this.Eo},t.prototype.Go=function(){return this.To},t.prototype.runTransaction=function(t,e,n){var r=this;Vr("MemoryPersistence","Starting transaction:",t);var i=new Mc(this.ro.next());return this.mi.ta(),n(i).next((function(t){return r.mi.ea(i).next((function(){return t}))})).Mn().then((function(t){return i.bs(),t}))},t.prototype.na=function(t,e){return ju.Bn(Object.values(this.Xc).map((function(n){return function(){return n.Mi(t,e)}})))},t}(),Mc=function(t){function n(e){var n=this;return(n=t.call(this)||this).Ss=e,n}return Object(e.f)(n,t),n}(zu),Vc=function(){function t(t){this.persistence=t,this.sa=new xc,this.ia=null}return t.ra=function(e){return new t(e)},Object.defineProperty(t.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw zr()},enumerable:!1,configurable:!0}),t.prototype.ir=function(t,e,n){return this.sa.ir(n,e),this.oa.delete(n.toString()),ju.resolve()},t.prototype.cr=function(t,e,n){return this.sa.cr(n,e),this.oa.add(n.toString()),ju.resolve()},t.prototype.Oi=function(t,e){return this.oa.add(e.toString()),ju.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach((function(t){return n.oa.add(t.toString())}));var r=this.persistence.Cr();return r.ar(t,e.targetId).next((function(t){t.forEach((function(t){return n.oa.add(t.toString())}))})).next((function(){return r.Xi(t,e)}))},t.prototype.ta=function(){this.ia=new Set},t.prototype.ea=function(t){var e=this,n=this.persistence.kr().Or();return ju.forEach(this.oa,(function(r){var i=bi.ft(r);return e.ca(t,i).next((function(t){t||n.fi(i)}))})).next((function(){return e.ia=null,n.apply(t)}))},t.prototype.Mr=function(t,e){var n=this;return this.ca(t,e).next((function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())}))},t.prototype.Zc=function(t){return 0},t.prototype.ca=function(t,e){var n=this;return ju.Bn([function(){return ju.resolve(n.sa.Mi(e))},function(){return n.persistence.Cr().Mi(t,e)},function(){return n.persistence.na(t,e)}])},t}();function Uc(t,e){return"firestore_clients_"+t+"_"+e}function qc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.A()&&(r+="_"+e.uid),r}function Fc(t,e){return"firestore_targets_"+t+"_"+e}var zc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.aa=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new $r(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(Ur("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.aa=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new $r(r.error.code,r.error.message)),i?new t(e,r.state,o):(Ur("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.aa=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ms(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ci(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ur("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Gc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.aa=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ur("SharedClientState","Failed to parse online state: "+e),null)},t}(),Kc=function(){function t(){this.activeTargetIds=Ms()}return t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Jc=function(){function t(t,e,n,r,i){this.window=t,this.no=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.L=null,this.wa=this.Ea.bind(this),this.Ta=new _s(Jr),this.Ir=!1,this.Ia=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=Uc(this.persistenceKey,this._a),this.Aa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ta=this.Ta.Ht(this._a,new Kc),this.Ra=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ga=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Va=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wa)}return t.Wn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,a,c,h,f,l=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,this.fa.Ko()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this._a&&(o=this.getItem(Uc(this.persistenceKey,i)))&&(s=Bc.aa(i,o))&&(this.Ta=this.Ta.Ht(s.clientId,s));for(this.pa(),(u=this.storage.getItem(this.ga))&&(a=this.ba(u))&&this.va(a),c=0,h=this.Ia;c<h.length;c++)f=h[c],this.Ea(f);return this.Ia=[],this.window.addEventListener("unload",(function(){return l.$o()})),this.Ir=!0,[2]}}))}))},t.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},t.prototype.Sa=function(){return this.Da(this.Ta)},t.prototype.Ca=function(t){var e=!1;return this.Ta.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xa=function(t){this.Na(t,"pending")},t.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},t.prototype.ka=function(t){var e="not-current";if(this.Ca(t)){var n=this.storage.getItem(Fc(this.persistenceKey,t));if(n){var r=Hc.aa(t,n);r&&(e=r.state)}}return this.Ma.ha(t),this.pa(),e},t.prototype.La=function(t){this.Ma.la(t),this.pa()},t.prototype.$a=function(t){return this.Ma.activeTargetIds.has(t)},t.prototype.Ba=function(t){this.removeItem(Fc(this.persistenceKey,t))},t.prototype.qa=function(t,e,n){this.Ua(t,e,n)},t.prototype.Qa=function(t,e,n){var r=this;e.forEach((function(t){r.Oa(t)})),this.currentUser=t,n.forEach((function(t){r.xa(t)}))},t.prototype.Ka=function(t){this.Wa(t)},t.prototype.ja=function(){this.Ga()},t.prototype.$o=function(){this.Ir&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Ir=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Vr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Vr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Vr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Ea=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Vr("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ma)return void Ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.no.vo((function(){return Object(e.b)(n,void 0,void 0,(function(){var t,n,i,o,s,u;return Object(e.c)(this,(function(e){if(this.Ir){if(null!==r.key)if(this.Ra.test(r.key)){if(null==r.newValue)return t=this.za(r.key),[2,this.Ha(t,null)];if(n=this.Ja(r.key,r.newValue))return[2,this.Ha(n.clientId,n)]}else if(this.Pa.test(r.key)){if(null!==r.newValue&&(i=this.Ya(r.key,r.newValue)))return[2,this.Xa(i)]}else if(this.ya.test(r.key)){if(null!==r.newValue&&(o=this.Za(r.key,r.newValue)))return[2,this.tu(o)]}else if(r.key===this.ga){if(null!==r.newValue&&(s=this.ba(r.newValue)))return[2,this.va(s)]}else if(r.key===this.Aa)(u=function(t){var e=li.U;if(null!=t)try{var n=JSON.parse(t);Hr("number"==typeof n),e=n}catch(t){Ur("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(r.newValue))!==li.U&&this.L(u);else if(r.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(r);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),t.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},t.prototype.Na=function(t,e,n){var r=new zc(this.currentUser,t,e,n),i=qc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ua())},t.prototype.Oa=function(t){var e=qc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Wa=function(t){var e={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(e))},t.prototype.Ua=function(t,e,n){var r=Fc(this.persistenceKey,t),i=new Hc(t,e,n);this.setItem(r,i.ua())},t.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},t.prototype.za=function(t){var e=this.Ra.exec(t);return e?e[1]:null},t.prototype.Ja=function(t,e){var n=this.za(t);return Bc.aa(n,e)},t.prototype.Ya=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return zc.aa(new si(i),r,e)},t.prototype.Za=function(t,e){var n=this.ya.exec(t),r=Number(n[1]);return Hc.aa(r,e)},t.prototype.ba=function(t){return Gc.aa(t)},t.prototype.Xa=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fa.nu(t.batchId,t.state,t.error)]:(Vr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},t.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fa.iu(s,u).then((function(){n.Ta=r}))},t.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},t.prototype.Da=function(t){var e=Ms();return t.forEach((function(t,n){e=e.ye(n.activeTargetIds)})),e},t}(),Xc=function(){function t(){this.ru=new Kc,this.ou={},this.da=null,this.L=null}return t.prototype.xa=function(t){},t.prototype.Fa=function(t,e,n){},t.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},t.prototype.qa=function(t,e,n){this.ou[t]=e},t.prototype.La=function(t){this.ru.la(t)},t.prototype.$a=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.Ba=function(t){delete this.ou[t]},t.prototype.Sa=function(){return this.ru.activeTargetIds},t.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},t.prototype.start=function(){return this.ru=new Kc,Promise.resolve()},t.prototype.Qa=function(t,e,n){},t.prototype.Ka=function(t){},t.prototype.$o=function(){},t.prototype.q=function(t){},t.prototype.ja=function(){},t}(),Wc=function(){function t(){}return t.prototype.cu=function(t){},t.prototype.$o=function(){},t}(),Yc=function(){function t(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}return t.prototype.cu=function(t){this._u.push(t)},t.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},t.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},t.prototype.uu=function(){Vr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},t.prototype.lu=function(){Vr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},t.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Qc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},$c=function(){function t(t){this.du=t.du,this.wu=t.wu}return t.prototype.Eu=function(t){this.Tu=t},t.prototype.Iu=function(t){this.mu=t},t.prototype.onMessage=function(t){this.Au=t},t.prototype.close=function(){this.wu()},t.prototype.send=function(t){this.du(t)},t.prototype.Ru=function(){this.Tu()},t.prototype.Pu=function(t){this.mu(t)},t.prototype.yu=function(t){this.Au(t)},t}(),Zc=function(t){function n(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.I=e.I,n}return Object(e.f)(n,t),n.prototype.Du=function(t,e,n,r){return new Promise((function(i,o){var s=new hr;s.listenOnce(or.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case ir.NO_ERROR:var e=s.getResponseJson();Vr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ir.TIMEOUT:Vr("Connection",'RPC "'+t+'" timed out'),o(new $r(Qr.DEADLINE_EXCEEDED,"Request time out"));break;case ir.HTTP_ERROR:var n=s.getStatus();if(Vr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Qr).indexOf(e)>=0?e:Qr.UNKNOWN}(r.status);o(new $r(u,r.message))}else o(new $r(Qr.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new $r(Qr.UNAVAILABLE,"Connection failed."));break;default:zr()}}finally{Vr("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);s.send(e,"POST",u,n,15)}))},n.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Zn,o=te(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(s.initMessageHeaders,e),Object(r.h)()||Object(r.i)()||Object(r.l)()||Object(r.n)()||Object(r.o)()||Object(r.e)()||(s.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");Vr("Connection","Creating WebChannel: "+u,s);var a=i.createWebChannel(u,s),c=!1,h=!1,f=new $c({du:function(t){h?Vr("Connection","Not sending because WebChannel is closed:",t):(c||(Vr("Connection","Opening WebChannel transport."),a.open(),c=!0),Vr("Connection","WebChannel sending:",t),a.send(t))},wu:function(){return a.close()}}),l=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return l(a,cr.EventType.OPEN,(function(){h||Vr("Connection","WebChannel transport opened.")})),l(a,cr.EventType.CLOSE,(function(){h||(h=!0,Vr("Connection","WebChannel transport closed"),f.Pu())})),l(a,cr.EventType.ERROR,(function(t){h||(h=!0,qr("Connection","WebChannel transport errored:",t),f.Pu(new $r(Qr.UNAVAILABLE,"The operation could not be completed")))})),l(a,cr.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Hr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Vr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=ys[t];if(void 0!==e)return Es(e)}(o),u=i.message;void 0===s&&(s=Qr.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),h=!0,f.Pu(new $r(s,u)),a.close()}else Vr("Connection","WebChannel received:",n),f.yu(n)}})),l(o,sr.STAT_EVENT,(function(t){t.stat===ur?Vr("Connection","Detected buffering proxy"):t.stat===ar&&Vr("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Ru()}),0),f},n}(function(){function t(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}return t.prototype.bu=function(t,e,n,r){var i=this.vu(t,e);Vr("RestConnection","Sending: ",i,n);var o={};return this.Su(o,r),this.Du(t,i,o,n).then((function(t){return Vr("RestConnection","Received: ",t),t}),(function(e){throw qr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},t.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.1",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},t.prototype.vu=function(t,e){var n=Qc[t];return this.Vu+"/v1/"+e+":"+n},t}());function th(){return"undefined"!=typeof window?window:null}function eh(){return"undefined"!=typeof document?document:null}function nh(t){return new $s(t,!0)}var rh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.no=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.Lu=Date.now(),this.reset()}return t.prototype.reset=function(){this.ku=0},t.prototype.$u=function(){this.ku=this.Ou},t.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.Lu),i=Math.max(0,n-r);i>0&&Vr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.no.mr(this.ds,i,(function(){return e.Lu=Date.now(),t()})),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},t.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},t.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},t.prototype.qu=function(){return(Math.random()-.5)*this.ku},t}(),ih=function(){function t(t,e,n,r,i,o){this.no=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new rh(t,e)}return t.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Ju=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Yu()},t.prototype.stop=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Xu=function(){this.state=0,this.zu.reset()},t.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.no.mr(this.Qu,6e4,(function(){return t.th()})))},t.prototype.eh=function(t){this.nh(),this.stream.send(t)},t.prototype.th=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){return this.Ju()?[2,this.close(0)]:[2]}))}))},t.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},t.prototype.close=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==t?this.zu.reset():n&&n.code===Qr.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.zu.$u()):n&&n.code===Qr.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Iu(n)];case 1:return e.sent(),[2]}}))}))},t.prototype.sh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.ih(this.ju),n=this.ju;this.Wu.getToken().then((function(e){t.ju===n&&t.rh(e)}),(function(n){e((function(){var e=new $r(Qr.UNKNOWN,"Fetching auth token failed: "+n.message);return t.oh(e)}))}))},t.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu((function(){n((function(){return e.state=2,e.listener.Eu()}))})),this.stream.Iu((function(t){n((function(){return e.oh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu((function(){return Object(e.b)(t,void 0,void 0,(function(){return Object(e.c)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.oh=function(t){return Vr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.ih=function(t){var e=this;return function(n){e.no.ys((function(){return e.ju===t?n():(Vr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),oh=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Kt=i,s}return Object(e.f)(n,t),n.prototype.ah=function(t){return this.Ku.xu("Listen",t)},n.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:zr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.qt?(Hr(void 0===e||"string"==typeof e),Yr.fromBase64String(e||"")):(Hr(void 0===e||e instanceof Uint8Array),Yr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Qr.UNKNOWN:Es(t.code);return new $r(e,t.message||"")}(u);n=new Gs(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=su(t,r.document.name),o=nu(r.document.updateTime);var u=new Ji({mapValue:{fields:r.document.fields}}),a=(s=new Qi(i,o,u,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Hs(a,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=su(t,r.document),o=r.readTime?nu(r.readTime):di.min(),u=new $i(i,o),s=r.removedTargetIds||[],n=new Hs([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=su(t,r.document),o=r.removedTargetIds||[],n=new Hs([],o,i,null);else{if(!("filter"in e))return zr();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new ws(r),o=h.targetId,n=new Bs(o,i)}return n}(this.Kt,t),n=function(t){if(!("targetChange"in t))return di.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?di.min():e.readTime?nu(e.readTime):di.min()}(t);return this.listener.uh(e,n)},n.prototype.hh=function(t){var e={};e.database=cu(this.Kt),e.addTarget=function(t,e){var n,r=e.target;return(n=io(r)?{documents:du(t,r)}:{query:vu(t,r)}).targetId=e.targetId,e.resumeToken.o()>0?n.resumeToken=tu(t,e.resumeToken):e.Mt.u(di.min())>0&&(n.readTime=Zs(t,e.Mt.G())),n}(this.Kt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zr()}}(0,e.kt);return null==n?null:{"goog-listen-tags":n}}(this.Kt,t);n&&(e.labels=n),this.eh(e)},n.prototype.lh=function(t){var e={};e.database=cu(this.Kt),e.removeTarget=t,this.eh(e)},n}(ih),sh=function(t){function n(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Kt=i,s._h=!1,s}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),n.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},n.prototype.sh=function(){this._h&&this.dh([])},n.prototype.ah=function(t){return this.Ku.xu("Write",t)},n.prototype.onMessage=function(t){if(Hr(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=function(t,e){return t&&t.length>0?(Hr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?nu(t.updateTime):nu(e);n.isEqual(di.min())&&(n=nu(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new es(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=nu(t.commitTime);return this.listener.wh(n,e)}return Hr(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},n.prototype.Th=function(){var t={};t.database=cu(this.Kt),this.eh(t)},n.prototype.dh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return lu(e.Kt,t)}))};this.eh(n)},n}(ih),uh=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Ku=n,i.Kt=r,i.Ih=!1,i}return Object(e.f)(n,t),n.prototype.mh=function(){if(this.Ih)throw new $r(Qr.FAILED_PRECONDITION,"The client has already been terminated.")},n.prototype.bu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.bu(t,e,n,i)})).catch((function(t){throw t.code===Qr.UNAUTHENTICATED&&r.credentials.v(),t}))},n.prototype.Cu=function(t,e,n){var r=this;return this.mh(),this.credentials.getToken().then((function(i){return r.Ku.Cu(t,e,n,i)})).catch((function(t){throw t.code===Qr.UNAUTHENTICATED&&r.credentials.v(),t}))},n.prototype.terminate=function(){this.Ih=!1},n}((function(){})),ah=function(){function t(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}return t.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.mr("online_state_timeout",1e4,(function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()})))},t.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,this.Ah>=1&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},t.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},t.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},t.prototype.Vh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(Ur(e),this.Ph=!1):Vr("OnlineStateTracker",e)},t.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},t}(),ch=function(t,n,r,i,o){var s=this;this.Sh=t,this.Dh=n,this.fs=r,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=o,this.kh.cu((function(t){r.ys((function(){return Object(e.b)(s,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return mh(this)?(Vr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(n=Br(t)).Fh.add(4),[4,fh(n)];case 1:return e.sent(),n.Mh.set("Unknown"),n.Fh.delete(4),[4,hh(n)];case 2:return e.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Mh=new ah(r,i)};function hh(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.c)(this,(function(e){switch(e.label){case 0:if(!mh(t))return[3,4];n=0,r=t.Oh,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!0)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function fh(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.c)(this,(function(e){switch(e.label){case 0:n=0,r=t.Oh,e.label=1;case 1:return n<r.length?[4,(0,r[n])(!1)]:[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function lh(t,e){var n=Br(t);n.Nh.has(e.targetId)||(n.Nh.set(e.targetId,e),gh(n)?yh(n):Ch(n).Ju()&&dh(n,e))}function ph(t,e){var n=Br(t),r=Ch(n);n.Nh.delete(e),r.Ju()&&vh(n,e),0===n.Nh.size&&(r.Ju()?r.Zu():mh(n)&&n.Mh.set("Unknown"))}function dh(t,e){t.Lh.cn(e.targetId),Ch(t).hh(e)}function vh(t,e){t.Lh.cn(e),Ch(t).lh(e)}function yh(t){t.Lh=new Js({Sn:function(e){return t.Ch.Sn(e)},Dn:function(e){return t.Nh.get(e)||null}}),Ch(t).start(),t.Mh.yh()}function gh(t){return mh(t)&&!Ch(t).Hu()&&t.Nh.size>0}function mh(t){return 0===Br(t).Fh.size}function bh(t){t.Lh=void 0}function wh(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){return t.Nh.forEach((function(e,n){dh(t,e)})),[2]}))}))}function Ih(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){return bh(t),gh(t)?(t.Mh.ph(n),yh(t)):t.Mh.set("Unknown"),[2]}))}))}function Eh(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s;return Object(e.c)(this,(function(u){switch(u.label){case 0:if(t.Mh.set("Online"),!(n instanceof Gs&&2===n.state&&n.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(e.c)(this,(function(e){switch(e.label){case 0:r=n.cause,i=0,o=n.targetIds,e.label=1;case 1:return i<o.length?(s=o[i],t.Nh.has(s)?[4,t.Ch.$h(s,r)]:[3,3]):[3,5];case 2:e.sent(),t.Nh.delete(s),t.Lh.removeTarget(s),e.label=3;case 3:e.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,n)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),Vr("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),i),[4,_h(t,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(n instanceof Hs?t.Lh.wn(n):n instanceof Bs?t.Lh.yn(n):t.Lh.In(n),r.isEqual(di.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,wc(t.Sh)];case 8:return o=u.sent(),r.u(o)>=0?[4,function(t,e){var n=t.Lh.pn(e);return n.Oe.forEach((function(n,r){if(n.resumeToken.o()>0){var i=t.Nh.get(r);i&&t.Nh.set(r,i.$t(n.resumeToken,e))}})),n.ke.forEach((function(e){var n=t.Nh.get(e);if(n){t.Nh.set(e,n.$t(Yr.h,n.Mt)),vh(t,e);var r=new Vo(n.target,e,1,n.sequenceNumber);dh(t,r)}})),t.Ch.Bh(n)}(t,r)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return Vr("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,_h(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function _h(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:if(!Pu(n))throw n;return t.Fh.add(1),[4,fh(t)];case 1:return o.sent(),t.Mh.set("Offline"),r||(r=function(){return wc(t.Sh)}),t.fs.vo((function(){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return Vr("RemoteStore","Retrying IndexedDB access"),[4,r()];case 1:return e.sent(),t.Fh.delete(1),[4,hh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Th(t,e){return e().catch((function(n){return _h(t,n,e)}))}function Oh(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(e.c)(this,(function(e){switch(e.label){case 0:n=Br(t),r=Ph(n),i=n.xh.length>0?n.xh[n.xh.length-1].batchId:-1,e.label=1;case 1:if(!function(t){return mh(t)&&t.xh.length<10}(n))return[3,7];e.label=2;case 2:return e.trys.push([2,4,,6]),[4,Ec(n.Sh,i)];case 3:return null===(o=e.sent())?(0===n.xh.length&&r.Zu(),[3,7]):(i=o.batchId,function(t,e){t.xh.push(e);var n=Ph(t);n.Ju()&&n.fh&&n.dh(e.mutations)}(n,o),[3,6]);case 4:return s=e.sent(),[4,_h(n,s)];case 5:return e.sent(),[3,6];case 6:return[3,1];case 7:return Nh(n)&&Ah(n),[2]}}))}))}function Nh(t){return mh(t)&&!Ph(t).Hu()&&t.xh.length>0}function Ah(t){Ph(t).start()}function Sh(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){return Ph(t).Th(),[2]}))}))}function jh(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(e.c)(this,(function(e){for(n=Ph(t),r=0,i=t.xh;r<i.length;r++)o=i[r],n.dh(o.mutations);return[2]}))}))}function xh(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:return i=t.xh.shift(),o=pa.from(i,n,r),[4,Th(t,(function(){return t.Ch.qh(o)}))];case 1:return e.sent(),[4,Oh(t)];case 2:return e.sent(),[2]}}))}))}function Dh(t,n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(r){switch(r.label){case 0:return n&&Ph(t).fh?[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return Is(i=n.code)&&i!==Qr.ABORTED?(r=t.xh.shift(),Ph(t).Xu(),[4,Th(t,(function(){return t.Ch.Uh(r.batchId,n)}))]):[3,3];case 1:return e.sent(),[4,Oh(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}(t,n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return Nh(t)&&Ah(t),[2]}}))}))}function kh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Br(t),n?(r.Fh.delete(2),[4,hh(r)]):[3,2];case 1:return e.sent(),[3,5];case 2:return n?[3,4]:(r.Fh.add(2),[4,fh(r)]);case 3:e.sent(),r.Mh.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))}function Ch(t){var n=this;return t.Qh||(t.Qh=function(t,e,n){var r=Br(t);return r.mh(),new oh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:wh.bind(null,t),Iu:Ih.bind(null,t),uh:Eh.bind(null,t)}),t.Oh.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return r?(t.Qh.Xu(),gh(t)?yh(t):t.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Qh.stop()];case 2:e.sent(),bh(t),e.label=3;case 3:return[2]}}))}))}))),t.Qh}function Ph(t){var n=this;return t.Kh||(t.Kh=function(t,e,n){var r=Br(t);return r.mh(),new sh(e,r.Ku,r.credentials,r.Kt,n)}(t.Dh,t.fs,{Eu:Sh.bind(null,t),Iu:Dh.bind(null,t),Eh:jh.bind(null,t),wh:xh.bind(null,t)}),t.Oh.push((function(r){return Object(e.b)(n,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return r?(t.Kh.Xu(),[4,Oh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kh.stop()];case 3:e.sent(),t.xh.length>0&&(Vr("RemoteStore","Stopping write stream with "+t.xh.length+" pending writes"),t.xh=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kh}var Lh=function(){this.Wh=void 0,this.listeners=[]},Rh=function(){this.queries=new La((function(t){return Co(t)}),ko),this.onlineState="Unknown",this.jh=new Set};function Mh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c;return Object(e.c)(this,(function(e){switch(e.label){case 0:if(r=Br(t),i=n.query,o=!1,(s=r.queries.get(i))||(o=!0,s=new Lh),!o)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),u=s,[4,r.Gh(i)];case 2:return u.Wh=e.sent(),[3,4];case 3:return a=e.sent(),c=qu(a,"Initialization of query '"+Po(n.query)+"' failed"),[2,void n.onError(c)];case 4:return r.queries.set(i,s),s.listeners.push(n),n.zh(r.onlineState),s.Wh&&n.Hh(s.Wh)&&Fh(r),[2]}}))}))}function Vh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e.c)(this,(function(e){return r=Br(t),i=n.query,o=!1,(s=r.queries.get(i))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(r.queries.delete(i),r.Jh(i))]:[2]}))}))}function Uh(t,e){for(var n=Br(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,a=n.queries.get(u);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Hh(s)&&(r=!0);a.Wh=s}}r&&Fh(n)}function qh(t,e,n){var r=Br(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Fh(t){t.jh.forEach((function(t){t.next()}))}var zh=function(){function t(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qs(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},t.prototype.onError=function(t){this.Yh.error(t)},t.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},t.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},t.prototype.tl=function(t){if(t.docChanges.length>0)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.nl=function(t){t=qs.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},t}(),Hh=function(t){this.key=t},Bh=function(t){this.key=t},Gh=function(){function t(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Ls(),this.Ce=Ls(),this.ll=Ro(t),this._l=new Vs(this.ll)}return Object.defineProperty(t.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),t.prototype.dl=function(t,e){var n=this,r=e?e.wl:new Us,i=e?e._l:this._l,o=e?e.Ce:this.Ce,s=i,u=!1,a=To(this.query)&&i.size===this.query.limit?i.last():null,c=Oo(this.query)&&i.size===this.query.limit?i.first():null;if(t.Zt((function(t,e){var h=i.get(t),f=e instanceof Qi?e:null;f&&(f=Lo(n.query,f)?f:null);var l=!!h&&n.Ce.has(h.key),p=!!f&&(f.bt||n.Ce.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.El(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n.ll(f,a)>0||c&&n.ll(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),To(this.query)||Oo(this.query))for(;s.size>this.query.limit;){var h=To(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{_l:s,wl:r,_c:u,Ce:o}},t.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},t.prototype.Ti=function(t,e,n){var r=this,i=this._l;this._l=t._l,this.Ce=t.Ce;var o=t.wl.Se();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zr()}};return n(t)-n(e)}(t.type,e.type)||r.ll(t.doc,e.doc)})),this.Tl(n);var s=e?this.Il():[],u=0===this.hl.size&&this.qe?1:0,a=u!==this.ul;return this.ul=u,0!==o.length||a?{snapshot:new qs(this.query,t._l,i,o,t.Ce,0===u,a,!1),ml:s}:{ml:s}},t.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ti({_l:this._l,wl:new Us,Ce:this.Ce,_c:!1},!1)):{ml:[]}},t.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},t.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach((function(t){return e.al=e.al.add(t)})),t.Qe.forEach((function(t){})),t.Ke.forEach((function(t){return e.al=e.al.delete(t)})),this.qe=t.qe)},t.prototype.Il=function(){var t=this;if(!this.qe)return[];var e=this.hl;this.hl=Ls(),this._l.forEach((function(e){t.Al(e.key)&&(t.hl=t.hl.add(e.key))}));var n=[];return e.forEach((function(e){t.hl.has(e)||n.push(new Bh(e))})),this.hl.forEach((function(t){e.has(t)||n.push(new Hh(t))})),n},t.prototype.Rl=function(t){this.al=t.Pc,this.hl=Ls();var e=this.dl(t.documents);return this.Ti(e,!0)},t.prototype.Pl=function(){return qs.Fe(this.query,this._l,this.Ce,0===this.ul)},t}(),Kh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Jh=function(t){this.key=t,this.yl=!1},Xh=function(){function t(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new La((function(t){return Co(t)}),ko),this.Dl=new Map,this.Cl=[],this.xl=new _s(bi.J),this.Nl=new Map,this.Fl=new xc,this.Ol={},this.kl=new Map,this.Ml=Ba.qi(),this.onlineState="Unknown",this.Ll=void 0}return Object.defineProperty(t.prototype,"$l",{get:function(){return!0===this.Ll},enumerable:!1,configurable:!0}),t}();function Wh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Of(t),(s=r.Sl.get(n))?(i=s.targetId,r.pl.ka(i),o=s.view.Pl(),[3,4]):[3,1];case 1:return[4,_c(r.Sh,xo(n))];case 2:return u=e.sent(),a=r.pl.ka(u.targetId),i=u.targetId,[4,Yh(r,n,i,"current"===a)];case 3:o=e.sent(),r.$l&&lh(r.gl,u),e.label=4;case 4:return[2,o]}}))}))}function Yh(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u,a,c,h;return Object(e.c)(this,(function(f){switch(f.label){case 0:return t.Bl=function(n,r,i){return function(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(o=n.view.dl(r))._c?[4,Oc(t.Sh,n.query,!1).then((function(t){var e=t.documents;return n.view.dl(e,o)}))]:[3,2];case 1:o=e.sent(),e.label=2;case 2:return s=i&&i.Oe.get(n.targetId),u=n.view.Ti(o,t.$l,s),[2,(hf(t,n.targetId,u.ml),u.snapshot)]}}))}))}(t,n,r,i)},[4,Oc(t.Sh,n,!0)];case 1:return o=f.sent(),s=new Gh(n,o.Pc),u=s.dl(o.documents),a=zs.Be(r,i&&"Offline"!==t.onlineState),c=s.Ti(u,t.$l,a),hf(t,r,c.ml),h=new Kh(n,r,s),[2,(t.Sl.set(n,h),t.Dl.has(r)?t.Dl.get(r).push(n):t.Dl.set(r,[n]),c.snapshot)]}}))}))}function Qh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Br(t),i=r.Sl.get(n),(o=r.Dl.get(i.targetId)).length>1?[2,(r.Dl.set(i.targetId,o.filter((function(t){return!ko(t,n)}))),void r.Sl.delete(n))]:r.$l?(r.pl.La(i.targetId),r.pl.Ca(i.targetId)?[3,2]:[4,Tc(r.Sh,i.targetId,!1).then((function(){r.pl.Ba(i.targetId),ph(r.gl,i.targetId),af(r,i.targetId)})).catch(Pa)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return af(r,i.targetId),[4,Tc(r.Sh,i.targetId,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}}))}))}function $h(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.c)(this,(function(e){switch(e.label){case 0:i=Nf(t),e.label=1;case 1:return e.trys.push([1,5,,6]),[4,function(t,e){var n,r=Br(t),i=pi.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ls());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Ic.Zo(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=us(c,n.get(c.key));null!=h&&s.push(new fs(c.key,h,Wi(h.proto.mapValue),ns.exists(!0)))}return r.Ho.yi(t,i,s,e)}))})).then((function(t){var e=t.Fs(n);return{batchId:t.batchId,ci:e}}))}(i.Sh,n)];case 2:return o=e.sent(),i.pl.xa(o.batchId),function(t,e,n){var r=t.Ol[t.currentUser.R()];r||(r=new _s(Jr)),r=r.Ht(e,n),t.Ol[t.currentUser.R()]=r}(i,o.batchId,r),[4,pf(i,o.ci)];case 3:return e.sent(),[4,Oh(i.gl)];case 4:return e.sent(),[3,6];case 5:return s=e.sent(),u=qu(s,"Failed to persist write"),r.reject(u),[3,6];case 6:return[2]}}))}))}function Zh(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.c)(this,(function(e){switch(e.label){case 0:r=Br(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,Ic(r.Sh,n)];case 2:return i=e.sent(),n.Oe.forEach((function(t,e){var n=r.Nl.get(e);n&&(Hr(t.Ue.size+t.Qe.size+t.Ke.size<=1),t.Ue.size>0?n.yl=!0:t.Qe.size>0?Hr(n.yl):t.Ke.size>0&&(Hr(n.yl),n.yl=!1))})),[4,pf(r,i,n)];case 3:return e.sent(),[3,6];case 4:return[4,Pa(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function tf(t,e,n){var r=Br(t);if(r.$l&&0===n||!r.$l&&1===n){var i=[];r.Sl.forEach((function(t,n){var r=n.view.zh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Br(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zh(e)&&(r=!0)})),r&&Fh(n)}(r.Vl,e),i.length&&r.vl.uh(i),r.onlineState=e,r.$l&&r.pl.Ka(e)}}function ef(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(i=Br(t)).pl.qa(n,"rejected",r),o=i.Nl.get(n),(s=o&&o.key)?(u=(u=new _s(bi.J)).Ht(s,new $i(s,di.min())),a=Ls().add(s),c=new Fs(di.min(),new Map,new Ns(Jr),u,a),[4,Zh(i,c)]):[3,2];case 1:return e.sent(),i.xl=i.xl.remove(s),i.Nl.delete(n),lf(i),[3,4];case 2:return[4,Tc(i.Sh,n,!1).then((function(){return af(i,n,r)})).catch(Pa)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}function nf(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:r=Br(t),i=n.batch.batchId,e.label=1;case 1:return e.trys.push([1,4,,6]),[4,bc(r.Sh,n)];case 2:return o=e.sent(),uf(r,i,null),sf(r,i),r.pl.Fa(i,"acknowledged"),[4,pf(r,o)];case 3:return e.sent(),[3,6];case 4:return[4,Pa(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function rf(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:i=Br(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,function(t,e){var n=Br(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Ho.gi(t,e).next((function(e){return Hr(null!==e),r=e.keys(),n.Ho.Ni(t,e)})).next((function(){return n.Ho.ki(t)})).next((function(){return n.Ic.Zo(t,r)}))}))}(i.Sh,n)];case 2:return o=e.sent(),uf(i,n,r),sf(i,n),i.pl.Fa(n,"rejected",r),[4,pf(i,o)];case 3:return e.sent(),[3,6];case 4:return[4,Pa(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}function of(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(e.c)(this,(function(e){switch(e.label){case 0:mh((r=Br(t)).gl)||Vr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(t){var e=Br(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Ho.bi(t)}))}(r.Sh)];case 2:return-1===(i=e.sent())?[2,void n.resolve()]:((o=r.kl.get(i)||[]).push(n),r.kl.set(i,o),[3,4]);case 3:return s=e.sent(),u=qu(s,"Initialization of waitForPendingWrites() operation failed"),n.reject(u),[3,4];case 4:return[2]}}))}))}function sf(t,e){(t.kl.get(e)||[]).forEach((function(t){t.resolve()})),t.kl.delete(e)}function uf(t,e,n){var r=Br(t),i=r.Ol[r.currentUser.R()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i}}function af(t,e,n){void 0===n&&(n=null),t.pl.La(e);for(var r=0,i=t.Dl.get(e);r<i.length;r++){var o=i[r];t.Sl.delete(o),n&&t.vl.ql(o,n)}t.Dl.delete(e),t.$l&&t.Fl.kc(e).forEach((function(e){t.Fl.Mi(e)||cf(t,e)}))}function cf(t,e){var n=t.xl.get(e);null!==n&&(ph(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),lf(t))}function hf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Hh?(t.Fl.ir(o.key,e),ff(t,o)):o instanceof Bh?(Vr("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.cr(o.key,e),t.Fl.Mi(o.key)||cf(t,o.key)):zr()}}function ff(t,e){var n=e.key;t.xl.get(n)||(Vr("SyncEngine","New document in limbo: "+n),t.Cl.push(n),lf(t))}function lf(t){for(;t.Cl.length>0&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new Jh(e)),t.xl=t.xl.Ht(e,n),lh(t.gl,new Vo(xo(_o(e.path)),n,2,li.U))}}function pf(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u;return Object(e.c)(this,(function(a){switch(a.label){case 0:return i=Br(t),o=[],s=[],u=[],i.Sl.nt()?[3,3]:(i.Sl.forEach((function(t,e){u.push(i.Bl(e,n,r).then((function(t){if(t){i.$l&&i.pl.qa(e.targetId,t.fromCache?"not-current":"current"),o.push(t);var n=dc.cc(e.targetId,t);s.push(n)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.vl.uh(o),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f;return Object(e.c)(this,(function(e){switch(e.label){case 0:r=Br(t),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return ju.forEach(n,(function(e){return ju.forEach(e.rc,(function(n){return r.persistence.mi.ir(t,e.targetId,n)})).next((function(){return ju.forEach(e.oc,(function(n){return r.persistence.mi.cr(t,e.targetId,n)}))}))}))}))];case 2:return e.sent(),[3,4];case 3:if(!Pu(i=e.sent()))throw i;return Vr("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=n;o<s.length;o++)u=s[o],a=u.targetId,u.fromCache||(c=r.dc.get(a),h=c.Mt,f=c.Bt(h),r.dc=r.dc.Ht(a,f));return[2]}}))}))}(i.Sh,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function df(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(r=Br(t)).currentUser.isEqual(n)?[3,3]:(Vr("SyncEngine","User change. New user:",n.R()),[4,mc(r.Sh,n)]);case 1:return i=e.sent(),r.currentUser=n,function(t,e){t.kl.forEach((function(t){t.forEach((function(t){t.reject(new $r(Qr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.kl.clear()}(r),r.pl.Qa(n,i.Ac,i.Rc),[4,pf(r,i.mc)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))}function vf(t,e){var n=Br(t),r=n.Nl.get(e);if(r&&r.yl)return Ls().add(r.key);var i=Ls(),o=n.Dl.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var a=u[s],c=n.Sl.get(a);i=i.ye(c.view.fl)}return i}function yf(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,Oc((r=Br(t)).Sh,n.query,!0)];case 1:return i=e.sent(),o=n.view.Rl(i),[2,(r.$l&&hf(r,n.targetId,o.ml),o)]}}))}))}function gf(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){return[2,Ac((n=Br(t)).Sh).then((function(t){return pf(n,t)}))]}))}))}function mf(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,function(t,e){var n=Br(t),r=Br(n.Ho);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Vi(t,e).next((function(e){return e?n.Ic.Zo(t,e):ju.resolve(null)}))}))}((o=Br(t)).Sh,n)];case 1:return null===(s=e.sent())?[3,6]:"pending"!==r?[3,3]:[4,Oh(o.gl)];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(uf(o,n,i||null),sf(o,n),function(t,e){Br(Br(t).Ho).Fi(e)}(o.Sh,n)):zr(),e.label=4;case 4:return[4,pf(o,s)];case 5:return e.sent(),[3,7];case 6:Vr("SyncEngine","Cannot apply mutation batch with id: "+n),e.label=7;case 7:return[2]}}))}))}function bf(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h;return Object(e.c)(this,(function(e){switch(e.label){case 0:return Of(r=Br(t)),Nf(r),!0!==n||!0===r.Ll?[3,3]:(i=r.pl.Sa(),[4,wf(r,i.rt())]);case 1:return o=e.sent(),r.Ll=!0,[4,kh(r.gl,!0)];case 2:for(e.sent(),s=0,u=o;s<u.length;s++)a=u[s],lh(r.gl,a);return[3,7];case 3:return!1!==n||!1===r.Ll?[3,7]:(c=[],h=Promise.resolve(),r.Dl.forEach((function(t,e){r.pl.$a(e)?c.push(e):h=h.then((function(){return af(r,e),Tc(r.Sh,e,!0)})),ph(r.gl,e)})),[4,h]);case 4:return e.sent(),[4,wf(r,c)];case 5:return e.sent(),function(t){var e=Br(t);e.Nl.forEach((function(t,n){ph(e.gl,n)})),e.Fl.Mc(),e.Nl=new Map,e.xl=new _s(bi.J)}(r),r.Ll=!1,[4,kh(r.gl,!1)];case 6:e.sent(),e.label=7;case 7:return[2]}}))}))}function wf(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l,p,d,v,y;return Object(e.c)(this,(function(e){switch(e.label){case 0:r=Br(t),i=[],o=[],s=0,u=n,e.label=1;case 1:return s<u.length?(a=u[s],c=void 0,(h=r.Dl.get(a))&&0!==h.length?[4,_c(r.Sh,xo(h[0]))]:[3,7]):[3,13];case 2:c=e.sent(),f=0,l=h,e.label=3;case 3:return f<l.length?(p=l[f],d=r.Sl.get(p),[4,yf(r,d)]):[3,6];case 4:(v=e.sent()).snapshot&&o.push(v.snapshot),e.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,Nc(r.Sh,a)];case 8:return y=e.sent(),[4,_c(r.Sh,y)];case 9:return c=e.sent(),[4,Yh(r,If(y),a,!1)];case 10:e.sent(),e.label=11;case 11:i.push(c),e.label=12;case 12:return s++,[3,1];case 13:return[2,(r.vl.uh(o),i)]}}))}))}function If(t){return Eo(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ef(t){var e=Br(t);return Br(Br(e.Sh).persistence).Ko()}function _f(t,n,r,i){return Object(e.b)(this,void 0,void 0,(function(){var o,s,u;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(o=Br(t)).Ll?(Vr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Dl.has(n))return[3,8];switch(r){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ac(o.Sh)];case 3:return s=e.sent(),u=Fs.$e(n,"current"===r),[4,pf(o,s,u)];case 4:return e.sent(),[3,8];case 5:return[4,Tc(o.Sh,n,!0)];case 6:return e.sent(),af(o,n,i),[3,8];case 7:zr(),e.label=8;case 8:return[2]}}))}))}function Tf(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a,c,h,f,l,p;return Object(e.c)(this,(function(d){switch(d.label){case 0:if(!(i=Of(t)).Ll)return[3,10];o=0,s=n,d.label=1;case 1:return o<s.length?(u=s[o],i.Dl.has(u)?(Vr("SyncEngine","Adding an already active target "+u),[3,5]):[4,Nc(i.Sh,u)]):[3,6];case 2:return a=d.sent(),[4,_c(i.Sh,a)];case 3:return c=d.sent(),[4,Yh(i,If(a),c.targetId,!1)];case 4:d.sent(),lh(i.gl,c),d.label=5;case 5:return o++,[3,1];case 6:h=function(t){return Object(e.c)(this,(function(e){switch(e.label){case 0:return i.Dl.has(t)?[4,Tc(i.Sh,t,!1).then((function(){ph(i.gl,t),af(i,t)})).catch(Pa)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},f=0,l=r,d.label=7;case 7:return f<l.length?(p=l[f],[5,h(p)]):[3,10];case 8:d.sent(),d.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function Of(t){var e=Br(t);return e.gl.Ch.Bh=Zh.bind(null,e),e.gl.Ch.Sn=vf.bind(null,e),e.gl.Ch.$h=ef.bind(null,e),e.vl.uh=Uh.bind(null,e.Vl),e.vl.ql=qh.bind(null,e.Vl),e}function Nf(t){var e=Br(t);return e.gl.Ch.qh=nf.bind(null,e),e.gl.Ch.Uh=rf.bind(null,e),e}var Af=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return this.Kt=nh(t.gu.T),this.pl=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Sh=this.Jl(t),[2]}}))}))},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return gc(this.persistence,new vc,t.Yl,this.Kt)},t.prototype.Gl=function(t){return new Rc(Vc.ra,this.Kt)},t.prototype.jl=function(t){return new Xc},t.prototype.terminate=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}}))}))},t}(),Sf=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(e.f)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return e.sent(),[4,Sc(this.Sh)];case 2:return e.sent(),[4,this.Xl.initialize(this,n)];case 3:return e.sent(),[4,Nf(this.Xl.fa)];case 4:return e.sent(),[4,Oh(this.Xl.gl)];case 5:return e.sent(),[2]}}))}))},n.prototype.Jl=function(t){return gc(this.persistence,new vc,t.Yl,this.Kt)},n.prototype.Hl=function(t){var e=this.persistence.mi.dr;return new Qa(e,t.fs)},n.prototype.Gl=function(t){var e=lc(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?Ca.Zs(this.cacheSizeBytes):Ca.ni;return new cc(this.synchronizeTabs,e,t.clientId,n,t.fs,th(),eh(),this.Kt,this.pl,!!this.forceOwnership)},n.prototype.jl=function(t){return new Xc},n}(Af),jf=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(e.f)(n,t),n.prototype.initialize=function(n){return Object(e.b)(this,void 0,void 0,(function(){var r,i=this;return Object(e.c)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Xl.fa,this.pl instanceof Jc?(this.pl.fa={nu:mf.bind(null,r),su:_f.bind(null,r),iu:Tf.bind(null,r),Ko:Ef.bind(null,r),eu:gf.bind(null,r)},[4,this.pl.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.yo((function(t){return Object(e.b)(i,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,bf(this.Xl.fa,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.Ir?this.zl.start(this.Sh):t||this.zl.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},n.prototype.jl=function(t){var e=th();if(!Jc.Wn(e))throw new $r(Qr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=lc(t.gu.T,t.gu.persistenceKey);return new Jc(e,t.fs,n,t.clientId,t.Yl)},n}(Sf),xf=function(){function t(){}return t.prototype.initialize=function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:return this.Sh?[3,2]:(this.Sh=t.Sh,this.pl=t.pl,this.Dh=this.Zl(n),this.gl=this.t_(n),this.Vl=this.e_(n),this.fa=this.n_(n,!t.synchronizeTabs),this.pl.da=function(t){return tf(r.fa,t,1)},this.gl.Ch.s_=df.bind(null,this.fa),[4,kh(this.gl,this.fa.$l)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.e_=function(t){return new Rh},t.prototype.Zl=function(t){var e,n=nh(t.gu.T),r=(e=t.gu,new Zc(e));return function(t,e,n){return new uh(t,e,n)}(t.credentials,r,n)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Sh,n=this.Dh,r=t.fs,i=function(t){return tf(s.fa,t,0)},o=Yc.Wn()?new Yc:new Wc,new ch(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var u=new Xh(t,e,n,r,i,o);return s&&(u.Ll=!0),u}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},t.prototype.terminate=function(){return function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=Br(t),Vr("RemoteStore","RemoteStore shutting down."),n.Fh.add(5),[4,fh(n)];case 1:return e.sent(),n.kh.$o(),n.Mh.set("Unknown"),[2]}}))}))}(this.gl)},t}(),Df=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),kf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new $r(Qr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new mi(t)}return t.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},t}(),Cf=function(t){this._methodName=t};function Pf(t,e,n){if(!n)throw new $r(Qr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Lf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $r(Qr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Rf(t,e,n,r){if(!0===e&&!0===r)throw new $r(Qr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Mf(t){if(!bi.Et(t))throw new $r(Qr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Vf(t){if(bi.Et(t))throw new $r(Qr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Uf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":zr()}function qf(t,e){if("_delegate"in t&&(t=t._),!(t instanceof e)){if(e.name===t.constructor.name)throw new $r(Qr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Uf(t);throw new $r(Qr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ff(t,e){if(e<=0)throw new $r(Qr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var zf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new $r(Qr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new $r(Qr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Rf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Hf=new Map,Bf=function(){function t(t,e){this.w_="(lite)",this.E_=new zf({}),this.T_=!1,t instanceof oi?(this.I_=t,this.m_=new ai):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $r(Qr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oi(t.options.projectId)}(t),this.m_=new ci(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new $r(Qr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new $r(Qr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new zf(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ai;switch(t.type){case"gapi":var e=t.client;return Hr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new fi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new $r(Qr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.b_=function(){return this,(t=Hf.get(this))&&(Vr("ComponentProvider","Removing Datastore"),Hf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Gf=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Jf(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),Kf=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),Jf=function(t){function n(e,n,r){var i=this;return(i=t.call(this,e,n,_o(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new Gf(this.firestore,null,new bi(t))},enumerable:!1,configurable:!0}),n.prototype.withConverter=function(t){return new n(this.firestore,t,this.D_)},n}(Kf);function Xf(t,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t instanceof ti&&(t=t._),Pf("collection","path",n),t instanceof Bf)return Vf(r=yi.ct.apply(yi,Object(e.h)([n],i))),new Jf(t,null,r);if(!(t instanceof Gf||t instanceof Jf))throw new $r(Qr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Vf(r=yi.ct.apply(yi,Object(e.h)([t.path],i)).child(yi.ct(n))),new Jf(t.firestore,null,r)}function Wf(t,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t instanceof ti&&(t=t._),1===arguments.length&&(n=Kr.t()),Pf("doc","path",n),t instanceof Bf)return Mf(r=yi.ct.apply(yi,Object(e.h)([n],i))),new Gf(t,null,new bi(r));if(!(t instanceof Gf||t instanceof Jf))throw new $r(Qr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mf(r=t.D_.child(yi.ct.apply(yi,Object(e.h)([n],i)))),new Gf(t.firestore,t instanceof Jf?t.v_:null,new bi(r))}function Yf(t,e){return t instanceof ti&&(t=t._),e instanceof ti&&(e=e._),(t instanceof Gf||t instanceof Jf)&&(e instanceof Gf||e instanceof Jf)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Qf(t,e){return t instanceof ti&&(t=t._),e instanceof ti&&(e=e._),t instanceof Kf&&e instanceof Kf&&t.firestore===e.firestore&&ko(t.C_,e.C_)&&t.v_===e.v_}var $f=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new $r(Qr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new $r(Qr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.K=function(t){return Jr(this.x_,t.x_)||Jr(this.N_,t.N_)},t}(),Zf=/^__.*__$/,tl=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.zt?new fs(t,this.data,this.zt,e,this.fieldTransforms):new hs(t,this.data,e,this.fieldTransforms)},t}(),el=function(){function t(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new fs(t,this.data,this.zt,e,this.fieldTransforms)},t}();function nl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zr()}}var rl=function(){function t(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return _l(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.zt.find((function(e){return t.st(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.st(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(nl(this.k_)&&Zf.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),il=function(){function t(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||nh(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new rl({k_:t,methodName:e,j_:n,path:mi.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},t}();function ol(t){var e=t.p_(),n=nh(t.I_);return new il(t.I_,!!e.ignoreUndefinedProperties,n)}function sl(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);bl("Data must be an object, but it was:",s,r);var u,a,c=gl(r,s);if(o.merge)u=new _i(s.zt),a=s.fieldTransforms;else if(o.mergeFields){for(var h=[],f=0,l=o.mergeFields;f<l.length;f++){var p=wl(e,l[f],n);if(!s.contains(p))throw new $r(Qr.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Tl(h,p)||h.push(p)}u=new _i(h),a=s.fieldTransforms.filter((function(t){return u.It(t.field)}))}else u=null,a=s.fieldTransforms;return new tl(new Ji(c),u,a)}var ul=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(Cf);function al(t,e,n){return new rl({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var cl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.z_=function(t){return new ts(t.path,new Ko)},n.prototype.isEqual=function(t){return t instanceof n},n}(Cf),hl=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(e.f)(n,t),n.prototype.z_=function(t){var e=al(this,t,!0),n=this.H_.map((function(t){return yl(t,e)})),r=new Jo(n);return new ts(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(Cf),fl=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(e.f)(n,t),n.prototype.z_=function(t){var e=al(this,t,!0),n=this.H_.map((function(t){return yl(t,e)})),r=new Wo(n);return new ts(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(Cf),ll=function(t){function n(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(e.f)(n,t),n.prototype.z_=function(t){var e=new Qo(t.Kt,Fo(t.Kt,this.J_));return new ts(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(Cf);function pl(t,e,n,r){var i=t.G_(1,e,n);bl("Data must be an object, but it was:",i,r);var o=[],s=new Xi;Ii(r,(function(t,r){var u=El(e,t,n);r instanceof ti&&(r=r._);var a=i.U_(u);if(r instanceof ul)o.push(u);else{var c=yl(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new _i(o);return new el(s.yt(),u,i.fieldTransforms)}function dl(t,e,n,r,i,o){var s=t.G_(1,e,n),u=[wl(e,r,n)],a=[i];if(o.length%2!=0)throw new $r(Qr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(wl(e,o[c])),a.push(o[c+1]);for(var h=[],f=new Xi,l=u.length-1;l>=0;--l)if(!Tl(h,u[l])){var p=u[l],d=a[l];d instanceof ti&&(d=d._);var v=s.U_(p);if(d instanceof ul)h.push(p);else{var y=yl(d,v);null!=y&&(h.push(p),f.set(p,y))}}var g=new _i(h);return new el(f.yt(),g,s.fieldTransforms)}function vl(t,e,n,r){return void 0===r&&(r=!1),yl(n,t.G_(r?4:3,e))}function yl(t,e){if(t instanceof ti&&(t=t._),ml(t))return bl("Unsupported field value:",e,t),gl(t,e);if(t instanceof Cf)return function(t,e){if(!nl(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.zt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=yl(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof ti&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fo(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=pi.fromDate(t);return{timestampValue:Zs(e.Kt,n)}}if(t instanceof pi)return n=new pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Zs(e.Kt,n)};if(t instanceof $f)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Zr)return{bytesValue:tu(e.Kt,t.l)};if(t instanceof Gf){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ru(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+Uf(t))}(t,e)}function gl(t,e){var n={};return Ei(t)?e.path&&e.path.length>0&&e.zt.push(e.path):Ii(t,(function(t,r){var i=yl(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ml(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof pi||t instanceof $f||t instanceof Zr||t instanceof Gf||t instanceof Cf)}function bl(t,e,n){if(!ml(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Uf(n);throw"an object"===r?e.K_(t+" a custom object"):e.K_(t+" "+r)}}function wl(t,e,n){if(e instanceof ti&&(e=e._),e instanceof kf)return e.d_;if("string"==typeof e)return El(t,e);throw _l("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Il=new RegExp("[~\\*/\\[\\]]");function El(t,n,r){if(n.search(Il)>=0)throw _l("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,r);try{return(new(kf.bind.apply(kf,Object(e.h)([void 0],n.split("."))))).d_}catch(e){throw _l("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,r)}}function _l(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,u="Function "+e+"() called with invalid data";n&&(u+=" (via `toFirestore()`)");var a="";return(o||s)&&(a+=" (found",o&&(a+=" in field "+r),s&&(a+=" in document "+i),a+=")"),new $r(Qr.INVALID_ARGUMENT,(u+=". ")+t+a)}function Tl(t,e){return t.some((function(t){return t.isEqual(e)}))}var Ol=function(){function t(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r=this;return Object(e.c)(this,(function(i){switch(i.label){case 0:if(this.nf(),this.mutations.length>0)throw new $r(Qr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o,s,u,a;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Br(t),i=cu(r.Kt)+"/documents",o={documents:n.map((function(t){return ou(r.Kt,t)}))},[4,r.Cu("BatchGetDocuments",i,o)];case 1:return s=e.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Hr(!!e.found),e.found.name,e.found.updateTime;var n=su(t,e.found.name),r=nu(e.found.updateTime),i=new Ji({mapValue:{fields:e.found.fields}});return new Qi(n,r,i,{})}(t,e):"missing"in e?function(t,e){Hr(!!e.missing),Hr(!!e.readTime);var n=su(t,e.missing),r=nu(e.readTime);return new $i(n,r)}(t,e):zr()}(r.Kt,t);u.set(e.key.toString(),e)})),a=[],[2,(n.forEach((function(t){var e=u.get(t.toString());Hr(!!e),a.push(e)})),a)]}}))}))}(this.Dh,t)];case 1:return[2,((n=i.sent()).forEach((function(t){t instanceof $i||t instanceof Qi?r.sf(t):zr()})),n)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new ms(t,this.Gt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.c)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,e){var r=bi.ft(e);n.mutations.push(new bs(r,n.Gt(r)))})),[4,function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=Br(t),i=cu(r.Kt)+"/documents",o={writes:n.map((function(t){return lu(r.Kt,t)}))},[4,r.bu("Commit",i,o)];case 1:return e.sent(),[2]}}))}))}(this.Dh,this.mutations)];case 1:return r.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof Qi)e=t.version;else{if(!(t instanceof $i))throw zr();e=di.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new $r(Qr.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?ns.updateTime(e):ns.Wt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(di.min()))throw new $r(Qr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ns.updateTime(e)}return ns.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Nl=function(){function t(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new rh(this.fs,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.zu.Bu((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,n,r=this;return Object(e.c)(this,(function(e){return t=new Ol(this.Dh),(n=this.uf(t))&&n.then((function(e){r.fs.ys((function(){return t.commit().then((function(){r.Ts.resolve(e)})).catch((function(t){r.hf(t)}))}))})).catch((function(t){r.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Di(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this.fs.ys((function(){return e.af(),Promise.resolve()}))):this.Ts.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Is(e)}return!1},t}(),Al=function(){function t(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=si.UNAUTHENTICATED,this.clientId=Kr.t(),this._f=function(){},this.N=new Su,this.credentials.S((function(t){Vr("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()}))}return t.prototype.getConfiguration=function(){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this.fs.wf)throw new $r(Qr.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.fs.Ef();var n=new Su;return this.fs.Tf((function(){return Object(e.b)(t,void 0,void 0,(function(){var t,r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:e.sent(),e.label=4;case 4:return this.credentials.D(),n.resolve(),[3,6];case 5:return t=e.sent(),r=qu(t,"Failed to shutdown persistence"),n.reject(r),[3,6];case 6:return[2]}}))}))})),n.promise},t}();function Sl(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i,o=this;return Object(e.c)(this,(function(s){switch(s.label){case 0:return t.fs.Af(),Vr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return r=s.sent(),[4,n.initialize(r)];case 2:return s.sent(),i=r.Yl,t.ff((function(r){i.isEqual(r)||(i=r,t.fs.vo((function(){return Object(e.b)(o,void 0,void 0,(function(){return Object(e.c)(this,(function(t){switch(t.label){case 0:return[4,mc(n.Sh,r)];case 1:return t.sent(),[2]}}))}))})))})),n.persistence.Vo((function(){return t.terminate()})),t.mf=n,[2]}}))}))}function jl(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.c)(this,(function(o){switch(o.label){case 0:return t.fs.Af(),[4,xl(t)];case 1:return r=o.sent(),Vr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,n.initialize(r,i)];case 3:return o.sent(),t.ff((function(r){return t.fs.vo((function(){return function(t,n){return Object(e.b)(this,void 0,void 0,(function(){var r,i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(r=Br(t)).fs.Af(),Vr("RemoteStore","RemoteStore received new credentials"),i=mh(r),r.Fh.add(3),[4,fh(r)];case 1:return e.sent(),i&&r.Mh.set("Unknown"),[4,r.Ch.s_(n)];case 2:return e.sent(),r.Fh.delete(3),[4,hh(r)];case 3:return e.sent(),[2]}}))}))}(n.gl,r)}))})),t.If=n,[2]}}))}))}function xl(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(Vr("FirestoreClient","Using default OfflineComponentProvider"),[4,Sl(t,new Af)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Dl(t){return Object(e.b)(this,void 0,void 0,(function(){return Object(e.c)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(Vr("FirestoreClient","Using default OnlineComponentProvider"),[4,jl(t,new xf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function kl(t){return xl(t).then((function(t){return t.persistence}))}function Cl(t){return xl(t).then((function(t){return t.Sh}))}function Pl(t){return Dl(t).then((function(t){return t.gl}))}function Ll(t){return Dl(t).then((function(t){return t.fa}))}function Rl(t){return Object(e.b)(this,void 0,void 0,(function(){var n,r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,Dl(t)];case 1:return n=e.sent(),[2,((r=n.Vl).Gh=Wh.bind(null,n.fa),r.Jh=Qh.bind(null,n.fa),r)]}}))}))}function Ml(t,n,r){var i=this;void 0===r&&(r={});var o=new Su;return t.fs.ys((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return i=function(t,e,n,r,i){var o=new Df({next:function(o){e.ys((function(){return Vh(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new $r(Qr.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new $r(Qr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new zh(_o(n.path),o,{includeMetadataChanges:!0,sl:!0});return Mh(t,s)},[4,Rl(t)];case 1:return[2,i.apply(void 0,[e.sent(),t.fs,n,r,o])]}}))}))})),o.promise}function Vl(t,n,r){var i=this;void 0===r&&(r={});var o=new Su;return t.fs.ys((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return i=function(t,e,n,r,i){var o=new Df({next:function(n){e.ys((function(){return Vh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new $r(Qr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new zh(n,o,{includeMetadataChanges:!0,sl:!0});return Mh(t,s)},[4,Rl(t)];case 1:return[2,i.apply(void 0,[e.sent(),t.fs,n,r,o])]}}))}))})),o.promise}var Ul=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new rh(this,"async_queue_retry"),this.vf=function(){var e=eh();e&&Vr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.zu.Uu()};var e=eh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.ys=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=eh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.vo=function(t){var e=this;this.ys((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(e.b)(this,void 0,void 0,(function(){var t,n=this;return Object(e.c)(this,(function(e){switch(e.label){case 0:if(0===this.Pf.length)return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return e.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Pu(t=e.sent()))throw t;return Vr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.zu.Bu((function(){return n.Cf()})),e.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,Ur("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.mr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=Uu.Is(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&zr()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(e.b)(this,void 0,void 0,(function(){var t;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},t.prototype.Of=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ws-e.ws}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Ps(),"all"!==t&&i.ds===t)break}return e.Nf()}))},t.prototype.kf=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}(),ql=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).Mf=new Ul,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(e.f)(n,t),n.prototype.b_=function(){return this.Lf||zl(this),this.Lf.terminate()},n}(Bf);function Fl(t){return t.Lf||zl(t),t.Lf.df(),t.Lf}function zl(t){var e=t.p_(),n=function(t,e,n){return new ii(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.Lf=new Al(t.m_,t.Mf,n)}function Hl(t,n,r){var i=this,o=new Su;return t.fs.enqueue((function(){return Object(e.b)(i,void 0,void 0,(function(){var i;return Object(e.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Sl(t,r)];case 1:return e.sent(),[4,jl(t,n)];case 2:return e.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Qr.FAILED_PRECONDITION||t.code===Qr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=e.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Bl(t){if(t.R_||t.P_)throw new $r(Qr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Gl=function(){function t(){}return t.prototype.$f=function(t,e){switch(void 0===e&&(e="none"),Pi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ni(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(Ai(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw zr()}},t.prototype.jf=function(t,e){var n=this,r={};return Ii(t.fields||{},(function(t,i){r[t]=n.$f(i,e)})),r},t.prototype.Kf=function(t){return new $f(Ni(t.latitude),Ni(t.longitude))},t.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.$f(t,e)}))},t.prototype.qf=function(t,e){switch(e){case"previous":var n=ji(t);return null==n?null:this.$f(n,e);case"estimate":return this.Bf(xi(t));default:return null}},t.prototype.Bf=function(t){var e=Oi(t);return new pi(e.seconds,e.nanos)},t.prototype.Gf=function(t,e){var n=yi.ct(t);Hr(Au(n));var r=new oi(n.get(1),n.get(3)),i=new bi(n.X(5));return r.isEqual(e)||Ur("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),Kl=function(){function t(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Gf(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Jf},t.prototype.data=function(){if(this.Jf){if(this.v_){var t=new Jl(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.$f(this.Jf.vt())}},t.prototype.get=function(t){if(this.Jf){var e=this.Jf.data().field(Xl("DocumentSnapshot.get",t));if(null!==e)return this.Hf.$f(e)}},t}(),Jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.data=function(){return t.prototype.data.call(this)},n}(Kl);function Xl(t,e){return"string"==typeof e?El(t,e):e instanceof ti?e._.d_:e.d_}function Wl(t){if(Oo(t)&&0===t.Nt.length)throw new $r(Qr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yl=function(){};function Ql(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.Yf(t)}return t}var $l=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).Xf=e,i.Zf=n,i.td=r,i.type="where",i}return Object(e.f)(n,t),n.prototype.Yf=function(t){var e=ol(t.firestore),n=function(t,e,n,r,i,o,s){var u;if(i.ht()){if("array-contains"===o||"array-contains-any"===o)throw new $r(Qr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){op(s,o);for(var a=[],c=0,h=s;c<h.length;c++){var f=h[c];a.push(ip(r,t,f))}u={arrayValue:{values:a}}}else u=ip(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||op(s,o),u=vl(n,"where",s,"in"===o||"not-in"===o);var l=oo.create(i,o,u);return function(t,e){if(e.xt()){var n=Ao(t);if(null!==n&&!n.isEqual(e.field))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=No(t);null!==r&&sp(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new $r(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new $r(Qr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.C_,0,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new Kf(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Io(t.path,t.collectionGroup,t.Nt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},n}(Yl),Zl=function(t){function n(e,n){var r=this;return(r=t.call(this)||this).Xf=e,r.ed=n,r.type="orderBy",r}return Object(e.f)(n,t),n.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new go(e,n);return function(t,e){if(null===No(t)){var n=Ao(t);null!==n&&sp(t,n,e.field)}}(t,r),r}(t.C_,this.Xf,this.ed);return new Kf(t.firestore,t.v_,function(t,e){var n=t.Nt.concat([e]);return new Io(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},n}(Yl),tp=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.nd=n,i.sd=r,i}return Object(e.f)(n,t),n.prototype.Yf=function(t){return new Kf(t.firestore,t.v_,Do(t.C_,this.nd,this.sd))},n}(Yl),ep=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(e.f)(n,t),n.prototype.Yf=function(t){var e=rp(t,this.type,this.rd,this.od);return new Kf(t.firestore,t.v_,function(t,e){return new Io(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},n}(Yl),np=function(t){function n(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.rd=n,i.od=r,i}return Object(e.f)(n,t),n.prototype.Yf=function(t){var e=rp(t,this.type,this.rd,this.od);return new Kf(t.firestore,t.v_,function(t,e){return new Io(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},n}(Yl);function rp(t,e,n,r){if(n[0]instanceof ti&&(n[0]=n[0]._),n[0]instanceof Kl)return function(t,e,n,r,i){if(!r)throw new $r(Qr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,u=jo(t);s<u.length;s++){var a=u[s];if(a.field.ht())o.push(Fi(e,r.key));else{var c=r.field(a.field);if(Si(c))throw new $r(Qr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=a.field.ot();throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new vo(o,i)}(t.C_,t.firestore.I_,e,n[0].Jf,r);var i=ol(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new $r(Qr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.ht()){if("string"!=typeof c)throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!So(t)&&-1!==c.indexOf("/"))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(yi.ct(c));if(!bi.Et(h))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var f=new bi(h);u.push(Fi(e,f))}else{var l=vl(n,r,c);u.push(l)}}return new vo(u,o)}(t.C_,t.firestore.I_,i,e,n,r)}function ip(t,e,n){if(n instanceof ti&&(n=n._),"string"==typeof n){if(""===n)throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!So(e)&&-1!==n.indexOf("/"))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(yi.ct(n));if(!bi.Et(r))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Fi(t,new bi(r))}if(n instanceof Gf)return Fi(t,n.S_);throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Uf(n)+".")}function op(t,e){if(!Array.isArray(t)||0===t.length)throw new $r(Qr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new $r(Qr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function sp(t,e,n){if(!n.isEqual(e))throw new $r(Qr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function up(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}function ap(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var cp=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.f)(n,t),n.prototype.Uf=function(t){return new Zr(t)},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Gf(this.firestore,null,e)},n}(Gl),hp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fp=function(t){function n(e,n,r,i,o,s){var u=this;return(u=t.call(this,e,n,r,i,s)||this).zf=e,u.ad=e,u.metadata=o,u}return Object(e.f)(n,t),n.prototype.exists=function(){return t.prototype.exists.call(this)},n.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new lp(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.$f(this.Jf.vt(),t.serverTimestamps)}},n.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){var n=this.Jf.data().field(Xl("DocumentSnapshot.get",t));if(null!==n)return this.Hf.$f(n,e.serverTimestamps)}},n}(Kl),lp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},n}(fp),pp=function(){function t(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new hp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.ud.docs.forEach((function(r){t.call(e,new lp(n.zf,n.Hf,r.key,r,new hp(n.ud.Ce.has(r.key),n.ud.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.ud.Ne)throw new $r(Qr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===e||(this.hd=function(t,e){if(t.ud.De.nt()){var n=0;return t.ud.docChanges.map((function(e){var r=new lp(t.zf,t.Hf,e.doc.key,e.doc,new hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t.ud.De;return t.ud.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new lp(t.zf,t.Hf,e.doc.key,e.doc,new hp(t.ud.Ce.has(e.doc.key),t.ud.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:dp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.ld=e),this.hd},t}();function dp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zr()}}function vp(t,e){return t instanceof fp&&e instanceof fp?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof pp&&e instanceof pp&&t.zf===e.zf&&Qf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var yp=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.f)(n,t),n.prototype.Uf=function(t){return new Zr(t)},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return new Gf(this.firestore,null,e)},n}(Gl);function gp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=qf(t,Gf);var o=qf(t.firestore,ql),s=ol(o);return e instanceof ti&&(e=e._),bp(o,[("string"==typeof e||e instanceof kf?dl(s,"updateDoc",t.S_,e,n,r):pl(s,"updateDoc",t.S_,e)).F_(t.S_,ns.exists(!0))])}function mp(t){for(var n,r,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t instanceof ti&&(t=t._);var u={includeMetadataChanges:!1},a=0;"object"!=typeof o[a]||up(o[a])||(u=o[a],a++);var c,h,f,l={includeMetadataChanges:u.includeMetadataChanges};if(up(o[a])){var p=o[a];o[a]=null===(n=p.next)||void 0===n?void 0:n.bind(p),o[a+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),o[a+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof Gf)h=qf(t.firestore,ql),f=_o(t.S_.path),c={next:function(e){o[a]&&o[a](wp(h,t,e))},error:o[a+1],complete:o[a+2]};else{var d=qf(t,Kf);h=qf(d.firestore,ql),f=d.C_;var v=new yp(h);c={next:function(t){o[a]&&o[a](new pp(h,v,d,t))},error:o[a+1],complete:o[a+2]},Wl(t.C_)}return function(t,n,r,i){var o=this,s=new Df(i),u=new zh(n,s,r);return t.fs.ys((function(){return Object(e.b)(o,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=Mh,[4,Rl(t)];case 1:return[2,n.apply(void 0,[e.sent(),u])]}}))}))})),function(){s.r_(),t.fs.ys((function(){return Object(e.b)(o,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=Vh,[4,Rl(t)];case 1:return[2,n.apply(void 0,[e.sent(),u])]}}))}))}))}}(Fl(h),f,l,c)}function bp(t,n){return function(t,n){var r=this,i=new Su;return t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return r=$h,[4,Ll(t)];case 1:return[2,r.apply(void 0,[e.sent(),n,i])]}}))}))})),i.promise}(Fl(t),n)}function wp(t,e,n){var r=n.docs.get(e.S_),i=new yp(t);return new fp(t,i,e.S_,r,new hp(n.hasPendingWrites,n.fromCache),e.v_)}var Ip=function(){function t(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=ol(t)}return t.prototype.set=function(t,e,n){this.Ed();var r=Ep(t,this.zf),i=ap(r.v_,e,n),o=sl(this.wd,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.fd.push(o.F_(r.S_,ns.Wt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();var o,s=Ep(t,this.zf);return e instanceof ti&&(e=e._),o="string"==typeof e||e instanceof kf?dl(this.wd,"WriteBatch.update",s.S_,e,n,r):pl(this.wd,"WriteBatch.update",s.S_,e),this.fd.push(o.F_(s.S_,ns.exists(!0))),this},t.prototype.delete=function(t){this.Ed();var e=Ep(t,this.zf);return this.fd=this.fd.concat(new ms(e.S_,ns.Wt())),this},t.prototype.commit=function(){return this.Ed(),this.dd=!0,this.fd.length>0?this._d(this.fd):Promise.resolve()},t.prototype.Ed=function(){if(this.dd)throw new $r(Qr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ep(t,e){if(t instanceof ti&&(t=t._),t.firestore!==e)throw new $r(Qr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var _p=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).zf=e,r}return Object(e.f)(n,t),n.prototype.get=function(e){var n=this,r=Ep(e,this.zf),i=new yp(this.zf);return t.prototype.get.call(this,e).then((function(t){return new fp(n.zf,i,r.S_,t.Jf,new hp(!1,!1),r.v_)}))},n}(function(){function t(t,e){this.zf=t,this.Td=e,this.wd=ol(t)}return t.prototype.get=function(t){var e=this,n=Ep(t,this.zf),r=new cp(this.zf);return this.Td.ef([n.S_]).then((function(t){if(!t||1!==t.length)return zr();var i=t[0];if(i instanceof $i)return new Kl(e.zf,r,n.S_,null,n.v_);if(i instanceof Qi)return new Kl(e.zf,r,i.key,i,n.v_);throw zr()}))},t.prototype.set=function(t,e,n){var r=Ep(t,this.zf),i=ap(r.v_,e,n),o=sl(this.wd,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Td.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Ep(t,this.zf);return e instanceof ti&&(e=e._),o="string"==typeof e||e instanceof kf?dl(this.wd,"Transaction.update",s.S_,e,n,r):pl(this.wd,"Transaction.update",s.S_,e),this.Td.update(s.S_,o),this},t.prototype.delete=function(t){var e=Ep(t,this.zf);return this.Td.delete(e.S_),this},t}()),Tp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Bl(t=qf(t,ql));var n=Fl(t),r=t.p_(),i=new xf;return Hl(n,i,new Sf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Bl(t=qf(t,ql));var e=Fl(t),n=t.p_(),r=new xf;return Hl(e,r,new jf(r,n.cacheSizeBytes))}(t._)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var n=this;if(t.R_&&!t.P_)throw new $r(Qr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Su;return t.Mf.Tf((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return Du.Wn()?(n=t+"main",[4,Du.delete(n)]):[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(lc(t.I_,t.w_))];case 1:return i.sent(),r.resolve(),[3,3];case 2:return n=i.sent(),r.reject(n),[3,3];case 3:return[2]}}))}))})),r.promise}(t._)},t}(),Op=function(t){function n(e,n,r){var i=this;return(i=t.call(this,n)||this).Id=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof oi||(i.md=e),i}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),n.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},n.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this._.V_().host&&qr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},n.prototype.enableNetwork=function(){return function(t){var n=this;return t.fs.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,kl(t)];case 1:return n=e.sent(),[4,Pl(t)];case 2:return r=e.sent(),[2,(n.po(!0),function(t){var e=Br(t);return e.Fh.delete(0),hh(e)}(r))]}}))}))}))}(Fl(qf(this._,ql)))},n.prototype.disableNetwork=function(){return function(t){var n=this;return t.fs.enqueue((function(){return Object(e.b)(n,void 0,void 0,(function(){var n,r;return Object(e.c)(this,(function(i){switch(i.label){case 0:return[4,kl(t)];case 1:return n=i.sent(),[4,Pl(t)];case 2:return r=i.sent(),[2,(n.po(!1),function(t){return Object(e.b)(this,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return(n=Br(t)).Fh.add(0),[4,fh(n)];case 1:return e.sent(),n.Mh.set("Offline"),[2]}}))}))}(r))]}}))}))}))}(Fl(qf(this._,ql)))},n.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Rf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},n.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},n.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this._._delete()},n.prototype.waitForPendingWrites=function(){return function(t){var n=this,r=new Su;return t.fs.ys((function(){return Object(e.b)(n,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=of,[4,Ll(t)];case 1:return[2,n.apply(void 0,[e.sent(),r])]}}))}))})),r.promise}(Fl(qf(this._,ql)))},n.prototype.onSnapshotsInSync=function(t){return function(t,n){return function(t,n){var r=this,i=new Df(n);return t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=function(t,e){Br(t).jh.add(e),e.next()},[4,Rl(t)];case 1:return[2,n.apply(void 0,[e.sent(),i])]}}))}))})),function(){i.r_(),t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var n;return Object(e.c)(this,(function(e){switch(e.label){case 0:return n=function(t,e){Br(t).jh.delete(e)},[4,Rl(t)];case 1:return[2,n.apply(void 0,[e.sent(),i])]}}))}))}))}}(Fl(t=qf(t,ql)),up(n)?n:{next:n})}(this._,t)},Object.defineProperty(n.prototype,"app",{get:function(){if(!this.md)throw new $r(Qr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new Vp(this,Xf(this._,t))}catch(t){throw xp(t,"collection()","Firestore.collection()")}},n.prototype.doc=function(t){try{return new jp(this,Wf(this._,t))}catch(t){throw xp(t,"doc()","Firestore.doc()")}},n.prototype.collectionGroup=function(t){try{return new Lp(this,function(t,e){if(t=qf(t,Bf),Pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $r(Qr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Kf(t,null,function(t){return new Io(yi.at(),t)}(e))}(this._,t))}catch(t){throw xp(t,"collectionGroup()","Firestore.collectionGroup()")}},n.prototype.runTransaction=function(t){var n=this;return function(t,n){return function(t,n){var r=this,i=new Su;return t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.c)(this,(function(e){switch(e.label){case 0:return[4,function(t){return Dl(t).then((function(t){return t.Dh}))}(t)];case 1:return r=e.sent(),new Nl(t.fs,r,n,i).run(),[2]}}))}))})),i.promise}(Fl(t),(function(e){return n(new _p(t,e))}))}(this._,(function(e){return t(new Ap(n,e))}))},n.prototype.batch=function(){var t=this;return Fl(this._),new Sp(new Ip(this._,(function(e){return bp(t._,e)})))},n.prototype.loadBundle=function(t){throw new $r(Qr.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},n.prototype.namedQuery=function(t){throw new $r(Qr.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},n}(ti),Np=function(t){function n(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(e.f)(n,t),n.prototype.Uf=function(t){return new ri(new Zr(t))},n.prototype.Qf=function(t){var e=this.Gf(t,this.firestore.I_);return jp.Ad(e,this.firestore,null)},n}(Gl);var Ap=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(e.f)(n,t),n.prototype.get=function(t){var e=this,n=Up(t);return this._.get(n).then((function(t){return new Cp(e.zf,t)}))},n.prototype.set=function(t,e,n){var r=Up(t);return n?(Lf("Transaction.set",n),this._.set(r,e,n)):this._.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Up(t);return 2===arguments.length?this._.update(u,n):(i=this._).update.apply(i,Object(e.h)([u,n,r],o)),this},n.prototype.delete=function(t){var e=Up(t);return this._.delete(e),this},n}(ti),Sp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.set=function(t,e,n){var r=Up(t);return n?(Lf("WriteBatch.set",n),this._.set(r,e,n)):this._.set(r,e),this},n.prototype.update=function(t,n,r){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var u=Up(t);return 2===arguments.length?this._.update(u,n):(i=this._).update.apply(i,Object(e.h)([u,n,r],o)),this},n.prototype.delete=function(t){var e=Up(t);return this._.delete(e),this},n.prototype.commit=function(){return this._.commit()},n}(ti),jp=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Np(e),r}return Object(e.f)(n,t),n.Rd=function(t,e,r){if(t.length%2!=0)throw new $r(Qr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new n(e,new Gf(e._,r,new bi(t)))},n.Ad=function(t,e,r){return new n(e,new Gf(e._,r,t))},Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){return new Vp(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){try{return new Vp(this.firestore,Xf(this._,t))}catch(t){throw xp(t,"collection()","DocumentReference.collection()")}},n.prototype.isEqual=function(t){return t instanceof ti&&(t=t._),t instanceof Gf&&Yf(this._,t)},n.prototype.set=function(t,e){e=Lf("DocumentReference.set",e);try{return function(t,e,n){t=qf(t,Gf);var r=qf(t.firestore,ql),i=ap(t.v_,e,n);return bp(r,[sl(ol(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,ns.Wt())])}(this._,t,e)}catch(t){throw xp(t,"setDoc()","DocumentReference.set()")}},n.prototype.update=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return 1===arguments.length?gp(this._,t):gp.apply(void 0,Object(e.h)([this._,t,n],r))}catch(t){throw xp(t,"updateDoc()","DocumentReference.update()")}},n.prototype.delete=function(){return bp(qf((t=this._).firestore,ql),[new ms(t.S_,ns.Wt())]);var t},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=kp(e,(function(e){return new Cp(t.firestore,new fp(t.firestore._,t.Hf,e.S_,e.Jf,e.metadata,t._.v_))}));return mp(this._,r,i)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Gf);var n=qf(t.firestore,ql),r=Fl(n),i=new yp(n);return function(t,n){var r=this,i=new Su;return t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.c)(this,(function(o){switch(o.label){case 0:return r=function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o;return Object(e.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(t,e){var n=Br(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Ic.Jo(t,e)}))}(t,n)];case 1:return(o=e.sent())instanceof Qi?r.resolve(o):o instanceof $i?r.resolve(null):r.reject(new $r(Qr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=e.sent(),o=qu(i,"Failed to get document '"+n+" from cache"),r.reject(o),[3,3];case 3:return[2]}}))}))},[4,Cl(t)];case 1:return[2,r.apply(void 0,[o.sent(),n,i])]}}))}))})),i.promise}(r,t.S_).then((function(e){return new fp(n,i,t.S_,e,new hp(e instanceof Qi&&e.bt,!0),t.v_)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Gf);var e=qf(t.firestore,ql);return Ml(Fl(e),t.S_,{source:"server"}).then((function(n){return wp(e,t,n)}))}(this._):function(t){t=qf(t,Gf);var e=qf(t.firestore,ql);return Ml(Fl(e),t.S_).then((function(n){return wp(e,t,n)}))}(this._)).then((function(t){return new Cp(n.firestore,new fp(n.firestore._,n.Hf,t.S_,t.Jf,t.metadata,n._.v_))}))},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(ti);function xp(t,e,n){return t.message=t.message.replace(e,n),t}function Dp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!up(r))return r}return{}}function kp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=up(t[0])?t[0]:up(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Cp=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"ref",{get:function(){return new jp(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),n.prototype.data=function(t){return this._.data(t)},n.prototype.get=function(t,e){return this._.get(t,e)},n.prototype.isEqual=function(t){return vp(this._,t._)},n}(ti),Pp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.prototype.data=function(t){return this._.data(t)},n}(Cp),Lp=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Hf=new Np(e),r}return Object(e.f)(n,t),n.prototype.where=function(t,e,r){try{return new n(this.firestore,Ql(this._,function(t,e,n){var r=e,i=Xl("where",t);return new $l(i,r,n)}(t,e,r)))}catch(t){throw xp(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.orderBy=function(t,e){try{return new n(this.firestore,Ql(this._,function(t,e){void 0===e&&(e="asc");var n=e,r=Xl("orderBy",t);return new Zl(r,n)}(t,e)))}catch(t){throw xp(t,/(orderBy|where)\(\)/,"Query.$1()")}},n.prototype.limit=function(t){try{return new n(this.firestore,Ql(this._,function(t){return Ff("limit",t),new tp("limit",t,"F")}(t)))}catch(t){throw xp(t,"limit()","Query.limit()")}},n.prototype.limitToLast=function(t){try{return new n(this.firestore,Ql(this._,function(t){return Ff("limitToLast",t),new tp("limitToLast",t,"L")}(t)))}catch(t){throw xp(t,"limitToLast()","Query.limitToLast()")}},n.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Ql(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw xp(t,"startAt()","Query.startAt()")}},n.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Ql(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ep("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw xp(t,"startAfter()","Query.startAfter()")}},n.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Ql(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw xp(t,"endBefore()","Query.endBefore()")}},n.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new n(this.firestore,Ql(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new np("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw xp(t,"endAt()","Query.endAt()")}},n.prototype.isEqual=function(t){return Qf(this._,t._)},n.prototype.get=function(t){var n=this;return("cache"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var n=qf(t.firestore,ql),r=Fl(n),i=new yp(n);return function(t,n){var r=this,i=new Su;return t.fs.ys((function(){return Object(e.b)(r,void 0,void 0,(function(){var r;return Object(e.c)(this,(function(o){switch(o.label){case 0:return r=function(t,n,r){return Object(e.b)(this,void 0,void 0,(function(){var i,o,s,u,a;return Object(e.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Oc(t,n,!0)];case 1:return a=e.sent(),i=new Gh(n,a.Pc),o=i.dl(a.documents),s=i.Ti(o,!1),r.resolve(s.snapshot),[3,3];case 2:return u=e.sent(),a=qu(u,"Failed to execute query '"+n+" against cache"),r.reject(a),[3,3];case 3:return[2]}}))}))},[4,Cl(t)];case 1:return[2,r.apply(void 0,[o.sent(),n,i])]}}))}))})),i.promise}(r,t.C_).then((function(e){return new pp(n,i,t,e)}))}(this._):"server"===(null==t?void 0:t.source)?function(t){t=qf(t,Kf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return Vl(n,t.C_,{source:"server"}).then((function(n){return new pp(e,r,t,n)}))}(this._):function(t){t=qf(t,Kf);var e=qf(t.firestore,ql),n=Fl(e),r=new yp(e);return Wl(t.C_),Vl(n,t.C_).then((function(n){return new pp(e,r,t,n)}))}(this._)).then((function(t){return new Mp(n.firestore,new pp(n.firestore._,n.Hf,n._,t.ud))}))},n.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Dp(e),i=kp(e,(function(e){return new Mp(t.firestore,new pp(t.firestore._,t.Hf,t._,e.ud))}));return mp(this._,r,i)},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(ti),Rp=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"doc",{get:function(){return new Pp(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),n}(ti),Mp=function(t){function n(e,n){var r=this;return(r=t.call(this,n)||this).zf=e,r}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"query",{get:function(){return new Lp(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"docs",{get:function(){var t=this;return this._.docs.map((function(e){return new Pp(t.zf,e)}))},enumerable:!1,configurable:!0}),n.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map((function(t){return new Rp(e.zf,t)}))},n.prototype.forEach=function(t,e){var n=this;this._.forEach((function(r){t.call(e,new Pp(n.zf,r))}))},n.prototype.isEqual=function(t){return vp(this._,t._)},n}(ti),Vp=function(t){function n(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._=n,r}return Object(e.f)(n,t),Object.defineProperty(n.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"parent",{get:function(){var t=this._.parent;return t?new jp(this.firestore,t):null},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){try{return new jp(this.firestore,void 0===t?Wf(this._):Wf(this._,t))}catch(t){throw xp(t,"doc()","CollectionReference.doc()")}},n.prototype.add=function(t){var e=this;return function(t,e){var n=qf(t.firestore,ql),r=Wf(t),i=ap(t.v_,e);return bp(n,[sl(ol(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,ns.exists(!1))]).then((function(){return r}))}(this._,t).then((function(t){return new jp(e.firestore,t)}))},n.prototype.isEqual=function(t){return Yf(this._,t._)},n.prototype.withConverter=function(t){return new n(this.firestore,this._.withConverter(t))},n}(Lp);function Up(t){return t instanceof ti&&(t=t._),qf(t,Gf)}var qp,Fp=function(t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.call(this,new(kf.bind.apply(kf,Object(e.h)([void 0],n))))||this}return Object(e.f)(n,t),n.documentId=function(){return new n(mi.lt().ot())},n.prototype.isEqual=function(t){return t instanceof ti&&(t=t._),t instanceof kf&&this._.d_.isEqual(t.d_)},n}(ti),zp=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(e.f)(n,t),n.serverTimestamp=function(){var t=new cl("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new n(t)},n.delete=function(){var t=new ul("deleteField");return t._methodName="FieldValue.delete",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hl("arrayUnion",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new fl("arrayRemove",t)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new n(r)},n.increment=function(t){var e=function(t){return new ll("increment",t)}(t);return e._methodName="FieldValue.increment",new n(e)},n.prototype.isEqual=function(t){return this._.isEqual(t._)},n}(ti),Hp={Firestore:Op,GeoPoint:$f,Timestamp:pi,Blob:ri,Transaction:Ap,WriteBatch:Sp,DocumentReference:jp,DocumentSnapshot:Cp,Query:Lp,QueryDocumentSnapshot:Pp,QuerySnapshot:Mp,CollectionReference:Vp,FieldPath:Fp,FieldValue:zp,setLogLevel:function(t){var e;e=t,Rr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new r.a("firestore",(function(t){return function(t,e){return new Op(t,new ql(t,e),new Tp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Hp)))})(qp=r.j),qp.registerVersion("@firebase/firestore","2.1.1")}).call(this,n(26))}}]);